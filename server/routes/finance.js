// server/routes/finance.js

const express = require('express');
const router = express.Router();

// ­ЪњА рѕЏрѕхрЅ│рІѕрѕ╗: рІерЇІрІГріЊріЋрѕх рїЇрЅЦрІГрЅХрЅй рЅарїБрѕЮ рїаріЋріФрѕФ рІерѕєріљ рІерІ│рЅ│рЅцрІЮ рѕјрїѓріГ рІФрѕхрЇѕрѕЇрїІрЅИрІІрѕЇ!

// ======================================================
// 1. рїѕріЋрІўрЅЦ рѕЏрѕхрЅђрѕўрїЦ (Deposit)
// URL: POST /api/finance/deposit
// ======================================================
router.post('/deposit', (req, res) => {
    // ­ЪњА рІерЅ░рїарЅЃрѕџрІЇ Token рЅ░рѕерїІрїЇрїд рІГрїѕрЅБрѕЇ
    const { amountETB, currency, receiptPhoto } = req.body; 

    // рѕјрїѓріЕ:
    // 1. рІерїѕрЅБрІЇріЋ рІ░рѕерѕ░ріЮ рЇјрЅХ рѕЏрѕерїІрїѕрїЦ (рІГрѕЁрѕЮ рЇІрІГрѕЇ рѕўрѕхрЅђрѕЇріЋ рІГрїарІГрЅЃрѕЇ)
    // 2. рІе ETB рѕўрїаріЋріЋ рЅарІѕрЅЁрЅ│рІі рІерѕЇрІЇрІЇрїЦ рІІрїІ рІѕрІ░ $currency рѕўрѕѕрІѕрїЦ
    // 3. рІерЅ░рЅђрІерѕерІЇріЋ рїѕріЋрІўрЅЦ рѕѕрЅ░рїарЅЃрѕџрІЇ рІерІХрѕІрѕГ рѕџрІЏріЋ (Balance) рѕІрІГ рѕўрїерѕўрѕГ

    res.status(200).json({
        success: true,
        message: `РюЁ рІе ${amountETB} рЅЦрѕГ рѕЏрѕхрЅђрѕўрїЦ рїЦрІФрЅёрІј рІ░рѕГрѕирѕЇрЇб рЅарЅЁрѕГрЅА рІѕрІ░ ${currency} рЅ░рѕѕрІЇрїд рІГрѕўрІўрїѕрЅБрѕЇрЇб`,
        currentBalanceUSD: 150.50 // рѕѕрѕЮрѕ│рѕї
    });
});

// ======================================================
// 2. рїѕріЋрІўрЅЦ рѕЏрІЇрїБрЅх (Withdraw)
// URL: POST /api/finance/withdraw
// ======================================================
router.post('/withdraw', (req, res) => {
    // ­ЪњА рІерЅ░рїарЅЃрѕџрІЇ Token рЅ░рѕерїІрїЇрїд рІГрїѕрЅБрѕЇ
    const { amountUSD, withdrawCurrency, withdrawMethod } = req.body;

    // рѕјрїѓріЕ:
    // 1. рІерЅ░рїарЅЃрѕџрІЇріЋ рІерІХрѕІрѕГ рѕџрІЏріЋ рѕЏрѕерїІрїѕрїЦрЇб
    // 2. рїѕріЋрІўрЅАріЋ рІѕрІ░ рЅ░рїарІерЅђрІЇ рѕЮріЋрІЏрѕг (ETB/EUR/GBP) рѕўрѕѕрІѕрїЦрЇб
    // 3. рЅаwithdrawMethod (Telebirr/CBE/PayPal) рЅаріЕрѕЇ рІерѕЏрІЇрїБрЅх рЅхріЦрІЏрІЮ рѕўрѕІріГрЇб

    if (amountUSD > 1000) {
         return res.status(400).json({ 
            success: false, 
            message: "рѕѕрѕЏрІЇрїБрЅх рІерѕџрЅйрѕЅрЅх ріерЇЇрЅ░ріЏрІЇ рѕўрїаріЋ 1000 рІХрѕІрѕГ ріљрІЇрЇб" 
        });
    }

    res.status(200).json({
        success: true,
        message: `РюЁ рІе ${amountUSD} рІХрѕІрѕГ рѕЏрІЇрїБрЅх рїЦрІФрЅёрІј рІ░рѕГрѕирѕЇрЇб рЅа${withdrawMethod} рЅаріЕрѕЇ рЅ░рѕЇрі│рѕЇрЇб`,
        currentBalanceUSD: 10.00 // рІерЅђрѕерІЇріЋ рѕџрІЏріЋ
    });
});

module.exports = router;

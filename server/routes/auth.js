// server/routes/auth.js

const express = require('express');
const router = express.Router();

// ­ЪњА рѕЏрѕхрЅ│рІѕрѕ╗: рІерІ│рЅ│рЅцрІЮ ріЦріЊ рІерІ░рѕЁріЋріљрЅх рі«рІх ріЦрІџрѕЁ рІГрїѕрЅБрѕЇ

// ======================================================
// 1. рѕЮрІЮрїѕрЅБ (Sign Up Route)
// URL: POST /api/auth/register
// ======================================================
router.post('/register', (req, res) => {
    // ріЦрІџрѕЁ рїІрѕГ рІерЅ░рїарЅЃрѕџрІЇріЋ рѕўрѕерїЃ (рѕхрѕЮ, рѕхрѕЇріГ, рібрѕюрІГрѕЇ, рЇјрЅХ) 
    // рЅ░рЅђрЅЦрѕј рІѕрІ░ рІ│рЅ│рЅцрІЮ рІерѕЏрѕхрїѕрЅБрЅх рѕјрїѓріГ рІГрїѕрЅБрѕЇрЇб
    
    const { name, phone, email, password } = req.body;

    if (!phone || !password || !name) {
        return res.status(400).json({ 
            success: false, 
            message: "ріЦрЅБріГрІј ріарѕхрЇѕрѕІрїі рІерѕєріЉ рѕўрѕерїЃрІјрЅйріЋ рІФрѕхрїѕрЅАрЇб" 
        });
    }

    // рѕЮрІЮрїѕрЅБ ріЦріЋрІ░рЅ░рѕ│ріФ ріЦріЋрѕўрѕЇрѕх
    res.status(201).json({
        success: true,
        message: "РюЁ рѕЮрІЮрїѕрЅБрІј рЅ░рѕ│ріГрЅирѕЇ! ріарѕЂріЋ рѕўрїЇрЅБрЅх рІГрЅйрѕІрѕЅрЇб"
        // ­ЪњА рЅаріЦрІЇріљрЅ░ріЏ рЇЋрѕ«рїђріГрЅх рѕІрІГ рІерЅ░рїарЅЃрѕџрІЇ Token (JWT) ріЦрІџрѕЁ рІГрѕІріФрѕЇрЇб
    });
});


// ======================================================
// 2. рѕўрїЇрЅбрІФ (Log In Route)
// URL: POST /api/auth/login
// ======================================================
router.post('/login', (req, res) => {
    const { phone, password } = req.body;

    if (!phone || !password) {
        return res.status(400).json({ 
            success: false, 
            message: "рѕхрѕЇріГ рЅЂрїЦрѕГ ріЦріЊ рІерІГрѕѕрЇЇ рЅЃрѕЇ рІФрѕхрЇѕрѕЇрїІрѕЅрЇб" 
        });
    }

    // ­ЪњА рЅхріГріГрѕѕріЏрІЇ рѕѓрІ░рЅх: рЅарІ│рЅ│рЅцрІЮ рІЇрѕхрїЦ рѕўрѕерїЃрІЇріЋ рѕўрЇѕрѕѕрїЇ ріЦріЊ рѕЏрІѕрІ│рІ░рѕГрЇб
    
    // рѕѕрїірІюрІЇ рІерѕЎріерѕФ рІ│рЅ│ ріЦріЋрїарЅђрѕЮ
    if (phone === "900000" && password === "123456") {
        return res.status(200).json({
            success: true,
            message: "РюЁ ріЦріЋрі│ріЋ рІ░рѕЁріЊ рѕўрїА!",
            token: "EXAMPLE_JWT_TOKEN_FOR_900000",
            userType: "free" // рІѕрІГрѕЮ "premium" 
        });
    } else {
        return res.status(401).json({
            success: false,
            message: "рІерѕхрѕЇріГ рЅЂрїЦрѕГ рІѕрІГрѕЮ рІерІГрѕѕрЇЇ рЅЃрѕЇ рЅхріГріГрѕЇ ріарІГрІ░рѕѕрѕЮрЇб"
        });
    }
});


// ======================================================
// 3. рІерІГрѕѕрЇЇ рЅЃрѕЇ рѕўрЅђрІерѕГ (Change Password Route)
// URL: POST /api/auth/change-password
// ======================================================
router.post('/change-password', (req, res) => {
    // ­ЪњА рІГрѕЁ рѕўрѕхрѕўрѕГ рЅ░рїарЅЃрѕџрІЇ рѕўрїЇрЅБрЅ▒ріЋ рѕЏрѕерїІрїѕрїФ (Token Check) рІФрѕхрЇѕрѕЇрїѕрІІрѕЇ

    // рѕјрїѓріЕ: рІерІхрѕ«рІЇріЋ рЅЃрѕЇ рѕЏрѕерїІрїѕрїЦ ріЦріЊ ріарІ▓рѕ▒ріЋ рѕўрЅђрІерѕГрЇб

    res.status(200).json({
        success: true,
        message: "РюЁ рІерІГрѕѕрЇЇ рЅЃрѕЇрІј рЅарЅ░рѕ│ріФ рѕЂріћрЅ│ рЅ░рЅђрІГрѕ»рѕЇ!"
    });
});


module.exports = router;

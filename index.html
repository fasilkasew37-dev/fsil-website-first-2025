ውውው<!-- 1. SPLASH SCREEN (BLUE BG) -->
<div id="splash-screen" style="position: fixed; top:0; left:0; width:100%; height:100%; background: #0056b3; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 9999; transition: 0.5s; color: white;">
    <div class="brand-area" style="transform: scale(1.5); display: flex; align-items: center; gap: 10px;">
        <div class="side-logo-container left-logo"><img src="eagle_image.jpg" class="side-logo-img" style="width: 40px; height: 40px; border-radius: 50%;"></div>
        <div class="complex-logo" style="position: relative; width: 80px; height: 80px;">
            <div class="ring ring-blue" style="border-radius: 50%; border: 4px solid transparent; border-top-color: blue; position: absolute; top:0; left:0; right:0; bottom:0; animation: spin 2s linear infinite;">
                <div class="ring ring-red" style="border-radius: 50%; border: 4px solid transparent; border-right-color: red; position: absolute; top:5px; left:5px; right:5px; bottom:5px;">
                    <div class="ring ring-yellow" style="border-radius: 50%; border: 4px solid transparent; border-bottom-color: yellow; position: absolute; top:5px; left:5px; right:5px; bottom:5px;">
                        <div class="ring ring-green" style="border-radius: 50%; border: 4px solid transparent; border-left-color: green; position: absolute; top:5px; left:5px; right:5px; bottom:5px;"></div>
                    </div>
                </div>
            </div>
            <img src="lion_image.jpg" class="center-lion" style="width: 40px; height: 40px; border-radius: 50%; position: absolute; top: 20px; left: 20px;">
        </div>
        <div class="side-logo-container right-logo"><img src="dove_image.jpg" class="side-logo-img" style="width: 40px; height: 40px; border-radius: 50%;"></div>
    </div>
    <div id="splash-msg" style="margin-top: 20px; font-weight: bold;">እንኳን ደስ አለዎት በተሳካ ሁኔታ ተመዝግበዋል እናመሰግናለን</div>
</div>

<style>
    @keyframes spin { 100% { transform: rotate(360deg); } }
    .section { display: none; }
    .section.show { display: block; }
    .modal-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; z-index: 1000; }
    .modal-box { background: white; padding: 20px; border-radius: 10px; text-align: center; width: 80%; }
    .bright-blue { background: #d1e7ff !important; }
</style>

<!-- Header -->
<div class="top-header" style="background: white; padding: 10px; border-bottom: 1px solid #ddd; display: flex; align-items: center;">
    <div class="mini-logo-wrapper">
        <div class="brand-area" style="display: flex; align-items: center; transform: scale(0.6);">
            <div class="side-logo-container left-logo"><img src="eagle_image.jpg" class="side-logo-img" style="width:40px;"></div>
            <div class="complex-logo" style="position:relative; width:60px; height:60px;"><div class="ring ring-blue" style="border-radius:50%; border:3px solid blue; width:100%; height:100%;"></div><img src="lion_image.jpg" class="center-lion" style="width:30px; position:absolute; top:15px; left:15px;"></div>
            <div class="side-logo-container right-logo"><img src="dove_image.jpg" class="side-logo-img" style="width:40px;"></div>
        </div>
    </div>
    <div class="marquee-container-top" style="flex: 1; overflow: hidden;"><span class="marquee-text-top" id="head-txt" style="color: red; font-weight: bold;">እንኳን ወደ ፋሲል ዌብ አፕ የአገልግሎት ማዕከል በደህና መጡ!</span></div>
    <button class="lang-btn" onclick="toggleLanguage()" id="lang-btn-txt">Language</button>
</div>

<div class="container" style="max-width: 500px; margin: auto; padding: 10px;">
    <!-- MODALS (ያንተ ኦሪጅናል ስሞች) -->
    <div class="modal-overlay" id="admin-login-modal"><div class="modal-box"><h3>Admin Login</h3><input type="password" id="admin-pass-in" placeholder="Code"><button onclick="adminLogin()">Enter</button><button onclick="closeModal('admin-login-modal')">Cancel</button></div></div>
    
    <!-- 1. VIEW: WELCOME (ያንተ ዲዛይን) -->
    <div id="view-agreement" class="section show">
        <div class="brand-area" id="main-brand-logo" style="display: flex; justify-content: center; align-items: center; margin: 20px 0;">
             <img src="eagle_image.jpg" style="width:40px;"> 
             <div style="position:relative; width:80px; height:80px; border:2px solid blue; border-radius:50%; margin: 0 10px;">
                <img src="lion_image.jpg" style="width:40px; position:absolute; top:20px; left:20px;">
             </div>
             <img src="dove_image.jpg" style="width:40px;">
        </div>

        <div class="split-container" id="welcome-text-area">
            <div class="split-left"><h4 id="t-w-s">እንኳን ደህና መጡ</h4><p id="t-in">ይህ የፋሲል ዌብ አፕ በተአማኒነት እንዲሰራ የተቀየሰ ዲጂታል መረጃ መጋሪያ ነው።</p></div>
            <div class="split-right"><h4 id="t-p-s">ጥብቅ መመሪያ</h4><p id="t-po">ፖለቲካ፣ ጥላቻ፣ ዘረኝነት እና ሀሰተኛ መረጃ ማቅረብ በጥብቅ የተከለከለ ነው።</p></div>
        </div>
        
        <div id="agree-btns" style="display: flex; gap: 10px; justify-content: center;"><button class="btn-green" onclick="handleAgree()">እስማማለሁ</button><button class="btn-red" onclick="alert('አልተስማሙም')">አልስማማም</button></div>
        
        <div id="auth-section" style="display:none;">
            <div style="display:flex; gap:10px;"><button class="btn-red" onclick="showAuth('signup')">መመዝገቢያ</button><button class="btn-red" onclick="showAuth('login')">መግቢያ</button></div>
            <div id="form-signup" style="display:none; margin-top:10px; border: 1px solid red; padding: 10px;">
                <input type="text" id="reg-name" placeholder="Full Name"><input type="text" id="reg-phone" placeholder="Phone 09..."><input type="password" id="reg-pass" placeholder="Password"><button onclick="finalSignup()">Register</button>
            </div>
            <div id="form-login" style="display:none; margin-top:10px; border: 1px solid red; padding: 10px;">
                <input type="text" id="log-phone" placeholder="Phone"><input type="password" id="log-pass" placeholder="Password"><button onclick="doLogin()">Login</button>
            </div>
        </div>
    </div>

    <!-- 2. DASHBOARD (ያንተ Grid Layout) -->
    <div id="view-home" class="section">
        <h2 id="t-d">ዳሽቦርድ</h2>
        <button class="btn-green" style="width:100%" onclick="toggleList('free')">የነፃ አገልግሎት ማዕከል</button>
        <div id="list-free" style="display:none; display: grid; grid-template-columns: 1fr 1fr; gap: 5px; padding: 10px;">
            <button onclick="navTo('view-info')">መረጃ መመልከት</button>
            <button onclick="navTo('post-info')">መረጃ መለጠፍ</button>
            <button onclick="handleGroupCreate()">ግሩፕ መፍጠር</button>
            <button onclick="showMyGroups()">የፈጠሩትን ግሩፕ</button>
            <button onclick="handleChatList()">ቻት</button>
            <button onclick="navTo('feedback-sec')">አስተያየት</button>
            <button onclick="navTo('business-sec')">ቢዝነስ</button>
            <button style="background: black; color: white;" onclick="document.getElementById('admin-login-modal').style.display='flex'">ሪፖርት (Admin)</button>
        </div>
        <button class="btn-red" onclick="location.reload()">ውጣ</button>
    </div>

    <!-- 3. POST & VIEW -->
    <div id="post-info" class="section">
        <h3>መረጃ መለጠፍ</h3>
        <input type="text" id="p-title" placeholder="Title">
        <textarea id="p-content" placeholder="Content"></textarea>
        <button onclick="submitPost()">Post Now</button>
        <button onclick="goBack()">Back</button>
    </div>
    
    <div id="view-info" class="section">
        <h3>መረጃ መመልከት</h3>
        <div id="feed-container"></div>
        <button onclick="goBack()">Back</button>
    </div>

    <!-- CHAT & GROUPS -->
    <div id="chat-sec" class="section">
        <h3>Chat</h3>
        <div id="chat-box" style="height:200px; border:1px solid #ddd; overflow-y:auto;"></div>
        <input type="text" id="chat-in"><button onclick="sendChat()">Send</button>
        <button onclick="goBack()">Back</button>
    </div>

    <div id="user-list-sec" class="section">
        <h3>Users</h3>
        <div id="ul-cont"></div>
        <button id="btn-grp-done" style="display:none;" onclick="createGroup()">Done</button>
        <button onclick="goBack()">Back</button>
    </div>

    <div id="feedback-sec" class="section">
        <h3>Feedback</h3>
        <button onclick="giveFb()">Give Feedback</button>
        <div id="fb-list"></div>
        <button onclick="goBack()">Back</button>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<script>
    // --- FIREBASE CONFIG (ያንተ መረጃ) ---
    const firebaseConfig = {
      apiKey: "AIzaSyAWS8PJ0kmu56hixesxV1KrMH8NRciH6U0",
      authDomain: "fasil-web-app-3a732.firebaseapp.com",
      projectId: "fasil-web-app-3a732",
      storageBucket: "fasil-web-app-3a732.firebasestorage.app",
      messagingSenderId: "239133072986",
      appId: "1:239133072986:web:0dcbd768e1e916b9b64263"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    let user = null; let users = []; let posts = []; let selectedUsers = [];

    // SPLASH SCREEN
    window.onload = () => {
        setTimeout(() => {
            document.getElementById('splash-screen').style.opacity = '0';
            setTimeout(() => document.getElementById('splash-screen').style.display = 'none', 500);
        }, 2000);
        loadData();
    };

    function loadData() {
        db.collection("users").onSnapshot(s => { users = []; s.forEach(d => users.push({id:d.id, ...d.data()})); });
        db.collection("posts").orderBy("id", "desc").onSnapshot(s => {
            posts = []; s.forEach(d => posts.push(d.data()));
            if(document.getElementById('view-info').classList.contains('show')) renderPosts();
        });
    }

    // FUNCTIONS
    function showView(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('show'));
        document.getElementById(id).classList.add('show');
    }
    function navTo(id) { showView(id); }
    function goBack() { user ? showView('view-home') : showView('view-agreement'); }
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }

    function handleAgree() {
        document.getElementById('welcome-text-area').style.display = 'none';
        document.getElementById('agree-btns').style.display = 'none';
        document.getElementById('auth-section').style.display = 'block';
    }

    function showAuth(t) {
        document.getElementById('form-signup').style.display = (t === 'signup' ? 'block' : 'none');
        document.getElementById('form-login').style.display = (t === 'login' ? 'block' : 'none');
    }

    function finalSignup() {
        const n = document.getElementById('reg-name').value;
        const p = document.getElementById('reg-phone').value;
        const pw = document.getElementById('reg-pass').value;
        if(!n || !p || !pw) return alert("Fill all");
        db.collection("users").add({ name: n, phone: p, password: pw }).then(() => {
            alert("Registered! Please login."); showAuth('login');
        });
    }

    function doLogin() {
        const p = document.getElementById('log-phone').value;
        const pw = document.getElementById('log-pass').value;
        db.collection("users").where("phone", "==", p).where("password", "==", pw).get().then(s => {
            if (!s.empty) {
                user = s.docs[0].data();
                showView('view-home');
            } else alert("Error");
        });
    }

    function toggleList(id) {
        const el = document.getElementById('list-' + id);
        el.style.display = el.style.display === 'none' ? 'grid' : 'none';
    }

    // CHAT
    function handleChatList() {
        showView('chat-sec');
        db.collection("chats").orderBy("time", "asc").onSnapshot(s => {
            const box = document.getElementById('chat-box');
            box.innerHTML = s.docs.map(d => `<div><b>${d.data().u}:</b> ${d.data().m}</div>`).join('');
            box.scrollTop = box.scrollHeight;
        });
    }
    function sendChat() {
        const m = document.getElementById('chat-in').value;
        if(m) db.collection("chats").add({ u: user.name, m, time: Date.now() });
        document.getElementById('chat-in').value = "";
    }

    // POSTS
    function submitPost() {
        const t = document.getElementById('p-title').value;
        const c = document.getElementById('p-content').value;
        db.collection("posts").add({ id: Date.now(), t, c, u: user.name }).then(() => {
            alert("Posted"); navTo('view-info');
        });
    }
    function renderPosts() {
        document.getElementById('feed-container').innerHTML = posts.map(p => `<div style="border:1px solid #ddd; margin:5px; padding:5px;"><b>${p.t}</b><br>${p.c}</div>`).join('');
    }

    // GROUPS
    function handleGroupCreate() {
        selectedUsers = [];
        const cont = document.getElementById('ul-cont');
        cont.innerHTML = users.map(u => `<div id="u-${u.id}" onclick="selU('${u.id}')" style="padding:10px; border-bottom:1px solid #eee;">${u.name}</div>`).join('');
        document.getElementById('btn-grp-done').style.display = 'block';
        showView('user-list-sec');
    }
    function selU(id) {
        const el = document.getElementById('u-'+id);
        if(selectedUsers.includes(id)) {
            selectedUsers = selectedUsers.filter(i => i !== id);
            el.classList.remove('bright-blue');
        } else {
            selectedUsers.push(id);
            el.classList.add('bright-blue');
        }
    }
    function createGroup() {
        const gn = prompt("Group Name:");
        if(gn) db.collection("groups").add({ name: gn, members: selectedUsers, admin: user.phone }).then(() => { alert("Created"); goBack(); });
    }

    // ADMIN
    function adminLogin() {
        if(document.getElementById('admin-pass-in').value === "admin123") {
            closeModal('admin-login-modal');
            showView('feedback-sec');
            db.collection("feedback").get().then(s => {
                document.getElementById('fb-list').innerHTML = s.docs.map(d => `<p>${d.data().m}</p>`).join('');
            });
        } else alert("Wrong Code");
    }

    function giveFb() {
        const m = prompt("Your Feedback:");
        if(m) db.collection("feedback").add({ m, u: user.name }).then(() => alert("Thanks"));
    }
</script>

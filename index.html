<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>á‹áˆ²áˆ á‹Œá‰¥ áŠ á• - Fasil Web App (V13.3 - Business Module)</title>
    <style>
        /* --- áˆ˜á‹°á‰ áŠ› CSS --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            padding: 20px;
            background-color: #f0f4f8;
            color: #333;
        }
        .section {
            max-width: 700px;
            margin: 40px auto;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            border-top: 6px solid #007bff;
            text-align: left;
            display: none;
        }
        h1 { color: #007bff; font-size: 32px; margin-bottom: 10px; text-align: center; }
        h2 { color: #555; font-size: 24px; margin-top: 25px; margin-bottom: 25px; text-align: center; }
        
        /* --- á‹¨áŒá‰¥á‹“á‰µ áˆµá‰³á‹­áˆá‰½ --- */
        input[type="text"], input[type="number"], input[type="email"], input[type="password"], select, textarea {
            width: 90%;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 16px;
        }
        
        /* --- á‹¨áŠ á‹áˆ«áˆ­ áˆ˜áˆ°áˆ¨á‰µ (Stacked Layout) --- */
        .button-link, button {
            display: block;
            width: 90%;
            padding: 18px;
            margin: 15px auto;
            text-align: center;
            border-radius: 10px;
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            font-size: 18px;
            border: none;
        }

        /* --- á‹¨áŠ á‹áˆ«áˆ­ á‰€áˆˆáˆá‰½ --- */
        .main-btn { background-color: #007bff; color: white; }
        .success-btn { background-color: #28a745; color: white; }
        .delete-btn { background-color: #dc3545; color: white; }
        .premium-btn { background-color: #ffc107; color: #333; }
        .feature-btn { background-color: #8c5aee; color: white; } 
        .business-btn { background-color: #00a08e; color: white; } /* NEW! */


        /* --- áŠ«áˆ­á‹¶á‰½ áŠ¥áŠ“ áˆá‹© á‰¦á‰³á‹á‰½ --- */
        .intro-text-box {
            background-color: #e9ecef;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            border-left: 5px solid #007bff;
        }
        .alert-box {
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
        }
        .error-alert { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }

        /* --- Loading Spinner --- */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            flex-direction: column;
        }
        .spinner {
            border: 8px solid #f3f3f3;
            border-top: 8px solid #007bff;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* --- á‹¨á•áˆ‹áŠ• áŠ«áˆ­á‹µ --- */
        .plan-card {
            padding: 20px;
            border: 2px solid #007bff;
            border-radius: 10px;
            margin-bottom: 15px;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        /* --- Business Balance Display --- */
        .balance-display {
            background-color: #00a08e;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        .balance-display h3 {
            margin: 0 0 5px 0;
            font-size: 20px;
        }
        .balance-display p {
            font-size: 36px;
            font-weight: bold;
            margin: 5px 0 10px 0;
        }
    </style>
</head>
<body>

    <div class="loading-overlay" id="loading-overlay">
        <div class="spinner"></div>
        <p id="loading-message">... áŠ¥á‹¨á‰°áŒ«áŠ áŠá‹ (Loading) ...</p>
    </div>

    <div class="section" id="home-view">
        <h1>á‹áˆ²áˆ á‹Œá‰¥ áŠ á• - Fasil Web App</h1>
        <div class="intro-text-box">
            <h3>ğŸŒ áˆµáˆˆ á‹áˆ²áˆ á‹Œá‰¥ áŠ á•</h3>
            <p><strong>á‹áˆ²áˆ á‹Œá‰¥ áŠ á•</strong> á‰ á‰°áŠ áˆ›áŠ’áŠá‰µ áŠ¥áŠ•á‹²áˆ°áˆ« á‹¨á‰°á‰€á‹¨áˆ° á‹¨á‹²áŒ‚á‰³áˆ áˆ˜áŒ‹áˆªá‹« áˆ˜á‹µáˆ¨áŠ­ áŠá‹á¢</p>
        </div>
        
        <h2 style="text-align: center;">áŠ¥áŠ•á‹´á‰µ áˆ˜áŒ á‰€áˆ á‹­áˆáˆáŒ‹áˆ‰?</h2>
        
        <a href="#signup-form" class="button-link main-btn" onclick="updateView()">á‰ áŠáƒ áˆˆáˆ˜áˆ˜á‹áŒˆá‰¥ / áˆˆáˆ˜áŒá‰£á‰µ</a>
        <a href="#premium-options" class="button-link premium-btn">á‰ áŠ­áá‹« áŠ áˆ›áˆ«áŒ­ áˆˆáˆ˜áˆ˜á‹áŒˆá‰¥</a>
    </div>

    <div class="section" id="signup-form">
        <h2 id="signup-title">áŠ á‹²áˆµ á‰°áŒ á‰ƒáˆš á‹­áˆ˜á‹áŒˆá‰¡ (áŠáƒ)</h2>
        <div class="alert-box error-alert" id="signup-error" style="display: none;"></div>
        
        <input type="text" id="signup-name" placeholder="áˆ™áˆ‰ áˆµáˆ" required>
        <input type="text" id="signup-phone" placeholder="áˆµáˆáŠ­ á‰áŒ¥áˆ­ (áˆˆáˆ˜áŒá‰¢á‹«/Login)" required>
        <input type="email" id="signup-email" placeholder="áŠ¢áˆœáˆ" required>
        <input type="password" id="signup-password" placeholder="á‹¨á‹­áˆˆá á‰ƒáˆ (á‰£áˆˆ 6 áŠ áˆ€á‹)" required maxlength="6">
        
        <button class="main-btn" onclick="handleSignUp()">áˆ˜á‹áŒá‰¥ (Sign Up)</button>
        
        <p style="text-align: center; margin-top: 20px;"><a href="#login-form" onclick="updateView()">á‹¨á‰°áˆ˜á‹˜áŒˆá‰¡ á‰°áŒ á‰ƒáˆš áŠ¨áˆ†áŠ‘ á‹­áŒá‰¡ (Log In)</a></p>
    </div>

    <div class="section" id="login-form">
        <h2>áˆ˜áŒá‰¢á‹« (Log In)</h2>
        <div class="alert-box error-alert" id="login-error" style="display: none;"></div>
        <input type="text" id="login-phone" placeholder="áˆµáˆáŠ­ á‰áŒ¥áˆ­" required>
        <input type="password" id="login-password" placeholder="á‹¨á‹­áˆˆá á‰ƒáˆ" required>
        
        <button class="success-btn" onclick="handleLogin()">áŒá‰£ (Log In)</button>
        
        <p style="text-align: center; margin-top: 20px;"><a href="#signup-form" onclick="updateView()">áŠ á‹²áˆµ á‰°áŒ á‰ƒáˆš? á‹­áˆ˜á‹áŒˆá‰¡ (Sign Up)</a></p>
    </div>

    <div class="section" id="free-dashboard">
        <h1>áŠáƒ á‹¨áŠ áŒˆáˆáŒáˆá‰µ áˆ›á‹•áŠ¨áˆ (Dashboard)</h1>
        
        <h2 style="margin-top: 30px;">áŠáƒ áŠ áŒˆáˆáŒáˆá‰¶á‰½:</h2>
        
        <a href="#view-select" class="button-link main-btn" onclick="updateView()">
            ğŸ“„ áˆ˜áˆ¨áŒƒ áˆ˜áˆ˜áˆáŠ¨á‰µ (View)
        </a>
        <a href="#post-select" class="button-link main-btn" onclick="updateView()">
            âœï¸ áˆ˜áˆ¨áŒƒ áˆ˜áˆˆáŒ á / áˆ›áŒ‹áˆ«á‰µ (Post/Share)
        </a>
        <a href="#delete-select" class="button-link delete-btn" onclick="updateView()">
            ğŸ—‘ï¸ á‹¨áˆˆáŒ á‰á‰µáŠ• áˆ˜áˆ¨áŒƒ áˆ˜á‹°áˆˆá‰µ (Delete)
        </a>
        
        <a href="#business-dashboard" class="button-link business-btn" onclick="updateView()">
            ğŸ’° á‰¢á‹áŠáˆµ (Business)
        </a>

        <a href="#premium-options" class="button-link feature-btn" style="margin-top: 20px;">
            â­ï¸ á‹¨áŠ­áá‹« áŠ áŒˆáˆáŒáˆá‰¶á‰½ (Premium Features)
        </a>

        <a href="#home-view" class="button-link delete-btn" style="background-color: #6c757d; margin-top: 20px;">á‹ˆá‹° áˆ˜áŠáˆ» á‰°áˆ˜áˆˆáˆµ</a>
    </div>

    <div class="section" id="premium-dashboard">
        <h1>â­ï¸ á‹¨áŠ­áá‹« á‹¨áŠ áŒˆáˆáŒáˆá‰µ áˆ›á‹•áŠ¨áˆ (Premium Dashboard)</h1>
        
        <h2 style="margin-top: 30px;">á•áˆªáˆšá‹¨áˆ á‰°áŒá‰£áˆ«á‰µ:</h2>
        
        <button class="main-btn">
            ğŸ“Š á“á‹ˆáˆ­ á–á‹­áŠ•á‰µ áˆ›á‹˜áŒ‹áŒ€á‰µ
        </button>
        <button class="main-btn">
            ğŸ“„ á’á‹²áŠ¤á áˆ˜áˆˆáŒ á / áˆ›á‹˜áŒ‹áŒ€á‰µ
        </button>
        <button class="main-btn">
            ğŸ¥ áŒ¥áˆ«á‰± á‹¨áŒ á‰ á‰€ á‰ªá‹²á‹® áˆ˜áˆ˜áˆáŠ¨á‰µ
        </button>
        <button class="main-btn">
            ğŸ“° á‹œáŠ“ áˆ˜áŠ¨á‰³á‰°áˆ / áˆ˜áˆˆáŒ á
        </button>
        
        <h2 style="margin-top: 30px;">áˆ˜áˆ°áˆ¨á‰³á‹Š á‰°áŒá‰£áˆ«á‰µ:</h2>

        <a href="#view-select" class="button-link success-btn" onclick="updateView()">
            ğŸ“„ áˆ˜áˆ¨áŒƒ áˆ˜áˆ˜áˆáŠ¨á‰µ (View)
        </a>
        <a href="#post-select" class="button-link success-btn" onclick="updateView()">
            âœï¸ áˆ˜áˆ¨áŒƒ áˆ˜áˆˆáŒ á / áˆ›áŒ‹áˆ«á‰µ (Post/Share)
        </a>
        <a href="#delete-select" class="button-link delete-btn" onclick="updateView()">
            ğŸ—‘ï¸ á‹¨áˆˆáŒ á‰á‰µáŠ• áˆ˜áˆ¨áŒƒ áˆ˜á‹°áˆˆá‰µ (Delete)
        </a>

        <a href="#business-dashboard" class="button-link business-btn" onclick="updateView()" style="margin-top: 30px;">
            ğŸ’° á‰¢á‹áŠáˆµ (Business)
        </a>
        
        <a href="#home-view" class="button-link delete-btn" style="background-color: #6c757d; margin-top: 20px;">á‹ˆá‹° áˆ˜áŠáˆ» á‰°áˆ˜áˆˆáˆµ</a>
    </div>
    
    <div class="section" id="premium-options">
        <h2>â­ï¸ á‰ áŠ­áá‹« áŠ áˆ›áˆ«áŒ­ á‹¨áˆšáŒˆáŠ™ áŠ áŒˆáˆáŒáˆá‰¶á‰½</h2>
        <p style="text-align: center;">áˆˆáˆ˜áŒ á‰€áˆ áŠ¨áˆšáˆáˆáŒ‰á‰µ áŠ áŒˆáˆáŒáˆá‰µ áŠ áŠ•á‹±áŠ• á‹­áˆáˆ¨áŒ¡á¢</p>
        
        <button class="feature-btn" onclick="goToPricing('quality_video')">
            ğŸ¥ áŒ¥áˆ«á‰± á‹¨áŒ á‰ á‰€ á‰ªá‹²á‹® áˆ˜áˆ˜áˆáŠ¨á‰µ
        </button>
        <button class="feature-btn" onclick="goToPricing('news')">
            ğŸ“° á‹œáŠ“ áˆ˜áŠ¨á‰³á‰°áˆ / áˆ˜áˆˆáŒ á
        </button>
        <button class="feature-btn" onclick="goToPricing('ppt_creation')">
            ğŸ“Š á“á‹ˆáˆ­ á–á‹­áŠ•á‰µ áˆ›á‹˜áŒ‹áŒ€á‰µ
        </button>
        <button class="feature-btn" onclick="goToPricing('pdf_management')">
            ğŸ“„ á’á‹²áŠ¤á áˆ˜áˆˆáŒ á / áˆ›á‹˜áŒ‹áŒ€á‰µ
        </button>
        
        <a href="#business-dashboard" class="button-link business-btn" onclick="updateView()" style="margin-top: 30px;">
            ğŸ’° á‰¢á‹áŠáˆµ (Business)
        </a>

        <a href="#home-view" class="button-link delete-btn" style="margin-top: 30px;">á‹ˆá‹° áˆ˜áŠáˆ» á‰°áˆ˜áˆˆáˆµ</a>
    </div>

    <div class="section" id="pricing">
        <h2>á‹¨áŠ­áá‹« áŠ áˆ›áˆ«áŒ®á‰½ (Premium Plans)</h2>
        <p style="text-align: center;" id="pricing-context">á‹­áˆ…áŠ•áŠ• áŠ áŒˆáˆáŒáˆá‰µ áˆˆáˆ˜áŒ á‰€áˆ á‹¨áˆšáˆáˆáŒ‰á‰µáŠ• á‹¨áŠ­áá‹« á•áˆ‹áŠ• á‹­áˆáˆ¨áŒ¡á¢</p>
        
        <div class="plan-card" onclick="selectPlan('daily', 5)"><h3>á‹•áˆˆá‰³á‹Š (Daily)</h3><p>5 á‰¥áˆ­ (ETB)</p><button class="success-btn" style="width: 80%; padding: 10px;">á‹­áˆ…áŠ• áˆáˆ¨áŒ¥</button></div>
        <div class="plan-card" onclick="selectPlan('monthly', 30)"><h3>á‹ˆáˆ­áˆƒá‹Š (Monthly)</h3><p>30 á‰¥áˆ­ (ETB)</p><button class="success-btn" style="width: 80%; padding: 10px;">á‹­áˆ…áŠ• áˆáˆ¨áŒ¥</button></div>
        <div class="plan-card" onclick="selectPlan('yearly', 100)"><h3>á‹“áˆ˜á‰³á‹Š (Yearly)</h3><p>100 á‰¥áˆ­ (ETB)</p><button class="success-btn" style="width: 80%; padding: 10px;">á‹­áˆ…áŠ• áˆáˆ¨áŒ¥</button></div>
        
        <a href="#premium-options" class="button-link delete-btn">á‹ˆá‹° áŠ áŒˆáˆáŒáˆá‰µ á‹áˆ­á‹áˆ­ á‰°áˆ˜áˆˆáˆµ</a>
    </div>
    
    <div class="section" id="payment-methods">
        <h2>áŠ­áá‹« á‹­áˆá…áˆ™ (Payment)</h2>
        <p id="selected-plan-info" style="font-weight: bold; color: #007bff; text-align: center;"></p>
        
        <p style="text-align: center; margin-top: 20px;">**áˆˆáˆ˜áŠ­áˆáˆ á‹­áŒ«áŠ‘**</p>

        <button class="main-btn" onclick="processPayment('Telebirr')">á‰ á‰´áˆŒá‰¥áˆ­ (Telebirr) á‹­áŠ­áˆáˆ‰</button>
        <button class="main-btn" onclick="processPayment('CBE')">á‰ CBE á‹¨á‰£áŠ•áŠ­ á‹á‹á‹áˆ­ á‹­áŠ­áˆáˆ‰</button>
        <button class="main-btn" onclick="processPayment('PayPal')">á‰ á”á‹­á“áˆ (PayPal) á‹­áŠ­áˆáˆ‰</button>

        <a href="#pricing" class="button-link delete-btn">á‹ˆá‹° á•áˆ‹áŠ–á‰½ á‰°áˆ˜áˆˆáˆµ</a>
    </div>

    <div class="section" id="business-dashboard">
        <h2>ğŸ’° á‹¨á‰¢á‹áŠáˆµ áˆ›á‹•áŠ¨áˆ</h2>
        
        <div class="balance-display">
            <h3>á‹¨áŠ¥áˆ­áˆµá‹ á‹¨áˆšá‹›áŠ• áˆ˜áŒ áŠ•:</h3>
            <p id="business-balance-display">0.00 USD</p>
        </div>
        
        <p style="font-size: 14px; color: #777; margin-bottom: 25px;">
            á‹­áˆ… áŒˆáŠ•á‹˜á‰¥ áŠ¨á‹‹áŒ‹ áŠ•áˆ¨á‰µ (Inflation) áŠ¥áŠ“ áŠ¨á‰¥áˆ­ (ETB) áˆ˜á‹³áŠ¨áˆ áˆˆáˆ˜áŠ¨áˆ‹áŠ¨áˆ áˆ²á‰£áˆ **á‹ˆá‹° á‹¶áˆ‹áˆ­ ($)** á‰°á‰€á‹­áˆ® á‹­á‰€áˆ˜áŒ£áˆá¢
        </p>

        <a href="#deposit" class="button-link success-btn" onclick="checkAuthAndRedirect('deposit')">
            ğŸ’µ áŒˆáŠ•á‹˜á‰¥ áˆˆáˆ›áˆµá‰€áˆ˜áŒ¥
        </a>
        <a href="#withdraw" class="button-link main-btn" onclick="checkAuthAndRedirect('withdraw')">
            ğŸ’¸ áŒˆáŠ•á‹˜á‰¥ áˆˆáˆ›á‹áŒ£á‰µ
        </a>
        <a href="#international-purchase" class="button-link premium-btn" onclick="checkAuthAndRedirect('international')">
            ğŸŒ á‹“áˆˆáˆ áŠ á‰€á áŒá‹¢á‹á‰½áŠ• áˆˆáˆ˜áˆáŒ¸áˆ
        </a>

        <button class="delete-btn" onclick="goBackToDashboard()" style="background-color: #6c757d;">á‹ˆá‹° áŠ‹áˆ‹ á‰°áˆ˜áˆˆáˆµ</button>
    </div>

    <div class="section" id="deposit">
        <h2>ğŸ’µ áŒˆáŠ•á‹˜á‰¥ áˆˆáˆ›áˆµá‰€áˆ˜áŒ¥</h2>
        <div class="alert-box error-alert" id="deposit-error" style="display: none;"></div>
        
        <input type="number" id="deposit-etb" placeholder="á‹¨ETB áˆ˜áŒ áŠ• á‹«áˆµáŒˆá‰¡" required min="100">
        
        <select id="deposit-currency" style="width: 90%; margin-bottom: 20px;">
            <option value="" disabled selected>á‹¨áˆšá‰€á‹¨áˆ­áˆˆá‰µáŠ• áˆáŠ•á‹›áˆ¬ á‹­áˆáˆ¨áŒ¡</option>
            <option value="USD">á‹¶áˆ‹áˆ­ (USD)</option>
            <option value="EUR">á‹©áˆ® (EUR)</option>
            <option value="GBP">á‹¨áŠ¥áŠ•áŒáˆŠá‹ á“á‹áŠ•á‹µ (GBP)</option>
        </select>
        
        <button class="success-btn" onclick="handleDeposit()">áŒˆáŠ•á‹˜á‰¥ áŠ áˆµá‰€áˆáŒ¥</button>
        <a href="#business-dashboard" class="button-link delete-btn">á‹ˆá‹° á‰¢á‹áŠáˆµ áˆ›á‹•áŠ¨áˆ á‰°áˆ˜áˆˆáˆµ</a>
    </div>

    <div class="section" id="withdraw">
        <h2>ğŸ’¸ áŒˆáŠ•á‹˜á‰¥ áˆ›á‹áŒ£á‰µ</h2>
        <div class="alert-box error-alert" id="withdraw-error" style="display: none;"></div>
        
        <input type="number" id="withdraw-amount" placeholder="áˆˆáˆ›á‹áŒ£á‰µ á‹¨áˆšáˆáˆáŒ‰á‰µáŠ• á‹¨á‹¶áˆ‹áˆ­ áˆ˜áŒ áŠ• á‹«áˆµáŒˆá‰¡ ($)" required min="1">
        
        <select id="withdraw-currency" style="width: 90%; margin-bottom: 20px;">
            <option value="" disabled selected>áˆˆáˆ˜á‰€á‹¨áˆ­ áŠ¥áŠ“ áˆˆáˆ›á‹áŒ£á‰µ á‹¨áˆšáˆáˆáŒ‰á‰µ áˆáŠ•á‹›áˆ¬</option>
            <option value="USD">á‹¶áˆ‹áˆ­ (USD)</option>
            <option value="EUR">á‹©áˆ® (EUR)</option>
            <option value="GBP">á“á‹áŠ•á‹µ (GBP)</option>
            <option value="ETB">áŠ¢á‰µá‹®áŒµá‹« á‰¥áˆ­ (ETB)</option>
        </select>
        
        <select id="withdraw-method" style="width: 90%; margin-bottom: 20px;">
            <option value="" disabled selected>áŒˆáŠ•á‹˜á‰¡áŠ• á‹¨áˆšá‹«á‹ˆáŒ¡á‰ á‰µ á‹˜á‹´</option>
            <option value="Telebirr">á‰´áˆŒá‰¥áˆ­ (Telebirr)</option>
            <option value="CBE">áˆ².á‰¢.áŠ¢ (CBE) á‰£áŠ•áŠ­</option>
            <option value="PayPal">á”á‹­á“áˆ (PayPal)</option>
        </select>
        
        <button class="main-btn" onclick="handleWithdraw()">áŒˆáŠ•á‹˜á‰¥ áŠ á‹áŒ£</button>
        <a href="#business-dashboard" class="button-link delete-btn">á‹ˆá‹° á‰¢á‹áŠáˆµ áˆ›á‹•áŠ¨áˆ á‰°áˆ˜áˆˆáˆµ</a>
    </div>

    <div class="section" id="international-purchase">
        <h2>ğŸŒ á‹“áˆˆáˆ áŠ á‰€á áŒá‹¢á‹á‰½áŠ• áˆˆáˆ˜áˆáŒ¸áˆ</h2>
        <p style="text-align: center; margin-bottom: 25px;">áˆˆá‰°áˆˆá‹«á‹© á‹“áˆˆáˆ áŠ á‰€á á‹²áŒ‚á‰³áˆ áŠ áŒˆáˆáŒáˆá‰¶á‰½ á‰ á‹¶áˆ‹áˆ­ á‹­áŠ­áˆáˆ‰á¢</p>
        
        <button class="premium-btn" onclick="handlePurchase('ChatGPT')">
            ğŸ¤– ChatGPT (á‹ˆáˆ­áˆƒá‹Š á‹¨á‹°áŠ•á‰ áŠáŠá‰µ áˆá‹áŒˆá‰£)
        </button>
        <button class="premium-btn" onclick="handlePurchase('GeminiAdvanced')">
            âœ¨ Gemini Advanced (á‹ˆáˆ­áˆƒá‹Š á‹¨á‹°áŠ•á‰ áŠáŠá‰µ áˆá‹áŒˆá‰£)
        </button>
        <button class="premium-btn" onclick="handlePurchase('Amazon')">
            ğŸ“¦ Amazon áŒá‹¢ (Prime/Product)
        </button>
        <button class="premium-btn" onclick="handlePurchase('Domain')">
            ğŸ”— á‹¶áˆœáŠ• / áˆ†áˆµá‰²áŠ•áŒ áŒá‹¢
        </button>
        <button class="premium-btn" onclick="handlePurchase('GoogleCloud')">
            â˜ï¸ Google Cloud/AWS áŠ­áá‹«
        </button>

        <a href="#business-dashboard" class="button-link delete-btn" style="margin-top: 30px;">á‹ˆá‹° á‰¢á‹áŠáˆµ áˆ›á‹•áŠ¨áˆ á‰°áˆ˜áˆˆáˆµ</a>
    </div>
    
    <div class="section" id="view-select">
        <h2>ğŸ“„ áˆ˜áˆ¨áŒƒ áˆ˜áˆ˜áˆáŠ¨á‰µ</h2>
        <p>á‹¨á‰µáŠ›á‹áŠ• áŠ á‹­áŠá‰µ áˆ˜áˆ¨áŒƒ áˆ˜áˆ˜áˆáŠ¨á‰µ á‹­áˆáˆáŒ‹áˆ‰?</p>
        
        <a href="#view-text" class="button-link main-btn" onclick="updateView()">á…áˆá / á‰´áŠ­áˆµá‰µ</a>
        <a href="#view-image" class="button-link main-btn" onclick="updateView()">áˆáˆµáˆ / áá‰¶</a>
        <a href="#view-audio" class="button-link main-btn" onclick="updateView()">á‰ªá‹²á‹® / áŠ¦á‹²á‹®</a>
        
        <button class="delete-btn" onclick="goBackToDashboard()">á‹ˆá‹° áŠ‹áˆ‹ á‰°áˆ˜áˆˆáˆµ</button>
    </div>
    
    <div class="section" id="post-select">
        <h2>âœï¸ áˆ˜áˆ¨áŒƒ áˆ˜áˆˆáŒ á / áˆ›áŒ‹áˆ«á‰µ</h2>
        <p>á‹¨á‰µáŠ›á‹áŠ• áŠ á‹­áŠá‰µ á‹­á‹˜á‰µ áˆ˜áˆˆáŒ á á‹­áˆáˆáŒ‹áˆ‰?</p>
        
        <a href="#post-text" class="button-link main-btn" onclick="updateView()">á…áˆá / á‰´áŠ­áˆµá‰µ áˆˆáˆ˜áˆˆáŒ á</a>
        <a href="#post-image" class="button-link main-btn" onclick="updateView()">áˆáˆµáˆ / áá‰¶ áˆˆáˆ˜áˆˆáŒ á</a>
        <a href="#post-audio" class="button-link main-btn" onclick="updateView()">á‰ªá‹²á‹® / áŠ¦á‹²á‹® áˆˆáˆ˜áˆˆáŒ á</a>
        
        <button class="delete-btn" onclick="goBackToDashboard()">á‹ˆá‹° áŠ‹áˆ‹ á‰°áˆ˜áˆˆáˆµ</button>
    </div>

    <div class="section" id="delete-select">
        <h2>ğŸ—‘ï¸ á‹¨áˆˆáŒ á‰á‰µáŠ• áˆ˜áˆ¨áŒƒ áˆ˜á‹°áˆˆá‰µ</h2>
        <p>á‹¨á‰µáŠ›á‹áŠ• áŠ á‹­áŠá‰µ áˆ˜áˆ¨áŒƒ áˆ˜á‹°áˆˆá‰µ á‹­áˆáˆáŒ‹áˆ‰?</p>
        
        <select id="delete-file-type" style="width: 90%; margin-bottom: 20px;">
            <option value="text">á…áˆá / á‰´áŠ­áˆµá‰µ</option>
            <option value="image">áˆáˆµáˆ / áá‰¶</option>
            <option value="audio">á‰ªá‹²á‹® / áŠ¦á‹²á‹®</option>
        </select>
        
        <button class="delete-btn" onclick="showDeleteList()">á‹á‹­áˆá‰½ á‹áˆ­á‹áˆ­ áŠ áˆ³á‹­ (áˆˆáˆ˜á‹°áˆˆá‰µ)</button>
        <button class="main-btn" style="background-color: #6c757d;" onclick="goBackToDashboard()">á‹ˆá‹° áŠ‹áˆ‹ á‰°áˆ˜áˆˆáˆµ</button>
    </div>
    
    <div class="section" id="post-text">
        <h2>âœï¸ áŠ á‹²áˆµ áŒ½áˆ‘á áˆˆáˆ˜áˆˆáŒ á</h2>
        <input type="text" id="post-text-title" placeholder="áˆ­á‹•áˆµ (Title)" required>
        <textarea id="post-text-content" rows="10" placeholder="á…áˆ‘á‰áŠ• áŠ¥á‹šáˆ… á‹«áˆµáŒˆá‰¡..." required></textarea>
        <button class="main-btn" onclick="handlePost('text')">á‹­áˆˆáŒ¥á‰ (Post Text)</button>
        <a href="#post-select" class="button-link delete-btn">á‹ˆá‹° áˆ˜áˆˆáŒ áŠá‹« áˆá‹µá‰¥ á‰°áˆ˜áˆˆáˆµ</a>
    </div>
    
    <div class="section" id="post-image">
        <h2>ğŸ–¼ï¸ áŠ á‹²áˆµ áˆáˆµáˆ áˆˆáˆ˜áˆˆáŒ á</h2>
        <input type="text" id="post-image-title" placeholder="áˆ­á‹•áˆµ (Title)" required>
        <label for="post-image-file" style="display: block; margin: 15px 0 5px; font-weight: bold; width: 90%; margin-left: 5%;">á‹¨áˆšáˆˆáŒ¥á‰á‰µáŠ• áˆáˆµáˆ á‹­áˆáˆ¨áŒ¡</label>
        <input type="file" id="post-image-file" accept="image/*" style="width: 90%; margin-bottom: 20px;">
        <button class="main-btn" onclick="handlePost('image')">á‹­áˆˆáŒ¥á‰ (Post Image)</button>
        <a href="#post-select" class="button-link delete-btn">á‹ˆá‹° áˆ˜áˆˆáŒ áŠá‹« áˆá‹µá‰¥ á‰°áˆ˜áˆˆáˆµ</a>
    </div>

    <div class="section" id="post-audio">
        <h2>ğŸ§ áŠ á‹²áˆµ á‰ªá‹²á‹® / áŠ¦á‹²á‹® áˆˆáˆ˜áˆˆáŒ á</h2>
        <input type="text" id="post-audio-title" placeholder="áˆ­á‹•áˆµ (Title)" required>
        <label for="post-audio-file" style="display: block; margin: 15px 0 5px; font-weight: bold; width: 90%; margin-left: 5%;">á‹¨áˆšáˆˆáŒ¥á‰á‰µáŠ• áŠ¦á‹²á‹®/á‰ªá‹²á‹® á‹­áˆáˆ¨áŒ¡</label>
        <input type="file" id="post-audio-file" accept="audio/*,video/*" style="width: 90%; margin-bottom: 20px;">
        <button class="main-btn" onclick="handlePost('audio')">á‹­áˆˆáŒ¥á‰ (Post Audio/Video)</button>
        <a href="#post-select" class="button-link delete-btn">á‹ˆá‹° áˆ˜áˆˆáŒ áŠá‹« áˆá‹µá‰¥ á‰°áˆ˜áˆˆáˆµ</a>
    </div>

    <div class="section" id="view-text">
        <h2>ğŸ“„ á‹¨á‰°áˆˆáŒ áˆ áŒ½áˆ‘á/áˆ˜áˆ¨áŒƒ áˆ˜áˆ˜áˆáŠ¨á‰µ</h2>
        <div id="text-posts-container">
            <p style="text-align: center; color: #777;">áˆáŠ•áˆ á…áˆáá‰½ á‹¨áˆ‰áˆá¢</p>
        </div>
        <a href="#view-select" class="button-link delete-btn">á‹ˆá‹° áˆ˜áˆ˜áˆáŠ¨á‰» áˆá‹µá‰¥ á‰°áˆ˜áˆˆáˆµ</a>
    </div>
    
    <div class="section" id="view-image">
        <h2>ğŸ–¼ï¸ á‹¨á‰°áˆˆáŒ áˆ áˆáˆµáˆ/áá‰¶ áˆ˜áˆ˜áˆáŠ¨á‰µ</h2>
        <div id="image-posts-container">
            <p style="text-align: center; color: #777;">áˆáŠ•áˆ áˆáˆµáˆá‰½ á‹¨áˆ‰áˆá¢</p>
        </div>
        <a href="#view-select" class="button-link delete-btn">á‹ˆá‹° áˆ˜áˆ˜áˆáŠ¨á‰» áˆá‹µá‰¥ á‰°áˆ˜áˆˆáˆµ</a>
    </div>

    <div class="section" id="view-audio">
        <h2>ğŸ§ á‹¨á‰°áˆˆáŒ áˆ á‰ªá‹²á‹®/áŠ¦á‹²á‹® áˆ˜áˆ˜áˆáŠ¨á‰µ</h2>
        <div id="audio-posts-container">
            <p style="text-align: center; color: #777;">áˆáŠ•áˆ á‰ªá‹²á‹®/áŠ¦á‹²á‹® á‹á‹­áˆá‰½ á‹¨áˆ‰áˆá¢</p>
        </div>
        <a href="#view-select" class="button-link delete-btn">á‹ˆá‹° áˆ˜áˆ˜áˆáŠ¨á‰» áˆá‹µá‰¥ á‰°áˆ˜áˆˆáˆµ</a>
    </div>

    <div class="section" id="delete-file-view">
        <h2>ğŸ—‘ï¸ á‹¨á‹á‹­áˆá‰½ á‹áˆ­á‹áˆ­ (áˆˆáˆ˜á‹°áˆˆáŒ¥)</h2>
        <div id="deletable-posts-container">
            <p style="text-align: center; color: #777;">áŠ¥áˆ­áˆµá‹ á‹¨áˆˆáŒ á‰á‰µ á‹á‹­áˆ á‹¨áˆˆáˆá¢</p>
        </div>
        <a href="#delete-select" class="button-link delete-btn">á‹ˆá‹° áˆ˜á‹°áˆˆá‰» áˆá‹µá‰¥ á‰°áˆ˜áˆˆáˆµ</a>
    </div>


    <script>
        let currentSubscription = 'free'; 
        let selectedPlan = null;
        let selectedPrice = 0; 
        let selectedFeature = null; 
        let posts = JSON.parse(localStorage.getItem('fasil_app_posts') || '[]');
        
        // --- NEW: Dummy Exchange Rates (for demonstration only) ---
        const EXCHANGE_RATES = {
            ETB_TO_USD: 0.017, // 1 ETB is roughly 0.017 USD (Hypothetical rate)
            USD_TO_ETB: 58.82, // 1 USD is roughly 58.82 ETB
            USD_TO_EUR: 0.92,
            USD_TO_GBP: 0.79,
            EUR_TO_USD: 1.08,
            GBP_TO_USD: 1.27
        };
        
        // --- NEW: Business Wallet ---
        function getBusinessBalance() {
            // Balance is stored in USD as requested
            return parseFloat(localStorage.getItem('fasil_business_balance') || 0);
        }

        function updateBusinessBalance(amount) {
            let current = getBusinessBalance();
            let newBalance = current + amount; // amount can be positive (deposit) or negative (withdrawal/purchase)
            if (newBalance < 0) return false; // Prevents negative balance
            localStorage.setItem('fasil_business_balance', newBalance.toFixed(2));
            return true;
        }

        function refreshBusinessBalanceDisplay() {
            const balance = getBusinessBalance();
            document.getElementById('business-dashboard').style.display === 'block' && 
            (document.getElementById('business-balance-display').textContent = `${balance.toFixed(2)} USD`);
        }

        // ==================================================
        // --- Utility Functions ---
        // ==================================================

        function showLoading(message) {
            document.getElementById('loading-message').textContent = message;
            document.getElementById('loading-overlay').style.display = 'flex';
        }

        function hideLoading() {
            document.getElementById('loading-overlay').style.display = 'none';
        }
        
        function goBackToDashboard() {
            if (currentSubscription === 'premium') {
                window.location.hash = '#premium-dashboard';
            } else {
                window.location.hash = '#free-dashboard';
            }
            updateView();
        }

        function checkAuthAndRedirect(target) {
            if (!getCurrentUserPhone()) {
                alert('áŠ¥á‰£áŠ­á‹ áˆ˜áŒ€áˆ˜áˆªá‹« á‹­áŒá‰¡ á‹ˆá‹­áˆ á‹­áˆ˜á‹áŒˆá‰¡á¢');
                window.location.hash = '#login-form';
            } else if (target === 'deposit') {
                window.location.hash = '#deposit';
            } else if (target === 'withdraw') {
                window.location.hash = '#withdraw';
            } else if (target === 'international') {
                window.location.hash = '#international-purchase';
            }
            updateView();
        }
        // ... (handleSignUp, handleLogin, getCurrentUserPhone, getCurrentUserTier - no change) ...
        
        function setRegisteredUser(phone, password, tier, name) {
            let users = JSON.parse(localStorage.getItem('fasil_app_users') || '[]');
            
            const existingIndex = users.findIndex(u => u.phone === phone);

            if (existingIndex > -1) {
                const existingUser = users[existingIndex];
                const updatedUser = {
                    phone,
                    password: password !== null ? password : existingUser.password,
                    tier: tier || existingUser.tier,
                    name: name || existingUser.name || 'Guest User',
                };
                users[existingIndex] = updatedUser;
            } else {
                users.push({ phone, password, tier: tier || 'free', name: name || 'Guest User' });
            }
            
            localStorage.setItem('fasil_app_users', JSON.stringify(users));
            localStorage.setItem('fasil_current_user_phone', phone);
            currentSubscription = tier;
        }
        
        function checkExistingUser(phone) {
            const users = JSON.parse(localStorage.getItem('fasil_app_users') || '[]');
            return users.some(u => u.phone === phone);
        }
        
        function handleSignUp() {
            showLoading('áˆ˜áˆ˜á‹áŒˆá‰¥...');
            
            const name = document.getElementById('signup-name').value.trim();
            const phone = document.getElementById('signup-phone').value.trim();
            const email = document.getElementById('signup-email').value.trim();
            const password = document.getElementById('signup-password').value.trim();

            const errorBox = document.getElementById('signup-error');
            errorBox.style.display = 'none';

            if (!phone || !email || !password || !name || password.length !== 6) {
                hideLoading();
                errorBox.textContent = 'áˆáˆ‰áŠ•áˆ áˆ˜áˆµáŠ®á‰½ á‰ á‰µáŠ­áŠ­áˆ á‹­áˆ™áˆ‰ (á“áˆµá‹ˆáˆ­á‹µ 6 áŠ áˆ€á‹ áˆ˜áˆ†áŠ• áŠ áˆˆá‰ á‰µ)á¢';
                errorBox.style.display = 'block';
                return;
            }
            
            if (checkExistingUser(phone)) {
                hideLoading();
                errorBox.textContent = 'âš ï¸ á‰ á‹šáˆ… áˆµáˆáŠ­ á‰áŒ¥áˆ­ á‰°áˆ˜á‹áŒá‰ á‹‹áˆá¢ á‹µáŒ‹áˆœ áˆ˜áˆ˜á‹áŒˆá‰¥ áŠ á‹­á‰»áˆáˆ! áŠ¥á‰£áŠ­á‹ á‹­áŒá‰¡á¢';
                errorBox.style.display = 'block';
                return;
            }

            setTimeout(() => {
                setRegisteredUser(phone, password, 'free', name);
                hideLoading();
                alert(`áŠ¥áŠ•áŠ³áŠ• á‹°áˆµ áŠ áˆá‹! ${name} á‰°áˆ˜á‹áŒá‰ á‹‹áˆ! áŠ áˆáŠ• á‹ˆá‹° áŠáƒ á‹³áˆ½á‰¦áˆ­á‹µ á‹­á‹ˆáˆµá‹°á‹á‰³áˆá¢`);
                window.location.hash = '#free-dashboard';
                updateView();
            }, 1500);
        }

        function handleLogin() {
            showLoading('áˆ˜áŒá‰£á‰µ...');
            const phone = document.getElementById('login-phone').value.trim();
            const password = document.getElementById('login-password').value.trim();
            const errorBox = document.getElementById('login-error');
            errorBox.style.display = 'none';

            if (!phone || !password) {
                hideLoading();
                errorBox.textContent = 'á‹¨áˆµáˆáŠ­ á‰áŒ¥áˆ­ áŠ¥áŠ“ á‹¨á‹­áˆˆá á‰ƒáˆ á‹«áˆµáŒˆá‰¡á¢';
                errorBox.style.display = 'block';
                return;
            }

            const users = JSON.parse(localStorage.getItem('fasil_app_users') || '[]');
            const user = users.find(u => u.phone === phone && u.password === password);

            setTimeout(() => {
                hideLoading();
                if (user) {
                    setRegisteredUser(phone, password, user.tier, user.name);
                    
                    if (user.tier === 'premium') {
                        window.location.hash = '#premium-dashboard';
                    } else {
                        window.location.hash = '#free-dashboard';
                    }
                    updateView();
                } else {
                    errorBox.textContent = 'á‰µáŠ­áŠ­áˆˆáŠ› á‹«áˆáˆ†áŠ áˆµáˆáŠ­ á‰áŒ¥áˆ­ á‹ˆá‹­áˆ á‹¨á‹­áˆˆá á‰ƒáˆá¢';
                    errorBox.style.display = 'block';
                }
            }, 1500);
        }

        function getCurrentUserPhone() {
            return localStorage.getItem('fasil_current_user_phone');
        }

        function getCurrentUserTier() {
            const phone = getCurrentUserPhone();
            if (!phone) return 'free';

            const users = JSON.parse(localStorage.getItem('fasil_app_users') || '[]');
            const user = users.find(u => u.phone === phone);
            return user ? user.tier : 'free';
        }
        
        // ==================================================
        // --- Premium / Payment --- (No Logic Change)
        // ==================================================

        function goToPricing(feature) {
            selectedFeature = feature;
            let featureText = '';
            
            if (feature === 'quality_video') featureText = 'áŒ¥áˆ«á‰± á‹¨áŒ á‰ á‰€ á‰ªá‹²á‹® áˆ˜áˆ˜áˆáŠ¨á‰µ';
            else if (feature === 'news') featureText = 'á‹œáŠ“ áˆ˜áŠ¨á‰³á‰°áˆ / áˆ˜áˆˆáŒ á';
            else if (feature === 'ppt_creation') featureText = 'á“á‹ˆáˆ­ á–á‹­áŠ•á‰µ áˆ›á‹˜áŒ‹áŒ€á‰µ';
            else if (feature === 'pdf_management') featureText = 'á’á‹²áŠ¤á áˆ˜áˆˆáŒ á / áˆ›á‹˜áŒ‹áŒ€á‰µ';
            
            document.getElementById('pricing-context').textContent = `á‹­áˆ…áŠ• áŠ áŒˆáˆáŒáˆá‰µ (${featureText}) áˆˆáˆ˜áŒ á‰€áˆ á‹¨áˆšáˆáˆáŒ‰á‰µáŠ• á‹¨áŠ­áá‹« á•áˆ‹áŠ• á‹­áˆáˆ¨áŒ¡á¢`;
            
            window.location.hash = '#pricing';
            updateView();
        }

        function selectPlan(plan, price) {
            if (!getCurrentUserPhone()) {
                alert('á‹­áˆ…áŠ• á•áˆªáˆšá‹¨áˆ áŠ áŒˆáˆáŒáˆá‰µ áŠ¨áˆ˜áŒá‹›á‰µá‹ á‰ áŠá‰µ áŠ¥á‰£áŠ­á‹ á‰ áˆµáˆáŠ­ á‰áŒ¥áˆ­á‹ á‹­áˆ˜á‹áŒˆá‰¡/á‹­áŒá‰¡á¢');
                window.location.hash = '#signup-form';
                updateView();
                return;
            }

            selectedPlan = plan;
            selectedPrice = price;
            let priceText = `${price} ETB (${plan === 'daily' ? 'á‹•áˆˆá‰³á‹Š' : plan === 'monthly' ? 'á‹ˆáˆ­áˆƒá‹Š' : 'á‹“áˆ˜á‰³á‹Š'})`;

            document.getElementById('selected-plan-info').textContent = `á‹¨áˆ˜áˆ¨áŒ¡á‰µ á•áˆ‹áŠ•: ${priceText}á¢ áŠ áˆáŠ• áˆˆáˆ˜áŠ­áˆáˆ á‹­áŒ«áŠ‘á¢`;
            window.location.hash = '#payment-methods';
            updateView();
        }
        
        function processPayment(method) {
            if (!getCurrentUserPhone() || !selectedPlan || selectedPrice === 0) {
                alert('áŠ­áá‹« áŠ¨áˆ˜áˆáŒ¸áˆá‹ á‰ áŠá‰µ á‰ á‰µáŠ­áŠ­áˆ á‹­áˆ˜á‹áŒˆá‰¡áŠ“ á•áˆ‹áŠ• á‹­áˆáˆ¨áŒ¡á¢');
                window.location.hash = '#pricing';
                updateView();
                return;
            }
            
            showLoading(`á‰  ${method} áŠ­áá‹« (${selectedPrice} ETB) á‰ áˆ˜áˆá€áˆ...`);

            setTimeout(() => {
                hideLoading();
                const phone = getCurrentUserPhone();
                if (phone) {
                    setRegisteredUser(phone, null, 'premium', null);
                    alert(`áŠ­áá‹« á‰°áˆ³áŠ­á‰·áˆ! á‰  ${method} á‰ áŠ©áˆ á•áˆªáˆšá‹¨áˆ á‰°áŒ á‰ƒáˆš áˆ†áŠá‹‹áˆ!`);
                    
                    selectedPlan = null;
                    selectedPrice = 0;
                    selectedFeature = null;
                    
                    window.location.hash = '#premium-dashboard';
                    updateView();
                } 
            }, 2500);
        }
        
        // ==================================================
        // --- Business Wallet Operations --- (NEW LOGIC)
        // ==================================================
        
        function handleDeposit() {
            const etbAmount = parseFloat(document.getElementById('deposit-etb').value);
            const targetCurrency = document.getElementById('deposit-currency').value;
            const errorBox = document.getElementById('deposit-error');
            errorBox.style.display = 'none';

            if (!etbAmount || etbAmount < 100 || !targetCurrency) {
                errorBox.textContent = 'á‰µáŠ­áŠ­áˆˆáŠ› á‹¨ETB áˆ˜áŒ áŠ• áŠ¥áŠ“ áˆáŠ•á‹›áˆ¬ á‹­áˆáˆ¨áŒ¡á¢';
                errorBox.style.display = 'block';
                return;
            }
            
            showLoading('áŒˆáŠ•á‹˜á‰¥ á‰ áˆ˜á‰€á‹¨áˆ­ áŠ¥áŠ“ á‰ áˆ›áˆµá‰€áˆ˜áŒ¥...');
            
            // Convert ETB to USD first
            const usdEquivalent = etbAmount * EXCHANGE_RATES.ETB_TO_USD;
            
            // For now, regardless of the target currency chosen (USD, EUR, GBP), we store it in USD.
            // This simplifies the logic based on the user requirement ("á‹ˆá‹° á‹¶áˆ‹áˆ­ á‰€á‹­áˆ® á‹«áˆµá‰€áˆáŒ£áˆ").
            const depositAmount = usdEquivalent; 

            setTimeout(() => {
                hideLoading();
                if (updateBusinessBalance(depositAmount)) {
                    alert(`${etbAmount} ETB á‰°á‰€á‰¥áˆ ${depositAmount.toFixed(2)} USD á‰ áˆµáŠ¬á‰µ áŠ áˆµá‰€áˆáŒ§áˆá¢`);
                    window.location.hash = '#business-dashboard';
                    updateView();
                } else {
                    errorBox.textContent = 'á‹¨áˆ›áˆµá‰€áˆ˜áŒ¥ áˆ‚á‹°á‰µ áŠ áˆá‰°áˆ³áŠ«áˆá¢ áŠ¥á‰£áŠ­á‹ áŠ¥áŠ•á‹°áŒˆáŠ“ á‹­áˆáŠ­áˆ©á¢';
                    errorBox.style.display = 'block';
                }
            }, 2000);
        }
        
        function handleWithdraw() {
            const withdrawUSD = parseFloat(document.getElementById('withdraw-amount').value);
            const targetCurrency = document.getElementById('withdraw-currency').value;
            const withdrawMethod = document.getElementById('withdraw-method').value;
            const errorBox = document.getElementById('withdraw-error');
            errorBox.style.display = 'none';
            const currentBalance = getBusinessBalance();

            if (!withdrawUSD || withdrawUSD <= 0 || !targetCurrency || !withdrawMethod) {
                errorBox.textContent = 'áˆáˆ‰áŠ•áˆ áˆ˜áˆµáŠ®á‰½ á‰ á‰µáŠ­áŠ­áˆ á‹­áˆ™áˆ‰á¢';
                errorBox.style.display = 'block';
                return;
            }
            
            if (withdrawUSD > currentBalance) {
                errorBox.textContent = `âš ï¸ á‰ á‰‚ á‹¶áˆ‹áˆ­ áˆšá‹›áŠ• á‹¨áˆˆá‹á‰µáˆá¢ á‹«áˆˆá‹: ${currentBalance.toFixed(2)} USDá¢`;
                errorBox.style.display = 'block';
                return;
            }
            
            showLoading('áŒˆáŠ•á‹˜á‰¥ á‰ áˆ˜áˆ˜áŠ•á‹˜áˆ­ áŠ¥áŠ“ á‰ áˆ›á‹áŒ£á‰µ...');
            
            // Calculate withdrawal amount in target currency
            let withdrawnAmount;
            if (targetCurrency === 'USD') {
                // If withdrawing in USD, amount is the same
                // For simplicity, we assume USD withdrawal to PayPal is direct
                withdrawnAmount = withdrawUSD;
            } else if (targetCurrency === 'ETB') {
                withdrawnAmount = withdrawUSD * EXCHANGE_RATES.USD_TO_ETB;
            } else if (targetCurrency === 'EUR') {
                withdrawnAmount = withdrawUSD * EXCHANGE_RATES.USD_TO_EUR;
            } else if (targetCurrency === 'GBP') {
                withdrawnAmount = withdrawUSD * EXCHANGE_RATES.USD_TO_GBP;
            } else {
                withdrawnAmount = withdrawUSD; // Default to USD
            }

            setTimeout(() => {
                hideLoading();
                if (updateBusinessBalance(-withdrawUSD)) { // Subtract USD amount
                    alert(`${withdrawUSD.toFixed(2)} USD á‰ áˆµáŠ¬á‰µ á‹ˆá‹° ${withdrawnAmount.toFixed(2)} ${targetCurrency} á‰°á‰€á‹­áˆ® á‰  ${withdrawMethod} á‹ˆáŒ¥á‰·áˆ!`);
                    window.location.hash = '#business-dashboard';
                    updateView();
                } else {
                    errorBox.textContent = 'á‹¨áˆ›á‹áŒ£á‰µ áˆ‚á‹°á‰µ áŠ áˆá‰°áˆ³áŠ«áˆá¢';
                    errorBox.style.display = 'block';
                }
            }, 2000);
        }
        
        function handlePurchase(service) {
            const purchasePrices = {
                'ChatGPT': 20.00,
                'GeminiAdvanced': 19.99,
                'Amazon': 15.00, // Example average cost
                'Domain': 12.00, // Example average cost
                'GoogleCloud': 10.00 // Example minimum cost
            };
            
            const cost = purchasePrices[service];
            const currentBalance = getBusinessBalance();

            if (currentBalance < cost) {
                alert(`á‹­áˆ…áŠ• áŠ áŒˆáˆáŒáˆá‰µ áˆˆáˆ˜áŒá‹›á‰µ á‰ á‰‚ á‹¶áˆ‹áˆ­ á‹¨áˆˆá‹á‰µáˆá¢ (${cost.toFixed(2)} USD á‹«áˆµáˆáˆáŒ‹áˆ)`);
                return;
            }
            
            showLoading(`${service} á‰ áˆ˜áŒá‹›á‰µ áˆ‹á‹­...`);

            setTimeout(() => {
                hideLoading();
                if (updateBusinessBalance(-cost)) {
                    alert(`${service} á‰ áˆµáŠ¬á‰µ á‰°áŒˆá‹á‰·áˆ! ${cost.toFixed(2)} USD áŠ¨áˆ‚áˆ³á‰¥á‹ á‰°á‰€áŠ•áˆ·áˆá¢`);
                    window.location.hash = '#business-dashboard';
                    updateView();
                } else {
                    alert('á‹¨áŒá‹¢ áˆ‚á‹°á‰µ áŠ áˆá‰°áˆ³áŠ«áˆá¢');
                }
            }, 2000);
        }


        // ... (handlePost, renderPosts, showDeleteList, deletePost - no change) ...
        
        function handlePost(type) {
            const userPhone = getCurrentUserPhone();
            if (!userPhone) {
                alert('áŠ¥á‰£áŠ­á‹ áˆ˜áŒ€áˆ˜áˆªá‹« á‹­áŒá‰¡/á‹­áˆ˜á‹áŒˆá‰¡á¢');
                window.location.hash = '#login-form';
                updateView();
                return;
            }
            
            let title = '';
            let content = '';
            let file = null;
            let postId = Date.now();

            if (type === 'text') {
                title = document.getElementById('post-text-title').value.trim();
                content = document.getElementById('post-text-content').value.trim();
                if (!title || !content) {
                    alert('áˆ­á‹•áˆµ áŠ¥áŠ“ á…áˆá á‹«áˆµáŒˆá‰¡á¢');
                    return;
                }
            } else if (type === 'image') {
                title = document.getElementById('post-image-title').value.trim();
                file = document.getElementById('post-image-file').files[0];
                if (!title || !file) {
                    alert('áˆ­á‹•áˆµ áŠ¥áŠ“ áˆáˆµáˆ á‹«áˆµáŒˆá‰¡á¢');
                    return;
                }
                content = URL.createObjectURL(file); 
            } else if (type === 'audio') {
                title = document.getElementById('post-audio-title').value.trim();
                file = document.getElementById('post-audio-file').files[0];
                if (!title || !file) {
                    alert('áˆ­á‹•áˆµ áŠ¥áŠ“ á‰ªá‹²á‹®/áŠ¦á‹²á‹® á‹á‹­áˆ á‹«áˆµáŒˆá‰¡á¢');
                    return;
                }
                content = URL.createObjectURL(file); 
            }

            showLoading('áˆ˜áˆ¨áŒƒ á‰ áˆ˜áˆˆáŒ á áˆ‹á‹­...');

            const newPost = {
                id: postId,
                user: userPhone,
                type: type,
                title: title,
                content: content,
                date: new Date().toLocaleDateString('am-ET')
            };

            posts.push(newPost);
            localStorage.setItem('fasil_app_posts', JSON.stringify(posts));

            setTimeout(() => {
                hideLoading();
                alert('áˆ˜áˆ¨áŒƒá‹ á‰ á‰°áˆ³áŠ« áˆáŠ”á‰³ á‰°áˆˆáŒ¥ááˆ!');
                goBackToDashboard();
            }, 1500);
        }
        
        function renderPosts(type, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            const filteredPosts = posts.filter(p => p.type === type).reverse();

            if (filteredPosts.length === 0) {
                container.innerHTML = `<p style="text-align: center; color: #777;">áˆáŠ•áˆ ${type === 'text' ? 'á…áˆáá‰½' : type === 'image' ? 'áˆáˆµáˆá‰½' : 'á‰ªá‹²á‹®/áŠ¦á‹²á‹® á‹á‹­áˆá‰½'} á‹¨áˆ‰áˆá¢</p>`;
                return;
            }

            filteredPosts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.style.border = '1px solid #ccc';
                postElement.style.padding = '15px';
                postElement.style.marginBottom = '15px';
                postElement.style.borderRadius = '8px';
                postElement.style.backgroundColor = '#fff';

                let contentHtml = '';
                if (post.type === 'text') {
                    contentHtml = `<p>${post.content.substring(0, 150)}...</p>`;
                } else if (post.type === 'image') {
                    contentHtml = `<img src="${post.content}" alt="${post.title}" style="max-width: 100%; height: auto; border-radius: 5px;">`;
                } else if (post.type === 'audio') {
                    const mediaTag = post.content.includes('video') ? 
                        `<video controls style="width: 100%; max-height: 200px; margin: 10px 0;"><source src="${post.content}" type="video/mp4"></video>` : 
                        `<audio controls style="width: 100%; margin: 10px 0;"><source src="${post.content}" type="audio/mpeg"></audio>`;
                    contentHtml = mediaTag;
                }


                postElement.innerHTML = `
                    <h4 style="color: #007bff; margin-top: 0;">${post.title}</h4>
                    <p style="font-size: 14px; color: #555;"><strong>Posted by:</strong> ${post.user} on ${post.date}</p>
                    ${contentHtml}
                `;
                container.appendChild(postElement);
            });
        }
        
        function showDeleteList() {
            const type = document.getElementById('delete-file-type').value;
            const container = document.getElementById('deletable-posts-container');
            const currentUser = getCurrentUserPhone();

            if (!currentUser) {
                alert('áŠ¥á‰£áŠ­á‹ áˆ˜áŒ€áˆ˜áˆªá‹« á‹­áŒá‰¡á¢');
                window.location.hash = '#login-form';
                updateView();
                return;
            }
            
            window.location.hash = '#delete-file-view';
            updateView();
            
            container.innerHTML = '';
            const userPosts = posts.filter(p => p.type === type && p.user === currentUser).reverse();

            if (userPosts.length === 0) {
                container.innerHTML = `<p style="text-align: center; color: #721c24;">áŠ¥áˆ­áˆµá‹ á‹¨áˆˆáŒ á‰á‰µ ${type} á‹¨áˆˆáˆá¢</p>`;
                return;
            }

            userPosts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.style.border = '1px solid #dc3545';
                postElement.style.padding = '15px';
                postElement.style.marginBottom = '15px';
                postElement.style.borderRadius = '8px';
                postElement.style.backgroundColor = '#f8d7da';

                postElement.innerHTML = `
                    <h4 style="color: #721c24; margin-top: 0;">${post.title} (${post.date})</h4>
                    <button class="delete-btn" style="width: 120px; padding: 8px 10px; font-size: 14px; margin: 10px 0;" onclick="deletePost(${post.id})">áˆ˜á‹°áˆˆá‰µ</button>
                `;
                container.appendChild(postElement);
            });
        }

        function deletePost(id) {
            if (confirm('á‹­áˆ…áŠ• á‹á‹­áˆ á‰ áŠ¥áˆ­áŒáŒ áŠáŠá‰µ áˆ˜á‹°áˆˆá‰µ á‹­áˆáˆáŒ‹áˆ‰?')) {
                posts = posts.filter(p => p.id !== id);
                localStorage.setItem('fasil_app_posts', JSON.stringify(posts));
                alert('á‹á‹­áˆ‰ á‰°á‹°áˆá‰·áˆá¢');
                showDeleteList(); // á‹áˆ­á‹áˆ©áŠ• áŠ á‹µáˆµ
            }
        }


        // ==================================================
        // --- View Controller (á‹‹áŠ“ áˆ˜á‰†áŒ£áŒ áˆªá‹«) ---
        // ==================================================

        function updateView() {
            const allSections = document.querySelectorAll('.section');
            let hash = window.location.hash || '#home-view';
            let targetId = hash.substring(1);
            
            currentSubscription = getCurrentUserTier();

            if (targetId === 'dashboard' || targetId === 'free-dashboard' || targetId === 'premium-dashboard') {
                if (getCurrentUserPhone()) {
                    if (currentSubscription === 'premium') {
                        targetId = 'premium-dashboard';
                    } else {
                        targetId = 'free-dashboard';
                    }
                } else {
                    targetId = 'home-view';
                }
            }

            allSections.forEach(section => {
                section.style.display = 'none';
            });

            const targetSection = document.getElementById(targetId);
            if (targetSection) {
                targetSection.style.display = 'block';
            } else {
                document.getElementById('home-view').style.display = 'block';
            }
            
            // Specific view updates
            if (targetId === 'view-text') renderPosts('text', 'text-posts-container');
            if (targetId === 'view-image') renderPosts('image', 'image-posts-container');
            if (targetId === 'view-audio') renderPosts('audio', 'audio-posts-container');
            if (targetId === 'business-dashboard') refreshBusinessBalanceDisplay(); // NEW: Update Balance

            // Reset input fields when changing screens for a better user experience
            if (targetId !== 'deposit') {
                document.getElementById('deposit-etb') && (document.getElementById('deposit-etb').value = '');
                document.getElementById('deposit-currency') && (document.getElementById('deposit-currency').value = '');
            }
             if (targetId !== 'withdraw') {
                document.getElementById('withdraw-amount') && (document.getElementById('withdraw-amount').value = '');
                document.getElementById('withdraw-currency') && (document.getElementById('withdraw-currency').value = '');
                document.getElementById('withdraw-method') && (document.getElementById('withdraw-method').value = '');
            }
        }

        window.addEventListener('hashchange', updateView);
        window.addEventListener('load', updateView);
        
        updateView();
    </script>
</body>
</html>

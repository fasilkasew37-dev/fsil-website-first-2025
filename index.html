·ã≤<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>·çã·à≤·àç ·ãå·â• ·ä†·çï - Fasil Web App (Firebase Online)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* --- General CSS --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center; padding: 0; margin: 0;
            background-color: #f0f4f8; color: #333;
            padding-bottom: 90px;
        }
        .container { max-width: 700px; margin: 0 auto; padding: 5px; }
        
        /* Header */
        .top-header {
            display: flex; justify-content: space-between; align-items: center;
            background: #fff; padding: 5px 10px; border-bottom: 3px solid #007bff;
        }
        .marquee-container-top { flex: 1; overflow: hidden; white-space: nowrap; margin: 0 10px; }
        .marquee-text-top { display: inline-block; padding-left: 100%; animation: marquee 15s linear infinite; color: #007bff; font-weight: bold; font-size: 16px; }
        
        /* Footer */
        .footer-wrapper { position: fixed; bottom: 0; left: 0; width: 100%; z-index: 1000; background: white; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); }
        .bottom-nav { display: flex; height: 55px; width: 100%; }
        .nav-btn { flex: 1; border: none; font-weight: bold; font-size: 14px; cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; }
        .nav-home { background-color: #28a745; } .nav-live { background-color: #ffc107; color: black; } .nav-profile { background-color: #dc3545; }
        .bottom-marquee { background: #f0f0f0; color: #28a745; font-weight: bold; overflow: hidden; white-space: nowrap; height: 25px; line-height: 25px; font-size: 12px; }
        .bottom-marquee span { display: inline-block; padding-left: 100%; animation: marquee 12s linear infinite; }
        @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

        /* Sections */
        .section { display: none; background: white; padding: 15px; border-radius: 8px; margin-top: 10px; min-height: 400px; }
        .show { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }

        /* Welcome Split - Compacted */
        .split-container { display: flex; justify-content: space-between; gap: 5px; text-align: left; margin-bottom: 5px; }
        .split-left { width: 48%; color: #007bff; font-size: 10px; line-height: 1.2; padding: 2px; }
        .split-right { width: 48%; color: #d35400; font-size: 10px; font-weight: bold; line-height: 1.2; border-left: 1px solid #ccc; padding-left: 5px; padding: 2px; }
        .blue-spacer { height: 10px; background-color: #007bff; margin: 5px 0; border-radius: 5px; }
        #t-in, #t-po { font-size: 9px; }

        /* --- LOGO CSS --- */
        .brand-area { display: flex; align-items: center; justify-content: center; margin-top: 10px; margin-bottom: 20px; position: relative; transform: scale(1.0); }
        .side-logo-container { width: 60px; height: 60px; border-radius: 50%; border: 2px solid #007bff; background: white; z-index: 5; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 10px rgba(0, 123, 255, 0.6); }
        .side-logo-img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }
        .left-logo { margin-right: -20px; } .right-logo { margin-left: -20px; }
        .complex-logo { position: relative; width: 130px; height: 130px; z-index: 10; }
        .ring { position: absolute; border-radius: 50%; display: flex; align-items: center; justify-content: center; top: 50%; left: 50%; transform: translate(-50%, -50%); animation: glowing 1.5s infinite alternate ease-in-out; }
        @keyframes glowing { 0% { box-shadow: 0 0 5px currentColor; filter: brightness(100%); } 100% { box-shadow: 0 0 20px currentColor; filter: brightness(150%); } }
        .ring-blue { width: 130px; height: 130px; border: 4px solid #00008b; color: #00008b; z-index: 1; }
        .ring-red { width: 110px; height: 110px; border: 3px solid red; color: red; z-index: 2; }
        .ring-yellow { width: 90px; height: 90px; border: 3px solid yellow; color: yellow; z-index: 3; }
        .ring-green { width: 70px; height: 70px; background: transparent; border: 2px solid green; border-radius: 50%; z-index: 4; }
        .center-lion { position: absolute; width: 70px; height: 70px; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 100; object-fit: cover; border-radius: 50%; border: 2px solid white; background-color: #007bff; }
        .pos-item { position: absolute; width: 16px; height: 16px; object-fit: cover; border-radius: 50%; border: 1px solid white; }
        .p-n { top: -8px; left: 50%; transform: translateX(-50%); } .p-s { bottom: -8px; left: 50%; transform: translateX(-50%); } 
        .p-e { right: -8px; top: 50%; transform: translateY(-50%); } .p-w { left: -8px; top: 50%; transform: translateY(-50%); }

        /* FWA Animated Brand Text */
        .fwa-brand {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 15px;
            gap: 10px;
        }
        .fwa-letter {
            font-size: 48px;
            font-weight: bold;
            font-family: Arial, sans-serif;
            animation: colorPulse 2s infinite alternate;
            display: inline-block;
        }
        .letter-f { color: #28a745; animation-delay: 0s; } /* Green */
        .letter-w { color: #ffc107; animation-delay: 0.4s; } /* Yellow */
        .letter-a { color: #dc3545; animation-delay: 0.8s; } /* Red */
        @keyframes colorPulse {
            0% { filter: brightness(100%); transform: scale(1); }
            100% { filter: brightness(150%); transform: scale(1.1); }
        }

        /* SPLASH SCREEN */
        #splash-screen { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background-color: #007bff; 
            z-index: 9999; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
        }
        #splash-msg { 
            margin-top: 30px; 
            color: white; 
            font-size: 22px; 
            font-weight: bold; 
            text-align: center; 
            padding: 20px; 
            animation: slideTxt 5s linear infinite; 
            display: none; 
        }
        @keyframes slideTxt { 
            0% {transform: translateX(100%);} 
            100% {transform: translateX(-100%);} 
        }

        /* Loading Spinner Overlay */
        #loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.9); z-index: 5000;
            display: none; justify-content: center; align-items: center; flex-direction: column;
        }
        .loader {
            border: 8px solid #f3f3f3; border-top: 8px solid #007bff;
            border-radius: 50%; width: 60px; height: 60px;
            animation: spin 1s linear infinite; margin-bottom: 15px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Dashboard Split */
        .dash-layout { display: flex; gap: 10px; align-items: flex-start; }
        .dash-left { width: 60%; text-align: left; } .dash-right { width: 40%; }
        
        /* UI Elements */
        input, select, textarea { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; margin: 5px 0; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; color: white; }
        .btn-green { background: #28a745; } .btn-red { background: #dc3545; } .btn-blue { background: #007bff; } .btn-yellow { background: #ffc107; color: black; }
        .btn-small { padding: 8px; font-size: 12px; margin: 2px 0; }
        .btn-tiny { padding: 5px; font-size: 10px; margin: 1px; }
        .btn-admin { background: #333; color: white; display: none; }
        .lang-btn { background: #6c757d; color: white; padding: 4px 8px; font-size: 10px; border-radius: 4px; border:none; cursor: pointer; margin-top: 2px;}
        
        /* Modified Buttons */
        .btn-compact { padding: 8px; margin: 2px 0; font-size: 14px; margin-top: 15px; }

        /* Modals */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: none; justify-content: center; align-items: center; z-index: 2000; }
        .modal-box { background: white; padding: 20px; width: 85%; border-radius: 10px; text-align: center; max-height: 80vh; overflow-y: auto; }

        /* Post Card */
        .post-card { border: 1px solid #eee; background: #fff; border-radius: 8px; padding: 15px; margin-bottom: 15px; text-align: left; }
        .post-header { display: flex; align-items: center; margin-bottom: 10px; border-bottom: 1px solid #f0f0f0; padding-bottom: 5px; }
        .post-header img { width: 35px; height: 35px; border-radius: 50%; margin-right: 10px; object-fit: cover; }
        .post-actions { display: flex; justify-content: space-between; margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee; flex-wrap: wrap; }
        .action-icon { background: none; border: none; color: #007bff; font-size: 12px; cursor: pointer; padding: 5px; margin: 0; width: auto; display: inline-flex; align-items: center; gap: 3px; }
        
        .user-item { display: flex; align-items: center; padding: 10px; border-bottom: 1px solid #eee; }
        .user-item img { width: 40px; height: 40px; border-radius: 50%; margin-right: 10px; object-fit: cover; }
        .user-item.bright-blue { background-color: #007bff; color: white; border-radius: 5px; }
        .user-item.has-msg { background-color: #d4edda; border-left: 5px solid #28a745; }
        
        #live-video-element { width: 100%; height: 350px; background: #000; border-radius: 8px; object-fit: cover; }
        .hidden-input { display: none; }
        .hidden { display: none; }
        
        /* Admin Indicators */
        .banned-text { color: black !important; font-weight: bold; }
        .open-text { color: #007bff !important; font-weight: bold; }
        .banned-indicator { border: 2px solid black; background: #eee; }
        
        /* Firebase Status - PERMANENT */
        .firebase-status {
            position: fixed;
            top: 60px;
            right: 10px;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 10px;
            z-index: 1000;
            display: block !important;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .firebase-online { 
            background: #28a745; 
            border: 1px solid #1e7e34;
        }
        .firebase-offline { 
            background: #dc3545; 
            border: 1px solid #bd2130;
        }
        
        /* Password Show/Hide Toggle */
        .password-wrapper {
            position: relative;
            width: 100%;
        }
        .password-wrapper input {
            padding-right: 40px;
        }
        .toggle-password {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #007bff;
            cursor: pointer;
            font-size: 14px;
            width: auto;
            padding: 0;
            margin: 0;
        }
        
        /* FWA Notes Modal - UPDATED */
        .fwa-notes-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
            transition: all 0.3s ease;
        }
        .fwa-notes-grid.hidden {
            display: none;
        }
        .fwa-note-btn {
            background: linear-gradient(45deg, #9c27b0, #673ab7);
            color: white;
            border: 2px solid #5e35b1;
            font-weight: bold;
            padding: 12px 5px;
            transition: all 0.3s ease;
        }
        .fwa-note-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .fwa-note-image {
            max-width: 100%;
            height: auto;
            border: 2px solid #9c27b0;
            border-radius: 8px;
            margin: 10px 0;
            animation: fadeIn 0.5s;
        }
        .fwa-image-container {
            text-align: center;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            margin: 10px 0;
            animation: fadeIn 0.5s;
        }
        .fwa-back-btn {
            margin-top: 15px;
            background: #6c757d;
        }
        
        /* Business Section Updates */
        .business-balance-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin: 10px 0;
            text-align: center;
        }
        .balance-item {
            background: #f8f9fa;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }
        .balance-label {
            font-size: 12px;
            color: #666;
        }
        .balance-value {
            font-size: 16px;
            font-weight: bold;
        }
        .usd-bal { color: #28a745; }
        .gbp-bal { color: #dc3545; }
        .eur-bal { color: #007bff; }
        .etb-bal { color: #ffc107; }
        .fwa-bal { color: #9c27b0; }
        
        /* MODERN REALISTIC LIVE STREAM */
        .live-stream-container {
            position: relative;
            width: 100%;
            height: 450px;
            background: black;
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }
        .live-overlay-top {
            position: absolute; top: 10px; left: 10px; right: 10px;
            display: flex; justify-content: space-between; z-index: 10;
        }
        .live-badge {
            background: #dc3545; color: white; padding: 3px 8px;
            border-radius: 4px; font-weight: bold; font-size: 12px;
            animation: pulse 1.5s infinite;
        }
        .live-viewers-badge {
            background: rgba(0,0,0,0.5); color: white; padding: 3px 8px;
            border-radius: 15px; font-size: 12px;
        }
        .live-overlay-bottom {
            position: absolute; bottom: 10px; left: 10px; right: 10px;
            z-index: 10;
        }
        .floating-hearts {
            position: absolute; bottom: 60px; right: 10px; width: 50px; height: 200px;
            pointer-events: none; overflow: hidden;
        }
        .heart-icon {
            position: absolute; bottom: 0; color: #ff0055; font-size: 24px;
            animation: floatUp 3s linear forwards; opacity: 0;
        }
        @keyframes floatUp {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-200px) scale(1.5); opacity: 0; }
        }
        @keyframes pulse {
            0% { transform: scale(0.95); opacity: 0.9; }
            50% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0.95); opacity: 0.9; }
        }
        .live-online {
            background-color: #28a745 !important;
            animation: pulse-green 1.5s infinite;
        }
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(40, 167, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0); }
        }
        .live-indicator {
            display: inline-block; width: 10px; height: 10px;
            background-color: #dc3545; border-radius: 50%;
            margin-right: 5px;
        }

        /* CHATBOT POSITION OVERRIDE - TOP LEFT */
        #chatbase-bubble-button {
            top: 10px !important; left: 10px !important;
            bottom: auto !important; right: auto !important;
            z-index: 9999 !important;
        }
    </style>
</head>
<body>

    <!-- Loading Overlay for Fast Post -->
    <div id="loading-overlay">
        <div class="loader"></div>
        <h3 id="loading-text">Processing...</h3>
    </div>

    <!-- SPLASH SCREEN (Logo visible for 3 seconds) -->
    <div id="splash-screen">
        <div class="brand-area" style="transform: scale(1.5);">
            <div class="side-logo-container left-logo"><img src="eagle_image.jpg" class="side-logo-img"></div>
            <div class="complex-logo">
                <div class="ring ring-blue"><div class="ring ring-red"><div class="ring ring-yellow"><div class="ring ring-green"></div></div></div></div>
                <img src="lion_image.jpg" class="center-lion">
            </div>
            <div class="side-logo-container right-logo"><img src="dove_image.jpg" class="side-logo-img"></div>
        </div>
        <!-- FWA Brand Text -->
        <div class="fwa-brand">
            <span class="fwa-letter letter-f">F</span>
            <span class="fwa-letter letter-w">W</span>
            <span class="fwa-letter letter-a">A</span>
        </div>
        <div id="splash-msg">·ä•·äï·ä≥·äï ·ã∞·àµ ·ä†·àà·ãé·âµ ·â†·â∞·à≥·ä´ ·àÅ·äî·â≥ ·â∞·àò·ãù·åç·â†·ãã·àç ·ä•·äì·àò·à∞·åç·äì·àà·äï</div>
    </div>

    <!-- Firebase Status Indicator - PERMANENT -->
    <div id="firebase-status" class="firebase-status">üî• Online</div>

    <!-- Header -->
    <div class="top-header">
        <!-- LEFT HEADER LOGO (FULL LOGO) -->
        <div class="brand-area" style="transform: scale(0.35); width: 60px; height: 60px; margin-right: 10px;">
            <div class="side-logo-container left-logo"><img src="eagle_image.jpg" class="side-logo-img"></div>
            <div class="complex-logo">
                <div class="ring ring-blue">
                    <div class="ring ring-red">
                        <div class="ring ring-yellow">
                            <div class="ring ring-green"></div>
                        </div>
                    </div>
                </div>
                <img src="lion_image.jpg" class="center-lion">
            </div>
            <div class="side-logo-container right-logo"><img src="dove_image.jpg" class="side-logo-img"></div>
        </div>
        
        <div class="marquee-container-top"><span class="marquee-text-top" id="head-txt">·ä•·äï·ä≥·äï ·ãà·ã∞ ·çã·à≤·àç ·ãå·â• ·ä†·çï ·ã®·ä†·åà·àç·åç·àé·âµ ·àõ·ãï·ä®·àç ·â†·ã∞·àÖ·äì ·àò·å°!</span></div>
        
        <!-- RIGHT HEADER LOGO (FULL LOGO) -->
        <div style="text-align: right; display: flex; flex-direction: column; align-items: center;">
            <div class="brand-area" style="transform: scale(0.35); width: 60px; height: 60px;">
                <div class="side-logo-container left-logo"><img src="eagle_image.jpg" class="side-logo-img"></div>
                <div class="complex-logo">
                    <div class="ring ring-blue">
                        <div class="ring ring-red">
                            <div class="ring ring-yellow">
                                <div class="ring ring-green"></div>
                            </div>
                        </div>
                    </div>
                    <img src="lion_image.jpg" class="center-lion">
                </div>
                <div class="side-logo-container right-logo"><img src="dove_image.jpg" class="side-logo-img"></div>
            </div>
            <button class="lang-btn" onclick="openLangModal()" id="lang-btn-txt">Language</button>
        </div>
    </div>

    <div class="container">

        <!-- Modals -->
        <div class="modal-overlay" id="custom-modal"><div class="modal-box"><h3 id="modal-title"></h3><p id="modal-msg"></p><button class="btn-blue" onclick="closeModal()">OK</button></div></div>
        
        <div class="modal-overlay" id="pass-modal"><div class="modal-box"><h3 id="pass-title">Password Required</h3><input type="password" id="pass-input" placeholder="Password" style="text-align:center;"><button class="btn-green" onclick="verifyPass()">Confirm</button><button class="btn-red" onclick="document.getElementById('pass-modal').style.display='none'">Cancel</button></div></div>

        <!-- Admin Action Password Modal -->
        <div class="modal-overlay" id="admin-action-modal"><div class="modal-box"><h3>Admin Verification</h3><input type="password" id="admin-act-pass" placeholder="Admin Code"><button class="btn-green" onclick="runAdminAction()">Verify</button><button class="btn-red" onclick="document.getElementById('admin-action-modal').style.display='none'">Cancel</button></div></div>

        <!-- Report Reason Modal -->
        <div class="modal-overlay" id="report-modal"><div class="modal-box"><h3>Report Post</h3>
            <p>Please enter the reason for reporting:</p>
            <textarea id="report-reason" placeholder="·àù·ä≠·äï·ã´·âµ ·ä†·àµ·åà·â£ (Reason)..."></textarea>
            <button class="btn-green" onclick="submitReport()">OK (Report)</button>
            <button class="btn-red" onclick="document.getElementById('report-modal').style.display='none'">Cancel</button>
        </div></div>

        <!-- Admin Change Pass Modal -->
        <div class="modal-overlay" id="admin-chg-modal"><div class="modal-box"><h3>Change Admin Password</h3>
            <input type="password" id="old-adm" placeholder="Old Admin Code">
            <input type="password" id="new-adm" placeholder="New (abc123456xyz)">
            <input type="password" id="conf-adm" placeholder="Confirm New">
            <button class="btn-green" onclick="saveNewAdminPass()">Change</button>
            <button class="btn-red" onclick="document.getElementById('admin-chg-modal').style.display='none'">Cancel</button>
        </div></div>

        <!-- Admin Premium Pay Modal -->
        <div class="modal-overlay" id="adm-prem-modal"><div class="modal-box"><h3>Premium Payment Receiver</h3>
            <button class="btn-blue" onclick="alert('PayPal/Intl Payment Gateway Open')">1. International (PayPal)</button>
            <button class="btn-green" onclick="alert('Local Method 1 Gateway Open')">2. Local Bank 1</button>
            <button class="btn-green" onclick="alert('Local Method 2 Gateway Open')">3. Local Bank 2</button>
            <button class="btn-red" onclick="document.getElementById('adm-prem-modal').style.display='none'">Close</button>
        </div></div>
        
        <!-- Admin Business Control Modal -->
        <div class="modal-overlay" id="adm-biz-ctrl-modal"><div class="modal-box"><h3>Control Business</h3>
            <button class="btn-green" onclick="setBusinessStatus('open')">Open (·ä≠·çà·âµ)</button>
            <button class="btn-red" onclick="setBusinessStatus('closed')">Close (·ãù·åã)</button>
            <button class="btn-yellow" onclick="document.getElementById('adm-rate-chg-modal').style.display='flex'">Change Rates (·â∏·äï·åÖ)</button>
            <hr>
            <button class="btn-blue" onclick="document.getElementById('adm-biz-ctrl-modal').style.display='none'">Exit</button>
        </div></div>

        <!-- Admin Rate Change Modal -->
        <div class="modal-overlay" id="adm-rate-chg-modal"><div class="modal-box"><h3>Change Rates (per 1 USD)</h3>
            <button class="btn-blue" onclick="promptRate('FWA')">FWA</button>
            <button class="btn-blue" onclick="promptRate('ETB')">ETB</button>
            <button class="btn-blue" onclick="promptRate('GBP')">GBP</button>
            <button class="btn-blue" onclick="promptRate('EUR')">EUR</button>
            <button class="btn-red" onclick="document.getElementById('adm-rate-chg-modal').style.display='none'">Close</button>
        </div></div>

        <!-- Exchange Modal -->
        <div class="modal-overlay" id="exchange-modal"><div class="modal-box"><h3>Exchange Center</h3>
            <button class="btn-blue" onclick="showRates()">View Exchange (·àà·àõ·ã®·âµ)</button>
            <button class="btn-green" onclick="showConvert()">Convert (·àà·àò·âÄ·ã®·à≠)</button>
            <div id="rate-view-area" style="display:none; text-align:left; margin-top:10px; border:1px solid #ccc; padding:10px;"></div>
            <div id="convert-area" style="display:none; margin-top:10px;">
                <p>Convert TO USD From:</p>
                <select id="conv-source">
                    <option value="ETB">ETB</option>
                    <option value="FWA">FWA</option>
                    <option value="GBP">GBP</option>
                    <option value="EUR">EUR</option>
                </select>
                <input type="number" id="conv-amount" placeholder="Amount">
                <button class="btn-green" onclick="doConvert()">OK (Change)</button>
            </div>
            <button class="btn-red" onclick="document.getElementById('exchange-modal').style.display='none'">Close</button>
        </div></div>

        <!-- Admin PDF Control Modal -->
        <div class="modal-overlay" id="adm-pdf-ctrl-modal"><div class="modal-box"><h3>Control PDF Service</h3>
            <button class="btn-green" onclick="setPdfStatus('open')">Open (·ä≠·çà·âµ)</button>
            <button class="btn-red" onclick="setPdfStatus('closed')">Close (·ãù·åã)</button>
            <hr>
            <button class="btn-blue" onclick="document.getElementById('adm-pdf-ctrl-modal').style.display='none'">Exit</button>
        </div></div>

        <!-- Language Modal -->
        <div class="modal-overlay" id="lang-modal"><div class="modal-box"><h3>Select Language</h3>
            <button class="btn-blue btn-small" onclick="setLang('en')">English</button>
            <button class="btn-blue btn-small" onclick="setLang('am')">Amharic (·ä†·àõ·à≠·äõ)</button>
            <button class="btn-blue btn-small" onclick="setLang('or')">Oromiffa (Afaan Oromoo)</button>
            <button class="btn-blue btn-small" onclick="setLang('tg')">Tigrinya (·âµ·åç·à≠·äõ)</button>
            <button class="btn-blue btn-small" onclick="setLang('fr')">French (Fran√ßais)</button>
            <button class="btn-blue btn-small" onclick="setLang('ch')">Chinese (‰∏≠Êñá)</button>
            <button class="btn-red" onclick="document.getElementById('lang-modal').style.display='none'">Close</button>
        </div></div>

        <!-- Watch/Talk Modal -->
        <div class="modal-overlay" id="watch-talk-modal"><div class="modal-box"><h3>Live Action</h3>
            <p>Select option for <b id="live-target-user"></b></p>
            <button class="btn-green" onclick="joinLive('watch')">Watch (·â∞·ä®·â≥·â∞·àç)</button>
            <button class="btn-blue" onclick="joinLive('talk')">Talk (·ä†·ãç·à´)</button>
            <button class="btn-red" onclick="document.getElementById('watch-talk-modal').style.display='none'">Cancel</button>
        </div></div>

        <!-- Comment Action Modal -->
        <div class="modal-overlay" id="comment-type-modal"><div class="modal-box"><h3 id="t-com-act">Action</h3>
            <button class="btn-blue" onclick="openComSub('give')">Give Comment</button>
            <button class="btn-blue" onclick="openComSub('view')">View Comments</button>
            <button class="btn-red" onclick="document.getElementById('comment-type-modal').style.display='none'">Cancel</button>
        </div></div>

        <!-- Give/View Sub Modal -->
        <div class="modal-overlay" id="comment-media-modal"><div class="modal-box"><h3 id="t-com-media">Select Type</h3>
            <button class="btn-blue" onclick="processComment('text')">Text</button>
            <button class="btn-blue" onclick="processComment('image')">Image</button>
            <!-- Video Removed -->
            <button class="btn-blue" onclick="processComment('audio')">Voice</button>
            <button class="btn-red" onclick="document.getElementById('comment-media-modal').style.display='none'">Cancel</button>
        </div></div>

        <!-- View Comments List Modal -->
        <div class="modal-overlay" id="view-comments-list-modal"><div class="modal-box"><h3>Comments</h3><div id="comments-display-area" style="text-align:left; max-height:300px; overflow-y:auto;"></div><button class="btn-red" onclick="document.getElementById('view-comments-list-modal').style.display='none'">Close</button></div></div>

        <!-- Share Modal -->
        <div class="modal-overlay" id="share-modal"><div class="modal-box"><h3>Share To</h3>
            <button class="btn-blue" onclick="shareTo('telegram')">Telegram</button>
            <button class="btn-blue" onclick="shareTo('facebook')">Facebook</button>
            <button class="btn-blue" onclick="shareTo('tiktok')">TikTok</button>
            <button class="btn-blue" onclick="shareTo('youtube')">YouTube</button>
            <button class="btn-green" onclick="setupFWAShare()">FWA (Share to Users)</button>
            <button class="btn-red" onclick="closeShare()">Close</button>
        </div></div>

        <div class="modal-overlay" id="admin-login-modal"><div class="modal-box"><h3>Admin Verification</h3><input type="password" id="admin-pass-in" placeholder="Admin Code (Hidden)"><button class="btn-green" onclick="adminLogin()">Enter</button><button class="btn-red" onclick="document.getElementById('admin-login-modal').style.display='none'">Cancel</button></div></div>

        <!-- Receipt Modal -->
        <div class="modal-overlay" id="receipt-modal"><div class="modal-box"><h3>Payment Receipt</h3>
            <p>Receipt Uploaded Successfully.</p>
            <div id="receipt-actions">
                <button class="btn-blue" onclick="downloadReceipt()">Save Receipt to Phone</button>
                <button class="btn-green" onclick="closeReceiptModal()">Receive Receipt (OK)</button>
            </div>
        </div></div>

        <!-- FWA Notes Modal - UPDATED -->
        <div class="modal-overlay" id="fwa-notes-modal"><div class="modal-box">
            <h3>FWA Notes Images and Designs</h3>
            <div id="fwa-buttons-container" class="fwa-notes-grid">
                <button class="fwa-note-btn" onclick="showFWAImage(1)">1 FWA</button>
                <button class="fwa-note-btn" onclick="showFWAImage(5)">5 FWA</button>
                <button class="fwa-note-btn" onclick="showFWAImage(10)">10 FWA</button>
                <button class="fwa-note-btn" onclick="showFWAImage(50)">50 FWA</button>
                <button class="fwa-note-btn" onclick="showFWAImage(100)">100 FWA</button>
                <button class="fwa-note-btn" onclick="showFWAImage(200)">200 FWA</button>
                <button class="fwa-note-btn" onclick="showFWAImage(500)">500 FWA</button>
                <button class="fwa-note-btn" onclick="showFWAImage(1000)">1000 FWA</button>
            </div>
            <div id="fwa-image-display" class="fwa-image-container" style="display:none;">
                <!-- Image will be displayed here -->
            </div>
            <button class="btn-red fwa-back-btn" onclick="closeFWAViewer()" style="display:none;">Back to FWA Notes</button>
            <button class="btn-red" onclick="document.getElementById('fwa-notes-modal').style.display='none'" style="margin-top: 15px;">Close</button>
        </div></div>

        <!-- 1. AGREEMENT & WELCOME (RESTORED TEXT - FULL) -->
        <div id="view-agreement" class="section show">
            <div id="welcome-content">
                <div style="text-align:center; margin-bottom:10px;">
                    <button class="btn-blue btn-small" onclick="togglePolicy()" id="btn-toggle-policy">·çñ·àä·à≤ (Policy)</button>
                </div>
                
                <!-- FULL TEXT HIDDEN INITIALLY, SHOWN BY POLICY BUTTON -->
                <div id="policy-content" style="display:none;">
                    <div class="split-container">
                        <div class="split-left">
                            <h4 id="t-w-s">·ä•·äï·ä≥·äï ·ã∞·àÖ·äì ·àò·å°</h4>
                            <p id="t-in">·ã≠·àÖ ·ã®·çã·à≤·àç ·ãå·â• ·ä†·çï ·â†·â∞·ä†·àõ·äí·äê·âµ ·ä•·äï·ã≤·à∞·à´ ·ã®·â∞·âÄ·ã®·à∞ ·ã≤·åÇ·â≥·àç ·àò·à®·åÉ ·àò·åã·à™·ã´ ·äê·ãç·ç¢ ·àÅ·àå·àù ·âµ·ä≠·ä≠·àà·äõ ·àò·à®·åÉ·ãé·âΩ·äï ·ã´·âÄ·à≠·â£·àç·ç¢ ·ä•·ãç·äê·â∞·äõ ·àò·à®·åÉ·ãà·âΩ·äï ·àò·àò·àç·ä®·âµ ·ä•·äì ·àò·åã·à´·âµ ·ã≠·âΩ·àã·àâ ·â†·â∞·å®·àõ·à™·àù ·àå·àé·âΩ ·ã®·çì·ãà·à≠ ·çñ·ã≠·äï·âµ ·ã®·â¢·ãù·äê·àµ ·ä•·äì ·çí·ã≤·ä§·çç ·ä†·åà·àç·åç·àé·â∂·âΩ·äï ·ã´·åà·äõ·àâ ·ä•·äì·àò·à∞·åç·äì·àà·äï·ç¢</p>
                        </div>
                        <div class="split-right">
                            <h4 id="t-p-s">·å•·â•·âÖ ·àò·àò·à™·ã´</h4>
                            <p id="t-po">·çñ·àà·â≤·ä´·ç£ ·å•·àã·âª·ç£ ·ãò·à®·äù·äê·âµ ·ä•·äì ·àÄ·à∞·â∞·äõ ·àò·à®·åÉ ·àõ·âÖ·à®·â• ·â†·å•·â•·âÖ ·ã®·â∞·ä®·àà·ä®·àà ·äê·ãç·ç¢ ·çñ·àä·à≤·ã´·âΩ·äï ·å•·à∞·ãç ·ä®·â∞·åà·äô ·â†·å•·â•·âÖ ·ã®·à≤·àµ·â∞·àù ·âÅ·å•·å•·à´·âΩ·äï ·ä•·äì ·â†·å•·â•·âÖ ·à≤·àµ·â∞·àõ·âΩ·äï ·â†·à´·àµ ·à∞·à≠ ·ä®·ä†·åà·àç·åç·àé·â≥·âΩ·äï ·à≤·àµ·â∞·àù ·àä·ã´·åç·ãµ·ãà·âµ ·ã≠·âΩ·àã·àç·ç¢</p>
                        </div>
                    </div>
                    <!-- Buttons inside Policy Content -->
                    <div style="display: flex; gap: 10px; margin-top: 5px; justify-content: center;">
                        <button class="btn-green btn-tiny" onclick="handleAgree()" id="btn-agree">·ä•·àµ·àõ·àõ·àà·àÅ</button>
                        <button class="btn-red btn-tiny" onclick="handleDisagree()" id="btn-disagree">·ä†·àç·àµ·àõ·àõ·àù</button>
                    </div>
                </div>

                <div class="blue-spacer"></div>
                
                <!-- Main Logo with FWA Brand -->
                <div class="brand-area" id="main-brand-logo">
                    <div class="side-logo-container left-logo"><img src="eagle_image.jpg" class="side-logo-img"></div>
                    <div class="complex-logo">
                        <div class="ring ring-blue"><div class="ring ring-red"><img src="lion_image.jpg" class="pos-item p-n"><img src="lion_image.jpg" class="pos-item p-s"><img src="lion_image.jpg" class="pos-item p-e"><img src="lion_image.jpg" class="pos-item p-w"><div class="ring ring-yellow"><div class="ring ring-green"></div></div></div></div>
                        <img src="lion_image.jpg" class="center-lion">
                    </div>
                    <div class="side-logo-container right-logo"><img src="dove_image.jpg" class="side-logo-img"></div>
                </div>
                
                <!-- FWA Brand Text -->
                <div class="fwa-brand">
                    <span class="fwa-letter letter-f">F</span>
                    <span class="fwa-letter letter-w">W</span>
                    <span class="fwa-letter letter-a">A</span>
                </div>

            </div>
            <div id="auth-section" style="display:none;">
                <p style="color: green; font-weight: bold; font-size: 14px;" id="t-thx">·ä†·åà·àç·åç·àé·â≥·âΩ·äï·äï ·àµ·àà·àò·à®·å° ·ä•·äì·àò·à∞·åç·äì·àà·äï! ·ä†·ã≤·àµ ·ä®·àÜ·äë ·ã≠·àò·ãù·åà·â°·ç£ ·ä´·àà·ãé·âµ ·ã≠·åç·â°·ç¢</p>
                <div style="display:flex; gap:10px;"><button class="btn-red" onclick="showAuth('signup')" id="btn-sh-s">·àò·àò·ãù·åà·â¢·ã´</button><button class="btn-red" onclick="showAuth('login')" id="btn-sh-l">·àò·åç·â¢·ã´</button></div>
                
                <div id="form-signup" style="display:none; margin-top:10px; border: 1px solid #dc3545; padding: 10px; border-radius: 5px;">
                    <div id="signup-step-1">
                        <h3 style="color:#dc3545;" id="h-s">·àù·ãù·åà·â£ (·ä†·ã≤·àµ ·â•·âª)</h3>
                        <input type="text" id="reg-name" placeholder="Full Name">
                        <input type="text" id="reg-phone" placeholder="Phone (09... 10 digits)">
                        <input type="email" id="reg-email" placeholder="Email (@gmail.com only)">
                        <div class="password-wrapper">
                            <input type="password" id="reg-pass" placeholder="Password (6 digits)">
                            <button class="toggle-password" type="button" onclick="togglePasswordVisibility('reg-pass', this)">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <button class="btn-green" onclick="preSignup()">Submit</button>
                    </div>
                    <div id="signup-step-2" style="display:none;">
                        <h3>Upload Profile Photo</h3>
                        <button class="btn-blue" onclick="promptUpload('profile')">Upload Photo</button>
                        <input type="file" id="file-profile" class="hidden-input" accept="image/*">
                        <button class="btn-green" onclick="finalSignup()">Complete Registration</button>
                    </div>
                </div>

                <div id="form-login" style="display:none; margin-top:10px; border: 1px solid #dc3545; padding: 10px; border-radius: 5px;">
                    <h3 style="color:#dc3545;" id="h-l">·àò·åç·â¢·ã´ (·äê·â£·à≠)</h3>
                    <input type="text" id="log-phone" placeholder="Phone">
                    <div class="password-wrapper">
                        <input type="password" id="log-pass" placeholder="Password">
                        <button class="toggle-password" type="button" onclick="togglePasswordVisibility('log-pass', this)">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <button class="btn-blue" onclick="doLogin()">Login</button>
                </div>
            </div>
        </div>

        <!-- 2. MAIN DASHBOARD -->
        <div id="view-home" class="section">
            <div style="display:flex; align-items:center; border-bottom:1px solid #ddd; padding-bottom:5px;">
                <!-- DASHBOARD HEADER LOGO (FULL LOGO) -->
                <div class="brand-area" style="transform: scale(0.25); width: 50px; height: 50px; margin-right: 10px;">
                    <div class="side-logo-container left-logo"><img src="eagle_image.jpg" class="side-logo-img"></div>
                    <div class="complex-logo">
                        <div class="ring ring-blue">
                            <div class="ring ring-red">
                                <div class="ring ring-yellow">
                                    <div class="ring ring-green"></div>
                                </div>
                            </div>
                        </div>
                        <img src="lion_image.jpg" class="center-lion">
                    </div>
                    <div class="side-logo-container right-logo"><img src="dove_image.jpg" class="side-logo-img"></div>
                </div>
                <h2 id="t-d" style="margin:0;">·ã≥·àΩ·â¶·à≠·ãµ</h2>
            </div>
            <div class="dash-layout" style="margin-top:10px;">
                <div class="dash-left">
                    <button class="btn-green" style="border-radius: 0;" id="btn-fc" onclick="toggleList('free')">·ã®·äê·çÉ ·ä†·åà·àç·åç·àé·âµ ·àõ·ãï·ä®·àç</button>
                    <div id="list-free" style="display:none; padding-left: 10px;">
                        <button class="btn-green btn-small" onclick="navTo('view-info')" id="btn-lv">·àò·à®·åÉ ·àò·àò·àç·ä®·âµ</button>
                        <button class="btn-green btn-small" onclick="navTo('post-info')" id="btn-lp">·àò·à®·åÉ ·àò·àà·å†·çç</button>
                        <button class="btn-green btn-small" onclick="handleGroupCreate()" id="btn-lg">·åç·à©·çï ·àò·çç·å†·à≠</button>
                        <button class="btn-green btn-small" onclick="showMyGroups()" id="btn-lmg">·ã®·çà·å†·à©·âµ·äï ·åç·à©·çï ·àà·àò·àò·àç·ä®·âµ</button>
                        <button class="btn-green btn-small" onclick="handleChatList()" id="btn-lc">·âª·âµ</button>
                        <button class="btn-green btn-small" onclick="navTo('feedback-sec')" id="btn-lf">·àà·çã·à≤·àç ·ãå·â• ·ä†·çï ·çà·å£·à™ ·ä†·àµ·â∞·ã´·ã®·âµ ·àà·àò·àµ·å†·âµ ·ä•·äì ·àà·àò·àò·àç·ä®·âµ</button>
                        <button class="btn-green btn-small" onclick="showUserList(false)" id="btn-lu">·â∞·å†·âÉ·àö·ãé·âΩ</button>
                        <button class="btn-green btn-small" onclick="checkAuth('business-sec')" id="btn-lb">·â¢·ãù·äê·àµ</button>
                        <button class="btn-green btn-small" onclick="handleLiveList()" id="btn-live-list">·àã·ã≠·â≠ ·ã≠·ä®·â≥·â∞·àâ (Watch Live)</button>
                        <button class="btn-green btn-small" style="background-color:#333;" onclick="checkAuth('report-inbox')" id="btn-admin-rep">·à™·çñ·à≠·âµ ·àò·âÄ·â†·ã´ (Admin)</button>
                    </div>
                    <button class="btn-yellow" style="border-radius: 0; margin-top: 10px;" id="btn-pc" onclick="toggleList('prem')">·ã®·ä≠·çç·ã´ ·çï·à™·àö·ã®·àù ·ä†·åà·àç·åç·àé·âµ</button>
                    <div id="list-prem" style="display:none; padding-left: 10px;">
                        <!-- Premium buttons now lead to Premium feed -->
                        <button class="btn-yellow btn-small" onclick="navTo('view-info'); alert(getTrans('msg-hv', 'Premium Video Feed (High Quality)'))">·å•·à´·âµ ·ã´·àà·ãç ·â™·ã≤·ãÆ</button>
                        <button class="btn-yellow btn-small" onclick="navTo('view-info'); alert(getTrans('msg-hn', 'Premium News Feed'))">·ãú·äì (High Quality)</button>
                        <button class="btn-yellow btn-small" onclick="navTo('view-info'); alert(getTrans('msg-hi', 'Premium Image Feed'))">·àù·àµ·àç (High Quality)</button>
                        <button class="btn-yellow btn-small" onclick="openPrem('ppt')" id="btn-pp">PowerPoint</button>
                        <button class="btn-yellow btn-small" onclick="openPrem('pdf')" id="btn-ppdf">PDF</button>
                    </div>
                </div>
                <div class="dash-right">
                    <!-- RIGHT PANEL LOGO (FULL LOGO) -->
                    <div class="brand-area" style="transform: scale(0.5);">
                        <div class="side-logo-container left-logo"><img src="eagle_image.jpg" class="side-logo-img"></div>
                        <div class="complex-logo">
                            <div class="ring ring-blue">
                                <div class="ring ring-red">
                                    <div class="ring ring-yellow">
                                        <div class="ring ring-green"></div>
                                    </div>
                                </div>
                            </div>
                            <img src="lion_image.jpg" class="center-lion">
                        </div>
                        <div class="side-logo-container right-logo"><img src="dove_image.jpg" class="side-logo-img"></div>
                    </div>
                </div>
            </div>
            <button class="btn-red" style="margin-top:20px;" onclick="doLogout()" id="btn-out">·ãç·å£</button>
        </div>

        <!-- 3. SECTIONS -->

        <!-- Post -->
        <div id="post-info" class="section">
            <h3 id="t-ph">·àò·à®·åÉ ·àò·àà·å†·çç</h3>
            <!-- Selection Buttons -->
            <div id="post-type-select">
                <button class="btn-blue" onclick="setupPost('text')" id="btn-pt">üìù Text</button>
                <button class="btn-blue" onclick="setupPost('image')" id="btn-pi">üì∑ Image</button>
                <button class="btn-blue" onclick="setupPost('video')" id="btn-pv">üé• Video</button>
                <button class="btn-blue" onclick="setupPost('audio')" id="btn-pa">üéôÔ∏è Audio</button>
            </div>
            
            <!-- Form Area (Initially Hidden) -->
            <div id="post-form-area" style="display:none; border-top:1px solid #ccc; margin-top:10px; padding-top:10px;">
                <p id="post-instr" style="color:blue; font-size:12px;"></p>
                <div style="display:flex; gap:5px; margin-bottom: 5px;">
                     <input type="text" id="p-title" placeholder="Title (Required)">
                     <button class="btn-red btn-tiny" onclick="clearPostForm()">·ä†·çÖ·ã≥ (Clear)</button>
                </div>
                <textarea id="p-content" placeholder="Details (Text Only)..." style="display:none;"></textarea>
                <input type="file" id="file-post" class="hidden-input">
                <button class="btn-green" onclick="submitPost()" id="btn-pnow">Post Now</button>
                <button class="btn-red btn-small" onclick="cancelPost()" style="margin-top:5px;">Back to Selection</button>
            </div>
            
            <button class="btn-red btn-small" onclick="goBack()" id="btn-bk1">Back</button>
        </div>

        <!-- View -->
        <div id="view-info" class="section">
            <h3 id="t-vh">·àò·à®·åÉ ·àò·àò·àç·ä®·âµ</h3>
            <div style="display:flex; gap:5px;">
                <button class="btn-blue btn-small" onclick="renderPosts('text')" id="btn-vt">Text</button>
                <button class="btn-blue btn-small" onclick="renderPosts('image')" id="btn-vi">Image</button>
                <button class="btn-blue btn-small" onclick="renderPosts('video')" id="btn-vv">Video</button>
                <button class="btn-blue btn-small" onclick="renderPosts('audio')" id="btn-va">Audio</button>
            </div>
            <div id="feed-container" style="margin-top:10px;"></div>
            <button class="btn-red btn-small" onclick="goBack()" id="btn-bk2">Back</button>
        </div>

        <!-- Admin Report Inbox -->
        <div id="report-inbox" class="section">
            <h3>·à™·çñ·à≠·âµ ·àò·âÄ·â†·ã´ (Admin)</h3>
            <div style="margin-bottom:10px; display:flex; flex-direction:column; gap:5px;">
                <button class="btn-blue btn-small" onclick="promptAdminAction('changePass')">1. Change Admin Pass</button>
                <button class="btn-blue btn-small" onclick="promptAdminAction('userStats')">2. User Activity Monitor</button>
                <button class="btn-green btn-small" onclick="promptAdminAction('premPay')">3. Premium Payment Receiver</button>
                <button class="btn-red btn-small" onclick="promptAdminAction('viewRep')">4. Receive Reports (Ban/Unban)</button>
                <button class="btn-blue btn-small" style="background-color:#6f42c1;" onclick="promptAdminAction('ctrlBiz')">5. Control Business (·ä≠·çà·âµ/·ãù·åã)</button>
                <button class="btn-blue btn-small" style="background-color:#fd7e14;" onclick="promptAdminAction('ctrlPdf')">6. Control PDF (·ä≠·çà·âµ/·ãù·åã)</button>
            </div>
            <!-- Container for dynamic admin content -->
            <div id="admin-dynamic-content" style="text-align:left; margin-top:10px;"></div>
            <button class="btn-red btn-small" onclick="goBack()">Back</button>
        </div>

        <!-- Business -->
        <div id="business-sec" class="section">
            <h3 id="t-bh">·â¢·ãù·äê·àµ ·àõ·ãï·ä®·àç</h3>
            <div class="business-balance-grid">
                <div class="balance-item">
                    <div class="balance-label">USD</div>
                    <div class="balance-value usd-bal" id="bal-usd">0.00</div>
                </div>
                <div class="balance-item">
                    <div class="balance-label">GBP</div>
                    <div class="balance-value gbp-bal" id="bal-gbp">0.00</div>
                </div>
                <div class="balance-item">
                    <div class="balance-label">EUR</div>
                    <div class="balance-value eur-bal" id="bal-eur">0.00</div>
                </div>
                <div class="balance-item">
                    <div class="balance-label">ETB</div>
                    <div class="balance-value etb-bal" id="bal-etb">0.00</div>
                </div>
                <div class="balance-item">
                    <div class="balance-label">FWA</div>
                    <div class="balance-value fwa-bal" id="bal-fwa">0.00</div>
                </div>
            </div>
            <div style="background:#f9f9f9; padding:10px; border:1px solid #ddd; margin-top:10px; border-radius:5px;">
                <p style="color:green; font-weight:bold;">Total (USD): <span id="bal-total">0.00</span></p>
                <p style="color:red; font-weight:bold;">Total (ETB): <span id="bal-total-etb">0.00</span></p>
                <p style="color:#9c27b0; font-weight:bold;">Total (FWA): <span id="bal-total-fwa">0.00</span></p>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
                <button class="btn-green" onclick="navTo('deposit-sec')" id="btn-bd">Deposit</button>
                <button class="btn-blue" onclick="document.getElementById('exchange-modal').style.display='flex'">Exchange & View Exchange</button>
                <button class="btn-blue" onclick="navTo('withdraw-sec')" id="btn-bw">Withdraw</button>
                <button class="btn-yellow" onclick="navTo('intl-sec')" id="btn-bi">International Purchase</button>
            </div>
            <button class="btn-blue" onclick="openFWAViewer()" id="btn-view-fwa" style="margin-top: 10px; background: #9c27b0;">View FWA Notes Images and Designs</button>
            <button class="btn-red btn-small" onclick="goBack()" id="btn-bk3" style="margin-top: 10px;">Back</button>
        </div>

        <!-- Deposit -->
        <div id="deposit-sec" class="section">
            <h3 id="t-dep-h">Deposit</h3>
            <div id="dep-step-1">
                <input type="number" id="dep-amt" placeholder="Amount">
                <select id="dep-cur">
                    <option value="ETB">ETB</option>
                    <option value="USD">USD</option>
                    <option value="GBP">GBP</option>
                    <option value="EUR">EUR</option>
                    <option value="FWA">FWA</option>
                </select>
                <button class="btn-green" onclick="preDeposit()">Submit</button>
            </div>
            <div id="dep-step-2" class="hidden">
                <button class="btn-blue" onclick="promptUpload('deposit')">Upload Receipt</button>
                <input type="file" id="file-deposit" class="hidden-input">
            </div>
            <button class="btn-red btn-small" onclick="goBack()" id="btn-bk4">Back</button>
        </div>

        <!-- Withdraw -->
        <div id="withdraw-sec" class="section">
            <h3 id="t-with-h">Withdraw</h3>
            <select id="w-cur">
                <option value="USD">From USD</option>
                <option value="GBP">From GBP</option>
                <option value="EUR">From EUR</option>
                <option value="ETB">From ETB</option>
                <option value="FWA">From FWA</option>
            </select>
            <select id="w-method" onchange="toggleReceiverInput()">
                <option value="Telebirr">Telebirr</option>
                <option value="CBE">CBE</option>
                <option value="PayPal">PayPal</option>
                <option value="FWA">FWA Transfer</option>
            </select>
            <!-- Telebirr specific styling -->
            <input type="text" id="w-dest" placeholder="Phone/Account" style="display:none; margin-bottom: 2px; font-size: 13px;">
            <input type="number" id="w-amt" placeholder="Amount">
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                <button class="btn-compact btn-blue" onclick="reqWithdraw()" id="btn-sub-with">Withdraw</button>
                <button class="btn-compact btn-red" onclick="goBack()" id="btn-bk5">Back</button>
            </div>
        </div>

        <!-- Intl Purchase -->
        <div id="intl-sec" class="section">
            <h3 id="t-intl-h">International Purchase</h3>
            <button class="btn-blue" onclick="document.getElementById('intl-list').style.display='block'">·àù·à®·å• (Select)</button>
            <div id="intl-list" class="hidden" style="margin-top:10px;">
                <p>Select Service to Pay:</p>
                <div style="display:flex; flex-direction:column; gap:5px;">
                    <button class="btn-blue btn-small" onclick="triggerIntlPay('ChatGPT', 20)">1. ChatGPT ($20)</button>
                    <button class="btn-blue btn-small" onclick="triggerIntlPay('Amazon', 0)">2. Amazon</button>
                    <button class="btn-blue btn-small" onclick="triggerIntlPay('Hosting', 10)">3. Hosting ($10)</button>
                    <button class="btn-blue btn-small" onclick="triggerIntlPay('Domain', 12)">4. Domain ($12)</button>
                    <button class="btn-blue btn-small" onclick="triggerIntlPay('Netflix', 15)">5. Netflix ($15)</button>
                </div>
                <input type="file" id="file-intl" class="hidden-input">
            </div>
            <button class="btn-red btn-small" onclick="goBack()" id="btn-bk6">Back</button>
        </div>

        <!-- Premium Pay -->
        <div id="prem-pricing" class="section">
            <h3 id="t-pay-h">Payment</h3>
            <button class="btn-green" onclick="pay(5)">Daily (5 ETB)</button>
            <button class="btn-green" onclick="pay(25)">Weekly (25 ETB)</button>
            <button class="btn-green" onclick="pay(30)">Monthly (30 ETB)</button>
            <div id="pay-up-area" style="display:none;">
                <button class="btn-blue" onclick="promptUpload('pay')">Upload Receipt</button>
                <input type="file" id="file-pay" class="hidden-input">
                <button class="btn-green" onclick="finPay()">Confirm</button>
            </div>
            <button class="btn-red btn-small" onclick="goBack()" id="btn-bk7">Back</button>
        </div>

        <!-- Feedback -->
        <div id="feedback-sec" class="section">
            <h3 id="t-fh">Feedback</h3>
            <p id="t-fb-sub">·àà·çã·à≤·àç ·ãå·â• ·ä†·çï ·çà·å£·à™ ·ä†·àµ·â∞·ã´·ã®·âµ ·àà·àò·àµ·å†·âµ</p>
            <button class="btn-blue" onclick="giveFb('text')" id="btn-fb-txt">Text</button>
            <button class="btn-yellow" onclick="openRealLiveStream()" id="btn-fb-live">
                <span class="live-indicator" id="fb-live-indicator"></span> Real Live
            </button>
            <hr>
            <button class="btn-blue" onclick="viewFbs()" id="btn-view-fb">View Feedbacks</button>
            <div id="fb-list"></div>
            <button class="btn-red btn-small" onclick="goBack()" id="btn-bk8">Back</button>
        </div>

        <!-- Chat / Group -->
        <div id="chat-sec" class="section">
            <h3 id="t-chat-h">Chat</h3>
            <div id="chat-box" style="height:200px; overflow-y:auto; border:1px solid #ddd; margin-bottom:5px;"></div>
            <input type="text" id="chat-in" placeholder="Message">
            <div style="display:flex; gap:5px; margin-top:5px;">
                <button class="btn-blue btn-small" onclick="sendChat('text')">Send</button>
                <button class="btn-yellow btn-small" onclick="promptUpload('chat-img')">üì∑</button>
                <button class="btn-yellow btn-small" onclick="promptUpload('chat-vid')">üé•</button>
                <button class="btn-yellow btn-small" onclick="promptUpload('chat-aud')">üéôÔ∏è</button>
                <button class="btn-red btn-small" onclick="openRealLiveStream()">
                    <span class="live-indicator" id="chat-live-indicator"></span> üî¥
                </button>
            </div>
            <div style="margin-top:5px;">
                <button class="btn-green btn-small" onclick="showReceivedShares()">·à∏·à≠ ·ã®·â∞·ã∞·à®·åà·àç·ãé·âµ·äï ·ã≠·âÄ·â†·àâ (Received Shares)</button>
            </div>
            <input type="file" id="file-chat" class="hidden-input">
            <button class="btn-red btn-small" onclick="goBack()" id="btn-bk9">Back</button>
        </div>

        <!-- Received Shares View -->
        <div id="received-shares-sec" class="section">
            <h3>Shared With You</h3>
            <div id="shared-list-area"></div>
            <button class="btn-red btn-small" onclick="goBack()">Back</button>
        </div>

        <!-- User List (Read Only) -->
        <div id="user-list-sec" class="section">
            <h3 id="t-users-h">Users</h3>
            <button class="btn-green btn-small" onclick="filterMessages()" style="margin-bottom:10px;">·àò·àç·ä•·ä≠·âµ ·â∞·âÄ·â†·àç (Receive Messages)</button>
            <div id="ul-cont"></div>
            <button class="btn-green" id="btn-grp-done" style="display:none;" onclick="createGroup()">Done (5+)</button>
            <button class="btn-green" id="btn-share-done" style="display:none;" onclick="executeShare()">OK (Share)</button>
            <button class="btn-red btn-small" onclick="goBack()" id="btn-bk10">Back</button>
        </div>

        <!-- Live Users List -->
        <div id="view-live-list" class="section">
            <h3>Live Users</h3>
            <div id="live-list-cont"></div>
            <button class="btn-red btn-small" onclick="goBack()">Back</button>
        </div>

        <!-- My Groups -->
        <div id="my-groups-sec" class="section">
            <h3 id="t-mygrp-h">My Groups</h3>
            <div id="grp-list"></div>
            <button class="btn-red btn-small" onclick="goBack()" id="btn-bk11">Back</button>
        </div>

        <!-- Live View (Real Camera) - UPDATED -->
        <div id="view-live" class="section">
            <div class="live-stream-container">
                <div class="live-overlay-top">
                    <span class="live-badge">LIVE</span>
                    <span class="live-viewers-badge" id="live-viewers-count">üëÅÔ∏è 0</span>
                </div>
                <div class="floating-hearts">
                    <div class="heart-icon" style="left:10%; animation-delay:0s;">‚ù§Ô∏è</div>
                    <div class="heart-icon" style="left:30%; animation-delay:0.5s;">üî•</div>
                    <div class="heart-icon" style="left:70%; animation-delay:1.2s;">‚ù§Ô∏è</div>
                    <div class="heart-icon" style="left:50%; animation-delay:2s;">üëç</div>
                </div>
                <video id="live-video-element" autoplay playsinline style="width:100%; height:100%; object-fit:cover;"></video>
                <div class="live-overlay-bottom">
                    <div id="live-chat-box" style="height:100px; overflow-y:auto; color:white; text-shadow:1px 1px 2px black; font-size:12px; margin-bottom:5px;"></div>
                    <div style="display:flex; gap:5px;">
                        <input type="text" id="live-chat-input" placeholder="Say something..." style="background:rgba(255,255,255,0.5); border:none; color:white;">
                        <button class="btn-blue btn-tiny" onclick="sendLiveChat()">Send</button>
                    </div>
                </div>
            </div>
            
            <div class="live-controls">
                <button class="btn-green" onclick="startRealLiveStream()">Start Live</button>
                <button class="btn-red" onclick="stopRealLiveStream()">Stop Live</button>
                <button class="btn-yellow" onclick="toggleLiveAudio()" id="live-audio-btn">üîá Mute</button>
            </div>
            <button class="btn-red" onclick="stopRealLiveStream(); goBack();" style="margin-top: 15px;">Exit</button>
        </div>

        <!-- Profile -->
        <div id="view-profile" class="section">
            <h2 id="t-prof">·ã®·åç·àç ·àõ·ãï·ä®·àç</h2>
            <div style="text-align:left;">
                <p>Phone: <b id="prof-phone"></b></p>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                    <button class="btn-blue" onclick="showProfileEdit('name')" id="btn-ch-name">Change Name</button>
                    <button class="btn-blue" onclick="showProfileEdit('pass')" id="btn-ch-pass">Change Password</button>
                    <button class="btn-blue" onclick="showProfileEdit('photo')" id="btn-ch-photo">Change Photo</button>
                    <button class="btn-red" onclick="deleteAccount()" style="background-color:black;" id="btn-del-acc">Delete Account</button>
                </div>
                
                <!-- Hidden Edit Forms -->
                <div id="prof-edit-area" style="display:none; margin-top:10px; border:1px solid #ccc; padding:10px;">
                    <div id="edit-name-form" style="display:none;">
                        <h4>Change Name</h4>
                        <input type="text" id="prof-name-edit" placeholder="New Name">
                        <button class="btn-green" onclick="saveProfile('name')">Update Name</button>
                    </div>
                    <div id="edit-pass-form" style="display:none;">
                        <h4>Change Password</h4>
                        <input type="password" id="old-pass" placeholder="Old Password">
                        <input type="password" id="new-pass" placeholder="New Password">
                        <input type="password" id="conf-pass" placeholder="Confirm Password">
                        <button class="btn-green" onclick="saveProfile('pass')">Update Password</button>
                    </div>
                    <div id="edit-photo-form" style="display:none;">
                        <h4>Change Photo</h4>
                        <button class="btn-blue" onclick="promptUpload('profile-edit')">Select Photo</button>
                        <input type="file" id="file-profile-edit" class="hidden-input" accept="image/*">
                        <button class="btn-green" onclick="saveProfile('photo')">Update Photo</button>
                    </div>
                </div>
            </div>
            <button class="btn-red" onclick="goBack()" id="btn-prof-out" style="margin-top:15px;">Back</button>
        </div>

    </div>

    <!-- Hidden Input for Comments -->
    <input type="file" id="comment-file-input" class="hidden-input">
    <input type="file" id="universal-file" class="hidden-input">

    <!-- Footer Wrapper with Marquee Below -->
    <div class="footer-wrapper">
        <div class="bottom-nav">
            <button class="nav-btn nav-home" onclick="navTab('home')"><i class="fas fa-home"></i> <span id="nav-h">Home</span></button>
            <button class="nav-btn nav-live" onclick="navTab('live')">
                <i class="fas fa-broadcast-tower"></i> 
                <span id="nav-l">Live</span>
                <span class="live-indicator" id="nav-live-indicator" style="position: absolute; top: 5px; right: 5px;"></span>
            </button>
            <button class="nav-btn nav-profile" onclick="navTab('profile')"><i class="fas fa-user"></i> <span id="nav-p">Profile</span></button>
        </div>
        <div class="bottom-marquee">
            <span>·çã·à≤·àç ·ãå·â• ·ä†·çï - Fasil Web App (Service Center) | üî• Firebase Online | <span id="live-status-text">üî¥ Offline</span></span>
        </div>
    </div>

    <!-- FIREBASE SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, query, orderBy, onSnapshot, doc, updateDoc, increment } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAWS8PJ0kmu56hixesxV1KrMH8NRciH6U0",
            authDomain: "fasil-web-app-3a732.firebaseapp.com",
            projectId: "fasil-web-app-3a732",
            storageBucket: "fasil-web-app-3a732.appspot.com",
            messagingSenderId: "239133072986",
            appId: "1:239133072986:web:0dcbd768e1e916b9b64263"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        window.firebaseTools = {
            db: db,
            savePost: async function(postData) {
                try {
                    const docRef = await addDoc(collection(db, "posts"), { ...postData, timestamp: new Date() });
                    return { success: true, id: docRef.id };
                } catch (error) { return { success: false, error: error }; }
            },
            getPosts: async function() {
                try {
                    const q = query(collection(db, "posts"), orderBy("timestamp", "desc"));
                    const querySnapshot = await getDocs(q);
                    const posts = [];
                    querySnapshot.forEach((doc) => posts.push({ id: doc.id, ...doc.data() }));
                    return posts;
                } catch (error) { return []; }
            },
            updatePostStats: async function(postId, stats) {
                try {
                    const postRef = doc(db, "posts", postId);
                    await updateDoc(postRef, stats);
                    return { success: true };
                } catch (error) { return { success: false }; }
            },
            saveUser: async function(userData) {
                try {
                    const docRef = await addDoc(collection(db, "users"), { ...userData, createdAt: new Date() });
                    return { success: true, id: docRef.id };
                } catch (error) { return { success: false, error: error }; }
            },
            getUsers: async function() {
                try {
                    const querySnapshot = await getDocs(collection(db, "users"));
                    const users = [];
                    querySnapshot.forEach((doc) => users.push(doc.data()));
                    return users;
                } catch (error) { return []; }
            },
            updateUserBalance: async function(userId, currency, amount) {
                try {
                    const userRef = doc(db, "users", userId);
                    await updateDoc(userRef, { [`bal${currency}`]: increment(amount) });
                    return { success: true };
                } catch (error) { return { success: false, error: error }; }
            },
            setupRealtimePosts: function(callback) {
                const q = query(collection(db, "posts"), orderBy("timestamp", "desc"));
                return onSnapshot(q, (snapshot) => {
                    const posts = [];
                    snapshot.forEach((doc) => posts.push({ id: doc.id, ...doc.data() }));
                    callback(posts);
                });
            },
            setupLiveStreamStatus: function(callback) {
                const q = query(collection(db, "liveStream"), orderBy("timestamp", "desc"));
                return onSnapshot(q, (snapshot) => {
                    const liveStreams = [];
                    snapshot.forEach((doc) => liveStreams.push({ id: doc.id, ...doc.data() }));
                    callback(liveStreams);
                });
            },
            saveLiveStreamStatus: async function(streamData) {
                try {
                    const docRef = await addDoc(collection(db, "liveStream"), { ...streamData, timestamp: new Date() });
                    return { success: true, id: docRef.id };
                } catch (error) { return { success: false, error: error }; }
            },
            testConnection: async function() {
                try { await addDoc(collection(db, "test"), { test: true, time: new Date() }); return true; } 
                catch (error) { return false; }
            }
        };
        
        window.firebaseTools.testConnection().then(success => {
            const statusEl = document.getElementById('firebase-status');
            if(success) {
                statusEl.textContent = 'üî• Online';
                statusEl.className = 'firebase-status firebase-online';
                statusEl.style.display = 'block'; 
            } else {
                statusEl.textContent = 'üî¥ Offline';
                statusEl.className = 'firebase-status firebase-offline';
                statusEl.style.display = 'block'; 
            }
        });
    </script>

    <script>
        // --- DATA ---
        let user = JSON.parse(localStorage.getItem('fg_user')) || null;
        let users = JSON.parse(localStorage.getItem('fg_users')) || [];
        let posts = JSON.parse(localStorage.getItem('fg_posts')) || [];
        let deletedPostIds = JSON.parse(localStorage.getItem('fg_deleted_posts')) || [];
        let sharedItems = JSON.parse(localStorage.getItem('fg_shared')) || [];
        let reports = JSON.parse(localStorage.getItem('fg_reports')) || [];
        
        let groups = JSON.parse(localStorage.getItem('fg_groups')) || [];
        let chats = JSON.parse(localStorage.getItem('fg_chats')) || {};
        let feedbacks = JSON.parse(localStorage.getItem('fg_fbs')) || [];
        let adminPass = localStorage.getItem('fg_admin_pass') || 'abc123456abc';
        let bizStatus = localStorage.getItem('fg_biz_status') || 'open'; 
        let pdfStatus = localStorage.getItem('fg_pdf_status') || 'open'; 
        
        let RATES = JSON.parse(localStorage.getItem('fg_rates')) || { USD: 1, ETB: 120, GBP: 0.9, EUR: 0.95, FWA: 50 };
        
        let lang = 'am';
        let hasAgreed = false; // Important for policy logic
        let activePostType = 'text';
        let activeChat = null;
        let activeCommentPostId = null;
        let pendingAct = null;
        let uploadTarget = '';
        let liveStream = null;
        let pendingAdminAction = null;
        let firebaseUnsubscribe = null;
        let pendingDeposit = null;
        let pendingIntlCost = 0;
        let liveStreamActive = false;
        let liveViewers = 0;
        let liveViewersInterval = null;
        let liveAudioMuted = false;
        let pendingReportId = null;

        // --- SPLASH SCREEN & INIT ---
        window.onload = function() {
            setTimeout(function() {
                document.getElementById('splash-screen').style.display = 'none';
            }, 3000);
            
            if(user && user.balFWA === undefined) {
                user.balFWA = 0;
                localStorage.setItem('fg_user', JSON.stringify(user));
            }
            updateLiveIndicators();
            upBal();
        };

        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => { loadFirebaseData(); }, 2000);
        });

        async function loadFirebaseData() {
            if(!window.firebaseTools) return;
            try {
                const firebasePosts = await window.firebaseTools.getPosts();
                if(firebasePosts.length > 0) {
                    posts = firebasePosts.filter(p => !deletedPostIds.includes(p.id));
                    localStorage.setItem('fg_posts', JSON.stringify(posts));
                }
                const firebaseUsers = await window.firebaseTools.getUsers();
                if(firebaseUsers.length > 0) {
                    users = firebaseUsers;
                    localStorage.setItem('fg_users', JSON.stringify(users));
                }
                if(window.firebaseTools.setupRealtimePosts) {
                    firebaseUnsubscribe = window.firebaseTools.setupRealtimePosts((updatedPosts) => {
                        posts = updatedPosts.filter(p => !deletedPostIds.includes(p.id));
                        if(document.getElementById('view-info').classList.contains('show')) {
                            renderPosts(activePostType);
                        }
                    });
                }
                if(window.firebaseTools.setupLiveStreamStatus) {
                    window.firebaseTools.setupLiveStreamStatus((liveStreams) => {
                        if(liveStreams.length > 0) {
                            const latestStream = liveStreams[0];
                            if(latestStream.isActive) updateLiveIndicators(true);
                            else updateLiveIndicators(false);
                        }
                    });
                }
            } catch (error) { console.error("Firebase error:", error); }
        }

        // --- LANGUAGE DICTIONARY (Expanded & 100% Integrated) ---
        const translations = {
            'am': {
                'msg-agree-first': '·ãç·ãµ ·ã∞·äï·â†·äõ·âΩ·äï ·ä•·â£·ä≠·ãé ·àò·åÄ·àò·à≠·ã´ ·çñ·àä·à≤ ·â†·â∞·äï·äï ·â†·àò·äï·ä´·âµ ·çñ·àä·à≤·ã´·âΩ·äï ·ä†·äï·â•·â†·ãç ·ä•·àµ·àõ·àõ·àà·àÅ ·â†·â∞·äï ·â†·àò·äï·ä´·âµ ·çñ·àä·à≤·ã´·âΩ·äï ·ã≠·àµ·àõ·àô·ç¢',
                'msg-login-first': '·ä•·â£·ä≠·ãé ·àò·åÄ·àò·à≠·ã´ ·ã≠·åç·â°·ç¢ ·ä†·ã≤·àµ ·ä®·àÜ·äë ·ä•·â£·ä≠·ãé ·àò·åÄ·àò·à≠·ã´ ·ã≠·àò·ãù·åà·â°·ç¢',
                'msg-policy-decline': '·çñ·àä·à≤·ã´·âΩ·äï ·ä´·àç·â∞·àµ·àõ·àô ·ä†·åà·àç·åç·àé·â≥·âº·äï ·àò·å†·âÄ·àù ·ä†·ã≠·âΩ·àâ·àù·ç¢ ·ä•·äì·àò·à∞·åç·äì·àà·äï·ç¢',
                'msg-success': '·â∞·à≥·ä≠·â∑·àç (Success)!',
                'msg-posted': '·â∞·à≥·ä≠·â∑·àç (Posted Successfully)!',
                'msg-under-const': '·ãç·ãµ ·ã∞·äï·â†·äû·âª·âΩ·äï ·â†·âÖ·à≠·â• ·âÄ·äï ·ã≠·å†·â•·âÅ·äï ·â†·åç·äï·â£·â≥ ·àã·ã≠ ·äê·ãç·ç¢',
                'msg-biz-closed': '·ãç·ãµ ·ã∞·äï·â†·äû·âª·âΩ·äï·ç¢ ·ã®·â¥·ä≠·äí·ä≠ ·ã®·ã∞·àÖ·äï·äê·âµ ·ä•·äì ·ã®·àÖ·åç ·åâ·ã≥·ã≠ ·àµ·àã·àç·å®·à®·àµ·äï ·ä•·â£·ä≠·ãé ·ä•·àµ·ä®·àù·äï·å®·à≠·àµ ·â†·âµ·ä•·åç·àµ·âµ ·ã≠·å†·â•·âÅ·äï ·â†·âÖ·à≠·â• ·âÄ·äï ·ã≠·å†·â•·âÅ·äï ·ä•·äì·àò·à∞·åç·äì·àà·äï·ç¢',
                'msg-err-file': 'File Required',
                'head-txt': '·ä•·äï·ä≥·äï ·ãà·ã∞ ·çã·à≤·àç ·ãå·â• ·ä†·çï ·ã®·ä†·åà·àç·åç·àé·âµ ·àõ·ãï·ä®·àç ·â†·ã∞·àÖ·äì ·àò·å°!',
                'btn-agree': '·ä•·àµ·àõ·àõ·àà·àÅ',
                'btn-disagree': '·ä†·àç·àµ·àõ·àõ·àù',
                't-w-s': '·ä•·äï·ä≥·äï ·ã∞·àÖ·äì ·àò·å°',
                't-p-s': '·å•·â•·âÖ ·àò·àò·à™·ã´',
                't-in': '·ã≠·àÖ ·ã®·çã·à≤·àç ·ãå·â• ·ä†·çï ·â†·â∞·ä†·àõ·äí·äê·âµ ·ä•·äï·ã≤·à∞·à´ ·ã®·â∞·âÄ·ã®·à∞ ·ã≤·åÇ·â≥·àç ·àò·à®·åÉ ·àò·åã·à™·ã´ ·äê·ãç·ç¢',
                't-po': '·çñ·àà·â≤·ä´·ç£ ·å•·àã·âª·ç£ ·ãò·à®·äù·äê·âµ ·ä•·äì ·àÄ·à∞·â∞·äõ ·àò·à®·åÉ ·àõ·âÖ·à®·â• ·â†·å•·â•·âÖ ·ã®·â∞·ä®·àà·ä®·àà ·äê·ãç·ç¢',
                'btn-toggle-policy': '·çñ·àä·à≤ (Policy)',
                't-thx': '·ä†·åà·àç·åç·àé·â≥·âΩ·äï·äï ·àµ·àà·àò·à®·å° ·ä•·äì·àò·à∞·åç·äì·àà·äï! ·ä†·ã≤·àµ ·ä®·àÜ·äë ·ã≠·àò·ãù·åà·â°·ç£ ·ä´·àà·ãé·âµ ·ã≠·åç·â°·ç¢',
                'btn-sh-s': '·àò·àò·ãù·åà·â¢·ã´',
                'btn-sh-l': '·àò·åç·â¢·ã´',
                't-d': '·ã≥·àΩ·â¶·à≠·ãµ',
                'btn-fc': '·ã®·äê·çÉ ·ä†·åà·àç·åç·àé·âµ ·àõ·ãï·ä®·àç',
                'btn-pc': '·ã®·ä≠·çç·ã´ ·çï·à™·àö·ã®·àù ·ä†·åà·àç·åç·àé·âµ',
                'btn-lv': '·àò·à®·åÉ ·àò·àò·àç·ä®·âµ',
                'btn-lp': '·àò·à®·åÉ ·àò·àà·å†·çç',
                'btn-lg': '·åç·à©·çï ·àò·çç·å†·à≠',
                'btn-lmg': '·ã®·çà·å†·à©·âµ·äï ·åç·à©·çï ·àà·àò·àò·àç·ä®·âµ',
                'btn-lc': '·âª·âµ',
                'btn-lf': '·àà·çã·à≤·àç ·ãå·â• ·ä†·çï ·çà·å£·à™ ·ä†·àµ·â∞·ã´·ã®·âµ ·àà·àò·àµ·å†·âµ ·ä•·äì ·àà·àò·àò·àç·ä®·âµ',
                'btn-lu': '·â∞·å†·âÉ·àö·ãé·âΩ',
                'btn-lb': '·â¢·ãù·äê·àµ',
                'btn-live-list': '·àã·ã≠·â≠ ·ã≠·ä®·â≥·â∞·àâ (Watch Live)',
                'btn-admin-rep': '·à™·çñ·à≠·âµ ·àò·âÄ·â†·ã´ (Admin)',
                'btn-pp': 'PowerPoint',
                'btn-ppdf': 'PDF',
                'btn-out': '·ãç·å£',
                't-ph': '·àò·à®·åÉ ·àò·àà·å†·çç',
                't-vh': '·àò·à®·åÉ ·àò·àò·àç·ä®·âµ',
                't-bh': '·â¢·ãù·äê·àµ ·àõ·ãï·ä®·àç',
                't-prof': '·ã®·åç·àç ·àõ·ãï·ä®·àç',
                'nav-h': 'Home',
                'nav-l': 'Live',
                'nav-p': 'Profile',
                'btn-ch-name': 'Change Name',
                'btn-ch-pass': 'Change Password',
                'btn-ch-photo': 'Change Photo',
                'btn-del-acc': 'Delete Account'
            },
            'en': {
                'msg-agree-first': 'Dear customer, please first click the Policy button, read our policy, and click I Agree to accept our policy.',
                'msg-login-first': 'Please login first. If new, please register first.',
                'msg-policy-decline': 'You cannot use our service without agreeing. Thank you.',
                'msg-success': 'Success!',
                'msg-posted': 'Posted Successfully!',
                'msg-under-const': 'Dear customers, wait for us soon, under construction.',
                'msg-biz-closed': 'Dear customers, we are closing for technical/legal reasons. Please wait patiently.',
                'msg-err-file': 'File Required',
                'head-txt': 'Welcome to Fasil Web App Service Center!',
                'btn-agree': 'I Agree',
                'btn-disagree': 'I Disagree',
                't-w-s': 'Welcome',
                't-p-s': 'Strict Policy',
                't-in': 'This is Fasil Web App, a digital info sharing platform designed for reliability.',
                't-po': 'Politics, hate speech, racism, and fake news are strictly prohibited.',
                'btn-toggle-policy': 'Policy',
                't-thx': 'Thank you for choosing us! Sign up if new, Login if existing.',
                'btn-sh-s': 'Register',
                'btn-sh-l': 'Login',
                't-d': 'Dashboard',
                'btn-fc': 'Free Service Center',
                'btn-pc': 'Premium Payment Service',
                'btn-lv': 'View Info',
                'btn-lp': 'Post Info',
                'btn-lg': 'Create Group',
                'btn-lmg': 'View My Groups',
                'btn-lc': 'Chat',
                'btn-lf': 'Feedback to Creator',
                'btn-lu': 'Users',
                'btn-lb': 'Business',
                'btn-live-list': 'Watch Live',
                'btn-admin-rep': 'Report Inbox (Admin)',
                'btn-pp': 'PowerPoint',
                'btn-ppdf': 'PDF',
                'btn-out': 'Logout',
                't-ph': 'Post Info',
                't-vh': 'View Info',
                't-bh': 'Business Center',
                't-prof': 'Profile Center',
                'nav-h': 'Home',
                'nav-l': 'Live',
                'nav-p': 'Profile',
                'btn-ch-name': 'Change Name',
                'btn-ch-pass': 'Change Password',
                'btn-ch-photo': 'Change Photo',
                'btn-del-acc': 'Delete Account'
            },
            'or': {
                'msg-agree-first': 'Kabajamoo maamila, duraan dursee button imaammataa tuquun, imaammata keenya dubbisaa, sana booda waliigaleera jedhaa.',
                'msg-login-first': 'Maaloo dura seeni. Yoo haaraa taate dura galmaa\'i.',
                'msg-policy-decline': 'Imaammata keenyatti osoo hin waliigalin tajaajila keenya fayyadamuu hin dandeessan. Galatoomaa.',
                'msg-success': 'Milkaa\'eera!',
                'msg-posted': 'Milkaa\'inaan Maxxanfame!',
                'msg-under-const': 'Kabajamoo maamiltoota, dhihootti nu eegaa, ijaarsa irra jira.',
                'msg-biz-closed': 'Sababa teeknikaa fi seeraatiif cufameera. Obsaan nu eegaa.',
                'msg-err-file': 'Faayiliin barbaachisaadha',
                'head-txt': 'Baga nagaan gara Fasil Web App dhuftan!',
                'btn-agree': 'Waliigaleera',
                'btn-disagree': 'Waliihingalu',
                't-w-s': 'Baga Nagaan Dhuftan',
                't-p-s': 'Seera Cimaa',
                't-in': 'Kuni Fasil Web App, waltajjii odeeffannoo dijitaalaa amansiisaa ta\'eedha.',
                't-po': 'Siyaasa, jibbiinsa, sanyummaa fi oduu sobaa dorkaa dha.',
                'btn-toggle-policy': 'Imaammata (Policy)',
                't-thx': 'Galatoomaa! Yoo haaraa taatan galmaa\'aa, yoo duraan jiraattan seenaa.',
                'btn-sh-s': 'Galmaa\'i',
                'btn-sh-l': 'Seeni',
                't-d': 'Daashbooardii',
                'btn-fc': 'Tajaajila Bilisaa',
                'btn-pc': 'Tajaajila Kaffaltii',
                'btn-lv': 'Odeeffannoo Ilaaluu',
                'btn-lp': 'Odeeffannoo Maxxansuu',
                'btn-lg': 'Gare Uumuu',
                'btn-lmg': 'Gare Koo Ilaaluu',
                'btn-lc': 'Haasaa',
                'btn-lf': 'Yaada Kennuu',
                'btn-lu': 'Fayyadamtoota',
                'btn-lb': 'Daldala',
                'btn-live-list': 'Live Ilaaluu',
                'btn-admin-rep': 'Gabaasa (Admin)',
                'btn-pp': 'PowerPoint',
                'btn-ppdf': 'PDF',
                'btn-out': 'Ba\'i',
                't-ph': 'Odeeffannoo Maxxansuu',
                't-vh': 'Odeeffannoo Ilaaluu',
                't-bh': 'Giddugala Daldalaa',
                't-prof': 'Profaayilii',
                'nav-h': 'Home',
                'nav-l': 'Live',
                'nav-p': 'Profile',
                'btn-ch-name': 'Maqaa Jijjiiru',
                'btn-ch-pass': 'Jecha Darbii Jijjiiru',
                'btn-ch-photo': 'Suuraa Jijjiiru',
                'btn-del-acc': 'Akkaawuntii Haquu'
            },
            'tg': {
                'msg-agree-first': '·ä≠·â°·à´·âµ ·ãì·àõ·ãä·àç·ç£ ·âÖ·ãµ·àù ·äê·â≤ ·çñ·àä·à≤ ·ãù·â•·àç ·â†·â∞·äï ·â•·àù·å•·ãã·âï ·çñ·àä·à≤·äì ·ä£·äï·â¢·â•·ä©·àù ·ã≠·à∞·àõ·àõ·ãï ·â•·àù·â£·àç ·ä£·à®·åã·åç·åπ·ç¢',
                'msg-login-first': '·â†·ã≠·ãò·ä¶·àù ·âÖ·ãµ·àù ·ã≠·ä•·â∞·ãâ·ç¢ ·àì·ãµ·àΩ ·ä•·äï·â∞·äæ·ã≠·äñ·àù ·â∞·àò·ãù·åà·â°·ç¢',
                'msg-policy-decline': '·çñ·àä·à≤·äì ·ä•·äï·â∞·ãò·ã≠·â∞·à∞·àõ·àö·ãï·ä©·àù ·ä£·åà·àç·åç·àé·âµ·äì ·ä≠·âµ·å•·âÄ·àô ·ä£·ã≠·âµ·äΩ·ä•·àâ·äï·ç¢ ·ã®·âÄ·äï·ã®·àç·äì·ç¢',
                'msg-success': '·â∞·à∞·à™·àë!',
                'msg-posted': '·â•·ãì·ãà·âµ ·â∞·àà·å¢·çâ!',
                'msg-under-const': '·ä≠·â°·à´·âµ ·ãì·àõ·ãä·àç ·ä£·â• ·âÄ·à®·â£ ·åç·ãú ·â∞·å∏·â†·ã©·äì·ç£ ·ä£·â• ·àÖ·äï·åª ·ã≠·à≠·ä®·â•·ç¢',
                'msg-biz-closed': '·â•·àù·äΩ·äï·ã´·âµ ·â¥·ä≠·äí·ä≠·äï ·àï·åç·äï ·â∞·ãì·åΩ·ã© ·ä£·àé·ç¢ ·â•·âµ·ãï·åç·àµ·â≤ ·â∞·å∏·â†·ã©·äì·ç¢',
                'msg-err-file': '·çã·ã≠·àç ·ã®·ãµ·àä',
                'head-txt': '·ä•·äï·âã·ãï ·äì·â• ·çã·à≤·àç ·ãå·â• ·ä†·çï ·â•·ã∞·àì·äï ·àò·å∏·ä©·àù!',
                'btn-agree': '·ã≠·à∞·àõ·àõ·ãï',
                'btn-disagree': '·ä†·ã≠·à∞·àõ·àõ·ãï·äï',
                't-w-s': '·ä•·äï·âã·ãï ·â•·ã∞·àì·äï ·àò·å∏·ä©·àù',
                't-p-s': '·åΩ·äë·ãï ·àò·àù·à≠·àí',
                't-in': '·ä•·ãö ·çã·à≤·àç ·ãå·â• ·ä†·çï ·ä•·ã©·ç£ ·äï·àì·âÇ ·àì·â†·à¨·â≥ ·ãù·â∞·ã≥·àà·ãà ·ä•·ã©·ç¢',
                't-po': '·çñ·àà·â≤·ä´·ç£ ·åΩ·àç·ä¢·ç£ ·ãò·à®·äù·äê·âµ·äï ·àì·à∂·âµ ·àì·â†·à¨·â≥·äï ·ä©·àç·ä©·àç ·ä•·ã©·ç¢',
                'btn-toggle-policy': '·çñ·àä·à≤',
                't-thx': '·ã®·âÄ·äï·ã®·àç·äì! ·àì·ãµ·àΩ ·ä•·äï·â∞·äæ·äï·ä©·àù ·â∞·àò·ãù·åà·â°·ç£ ·äê·â£·à≠ ·ä•·äï·â∞·äæ·äï·ä©·àù ·ä•·â∞·ãâ·ç¢',
                'btn-sh-s': '·àò·àò·ãù·åà·â¢',
                'btn-sh-l': '·àò·ä•·â∞·ãä',
                't-d': '·ã≥·àΩ·â¶·à≠·ãµ',
                'btn-fc': '·äì·åª ·ä£·åà·àç·åç·àé·âµ',
                'btn-pc': '·äì·ã≠ ·ä≠·çç·àä·âµ ·ä£·åà·àç·åç·àé·âµ',
                'btn-lv': '·àì·â†·à¨·â≥ ·äï·àù·à≠·ä£·ã≠',
                'btn-lp': '·àì·â†·à¨·â≥ ·äï·àù·àç·å£·çç',
                'btn-lg': '·åç·à©·çï ·äï·àù·çç·å£·à≠',
                'btn-lmg': '·åç·à©·çï ·äï·àù·à≠·ä£·ã≠',
                'btn-lc': '·âª·âµ',
                'btn-lf': '·à≠·ä•·ã≠·â∂ ·äï·àù·àÉ·â•',
                'btn-lu': '·â∞·å†·âÄ·àù·â≤',
                'btn-lb': '·â¢·ãù·äê·àµ',
                'btn-live-list': 'Live ·àù·ä≠·âµ·â≥·àç',
                'btn-admin-rep': '·à™·çñ·à≠·âµ (Admin)',
                'btn-pp': 'PowerPoint',
                'btn-ppdf': 'PDF',
                'btn-out': '·ãç·åª·ä•',
                't-ph': '·àì·â†·à¨·â≥ ·àù·àç·å£·çç',
                't-vh': '·àì·â†·à¨·â≥ ·àù·à≠·ä£·ã≠',
                't-bh': '·â¢·ãù·äê·àµ ·àõ·ä•·ä®·àç',
                't-prof': '·ãç·àç·âÉ·ãä ·àõ·ä•·ä®·àç',
                'nav-h': 'Home',
                'nav-l': 'Live',
                'nav-p': 'Profile',
                'btn-ch-name': '·àΩ·àù ·âÄ·ã≠·à≠',
                'btn-ch-pass': '·çì·àµ·ãà·à≠·ãµ ·âÄ·ã≠·à≠',
                'btn-ch-photo': '·çé·â∂ ·âÄ·ã≠·à≠',
                'btn-del-acc': '·ä£·ä´·ãç·äï·âµ ·à∞·à≠·ãù'
            },
            'fr': {
                'msg-agree-first': 'Cher client, veuillez d\'abord cliquer sur le bouton Politique, lire notre politique, et cliquer sur J\'accepte.',
                'msg-login-first': 'Veuillez vous connecter d\'abord. Si nouveau, inscrivez-vous.',
                'msg-policy-decline': 'Vous ne pouvez pas utiliser notre service sans accepter. Merci.',
                'msg-success': 'Succ√®s!',
                'msg-posted': 'Publi√© avec succ√®s!',
                'msg-under-const': 'Chers clients, attendez-nous bient√¥t, en construction.',
                'msg-biz-closed': 'Ferm√© pour raisons techniques/l√©gales. Veuillez patienter.',
                'msg-err-file': 'Fichier requis',
                'head-txt': 'Bienvenue au Centre de Service Fasil Web App!',
                'btn-agree': 'J\'accepte',
                'btn-disagree': 'Je refuse',
                't-w-s': 'Bienvenue',
                't-p-s': 'Politique Stricte',
                't-in': 'Ceci est Fasil Web App, une plateforme fiable.',
                't-po': 'Politique, haine, racisme, fausses nouvelles interdits.',
                'btn-toggle-policy': 'Politique',
                't-thx': 'Merci! Inscrivez-vous si nouveau, connectez-vous si existant.',
                'btn-sh-s': 'S\'inscrire',
                'btn-sh-l': 'Connexion',
                't-d': 'Tableau de bord',
                'btn-fc': 'Service Gratuit',
                'btn-pc': 'Service Premium',
                'btn-lv': 'Voir Info',
                'btn-lp': 'Publier Info',
                'btn-lg': 'Cr√©er Groupe',
                'btn-lmg': 'Mes Groupes',
                'btn-lc': 'Chat',
                'btn-lf': 'Feedback',
                'btn-lu': 'Utilisateurs',
                'btn-lb': 'Affaires',
                'btn-live-list': 'Voir Live',
                'btn-admin-rep': 'Admin',
                'btn-pp': 'PowerPoint',
                'btn-ppdf': 'PDF',
                'btn-out': 'Quitter',
                't-ph': 'Publier',
                't-vh': 'Voir',
                't-bh': 'Affaires',
                't-prof': 'Profil',
                'nav-h': 'Accueil',
                'nav-l': 'Live',
                'nav-p': 'Profil',
                'btn-ch-name': 'Changer Nom',
                'btn-ch-pass': 'Changer M.Passe',
                'btn-ch-photo': 'Changer Photo',
                'btn-del-acc': 'Supprimer Compte'
            },
            'ch': {
                'msg-agree-first': '‰∫≤Áà±ÁöÑÂÆ¢Êà∑ÔºåËØ∑ÂÖàÁÇπÂáªÊîøÁ≠ñÊåâÈíÆÔºåÈòÖËØªÊàë‰ª¨ÁöÑÊîøÁ≠ñÔºåÁÑ∂ÂêéÁÇπÂáªÊàëÂêåÊÑè„ÄÇ',
                'msg-login-first': 'ËØ∑ÂÖàÁôªÂΩï„ÄÇÂ¶ÇÊûúÊòØÊñ∞Áî®Êà∑ÔºåËØ∑ÂÖàÊ≥®ÂÜå„ÄÇ',
                'msg-policy-decline': 'Â¶ÇÊûú‰∏çË¢´ÂêåÊÑèÔºåÊÇ®Â∞ÜÊó†Ê≥ï‰ΩøÁî®Êàë‰ª¨ÁöÑÊúçÂä°„ÄÇË∞¢Ë∞¢„ÄÇ',
                'msg-success': 'ÊàêÂäüÔºÅ',
                'msg-posted': 'ÂèëÂ∏ÉÊàêÂäüÔºÅ',
                'msg-under-const': '‰∫≤Áà±ÁöÑÂÆ¢Êà∑ÔºåÊï¨ËØ∑ÊúüÂæÖÔºåÊ≠£Âú®Âª∫ËÆæ‰∏≠„ÄÇ',
                'msg-biz-closed': 'Âõ†ÊäÄÊúØ/Ê≥ïÂæãÂéüÂõ†ÂÖ≥Èó≠„ÄÇËØ∑ËÄêÂøÉÁ≠âÂæÖ„ÄÇ',
                'msg-err-file': 'ÈúÄË¶ÅÊñá‰ª∂',
                'head-txt': 'Ê¨¢ËøéÊù•Âà∞ Fasil Web App ÊúçÂä°‰∏≠ÂøÉ!',
                'btn-agree': 'ÊàëÂêåÊÑè',
                'btn-disagree': 'Êàë‰∏çÂêåÊÑè',
                't-w-s': 'Ê¨¢Ëøé',
                't-p-s': '‰∏•Ê†ºÊîøÁ≠ñ',
                't-in': 'ËøôÊòØ Fasil Web AppÔºå‰∏Ä‰∏™ÂèØÈù†ÁöÑÂπ≥Âè∞„ÄÇ',
                't-po': '‰∏•Á¶ÅÊîøÊ≤ª„ÄÅ‰ªáÊÅ®Ë®ÄËÆ∫„ÄÅÁßçÊóè‰∏ª‰πâÂíåÂÅáÊñ∞Èóª„ÄÇ',
                'btn-toggle-policy': 'ÊîøÁ≠ñ',
                't-thx': 'Ë∞¢Ë∞¢ÔºÅÂ¶ÇÊûúÊòØÊñ∞Áî®Êà∑ËØ∑Ê≥®ÂÜåÔºåÂ¶ÇÊûúÊòØËÄÅÁî®Êà∑ËØ∑ÁôªÂΩï„ÄÇ',
                'btn-sh-s': 'Ê≥®ÂÜå',
                'btn-sh-l': 'ÁôªÂΩï',
                't-d': '‰ª™Ë°®Êùø',
                'btn-fc': 'ÂÖçË¥πÊúçÂä°',
                'btn-pc': 'È´òÁ∫ßÊúçÂä°',
                'btn-lv': 'Êü•Áúã‰ø°ÊÅØ',
                'btn-lp': 'ÂèëÂ∏É‰ø°ÊÅØ',
                'btn-lg': 'ÂàõÂª∫Áæ§ÁªÑ',
                'btn-lmg': 'ÊàëÁöÑÁæ§ÁªÑ',
                'btn-lc': 'ËÅäÂ§©',
                'btn-lf': 'ÂèçÈ¶à',
                'btn-lu': 'Áî®Êà∑',
                'btn-lb': 'ÂïÜ‰∏ö',
                'btn-live-list': 'ËßÇÁúãÁõ¥Êí≠',
                'btn-admin-rep': 'ÁÆ°ÁêÜÂëò',
                'btn-pp': 'PowerPoint',
                'btn-ppdf': 'PDF',
                'btn-out': 'ÈÄÄÂá∫',
                't-ph': 'ÂèëÂ∏É',
                't-vh': 'Êü•Áúã',
                't-bh': 'ÂïÜ‰∏ö‰∏≠ÂøÉ',
                't-prof': '‰∏™‰∫∫‰∏≠ÂøÉ',
                'nav-h': 'È¶ñÈ°µ',
                'nav-l': 'Áõ¥Êí≠',
                'nav-p': 'ÁÆÄ‰ªã',
                'btn-ch-name': 'Êõ¥ÊîπÂßìÂêç',
                'btn-ch-pass': 'Êõ¥ÊîπÂØÜÁ†Å',
                'btn-ch-photo': 'Êõ¥ÊîπÁÖßÁâá',
                'btn-del-acc': 'Âà†Èô§Â∏êÊà∑'
            }
        };

        function getTrans(key, defaultTxt) {
            // Defaults to English or provided default if key missing
            if (translations[lang] && translations[lang][key]) return translations[lang][key];
            if (translations['en'] && translations['en'][key]) return translations['en'][key];
            return defaultTxt || key;
        }

        function openLangModal() { document.getElementById('lang-modal').style.display = 'flex'; }
        
        function setLang(l) { 
            lang = l; 
            document.getElementById('lang-modal').style.display = 'none';
            document.getElementById('lang-btn-txt').innerText = 
                l === 'am' ? '·ä†·àõ·à≠·äõ' : 
                (l === 'en' ? 'English' : 
                (l === 'or' ? 'Oromiffa' : 
                (l === 'tg' ? 'Tigrinya' : 
                (l === 'fr' ? 'Fran√ßais' : '‰∏≠Êñá'))));
            
            // Loop through all keys in dictionary and update elements immediately
            const t = translations[lang];
            if(t) {
                for (const key in t) {
                    const el = document.getElementById(key);
                    if(el) el.innerText = t[key];
                }
            }
        }

        // --- POLICY & NAV ---
        function togglePolicy() {
            // Show the actual text and buttons when "Policy" button is clicked
            document.getElementById('policy-content').style.display = 'block';
        }

        function handleAgree() {
            hasAgreed = true;
            document.getElementById('welcome-content').style.display = 'none';
            document.getElementById('auth-section').style.display = 'block';
            window.scrollTo(0,0);
        }

        function handleDisagree() {
            alert(getTrans('msg-policy-decline'));
            document.body.innerHTML = ""; // Exit/Blank screen
            window.close();
        }

        function navTab(t) {
            if(!hasAgreed) {
                // Modified logic to check policy agreement first
                return alert(getTrans('msg-agree-first'));
            }
            if(!user) {
                return alert(getTrans('msg-login-first'));
            }

            if(t === 'home') navTo('view-home');
            else if(t === 'live') openRealLiveStream();
            else if(t === 'profile') {
                // Profile Security Check
                document.getElementById('pass-modal').style.display = 'flex';
                pendingAct = () => {
                    document.getElementById('prof-phone').innerText = user.phone;
                    navTo('view-profile');
                };
            }
        }

        // --- AUTH & PROFILE ---
        function showAuth(t) {
            if(t === 'signup') {
                document.getElementById('form-signup').style.display = 'block';
                document.getElementById('form-login').style.display = 'none';
            } else {
                document.getElementById('form-signup').style.display = 'none';
                document.getElementById('form-login').style.display = 'block';
            }
        }

        // ... (preSignup, finalSignup, doLogin logic same as before) ...
        function preSignup() {
            const n = document.getElementById('reg-name').value;
            const p = document.getElementById('reg-phone').value;
            const e = document.getElementById('reg-email').value;
            const pass = document.getElementById('reg-pass').value;
            if(!n || !p || !e || !pass) return alert("Fill all fields");
            document.getElementById('signup-step-1').style.display = 'none';
            document.getElementById('signup-step-2').style.display = 'block';
        }
        function finalSignup() {
            const n = document.getElementById('reg-name').value;
            const p = document.getElementById('reg-phone').value;
            const e = document.getElementById('reg-email').value;
            const pass = document.getElementById('reg-pass').value;
            const newUser = { name: n, phone: p, email: e, password: pass, photo: uploadTarget || 'lion_image.jpg', balUSD: 0, balETB: 0, balFWA: 0 };
            users.push(newUser); localStorage.setItem('fg_users', JSON.stringify(users));
            if(window.firebaseTools && window.firebaseTools.saveUser) window.firebaseTools.saveUser(newUser);
            alert("Registered!"); user = newUser; localStorage.setItem('fg_user', JSON.stringify(user)); navTo('view-home'); upBal();
        }
        function doLogin() {
            const p = document.getElementById('log-phone').value;
            const pass = document.getElementById('log-pass').value;
            // Check if password changed logic - always use array source of truth
            const u = users.find(x => x.phone === p && x.password === pass);
            if(u) { user = u; if(user.balFWA===undefined) user.balFWA=0; localStorage.setItem('fg_user', JSON.stringify(user)); navTo('view-home'); upBal(); }
            else alert("Invalid");
        }
        function doLogout() { user = null; localStorage.removeItem('fg_user'); location.reload(); }

        // --- PROFILE EDITING ---
        function verifyPass() {
            if(document.getElementById('pass-input').value === user.password) {
                document.getElementById('pass-modal').style.display = 'none';
                document.getElementById('pass-input').value = '';
                if(pendingAct) pendingAct();
            } else { alert("Wrong Password"); }
        }

        function showProfileEdit(type) {
            document.getElementById('prof-edit-area').style.display = 'block';
            document.getElementById('edit-name-form').style.display = type==='name'?'block':'none';
            document.getElementById('edit-pass-form').style.display = type==='pass'?'block':'none';
            document.getElementById('edit-photo-form').style.display = type==='photo'?'block':'none';
        }

        function saveProfile(type) {
            if(type === 'name') {
                const n = document.getElementById('prof-name-edit').value;
                if(n) { user.name = n; alert("Name Updated"); }
            } else if (type === 'pass') {
                const o = document.getElementById('old-pass').value;
                const n = document.getElementById('new-pass').value;
                const c = document.getElementById('conf-pass').value;
                if(o !== user.password) return alert("Old Password Wrong");
                if(n !== c) return alert("Mismatch");
                user.password = n; alert("Password Updated");
            } else if (type === 'photo') {
                // In real app, this would use uploaded URL
                if(uploadTarget) { user.photo = uploadTarget; alert("Photo Updated"); } // Sim
            }
            // CRITICAL: Update both localStorage and users array so login works with new pass
            localStorage.setItem('fg_user', JSON.stringify(user));
            const idx = users.findIndex(u => u.phone === user.phone);
            if(idx > -1) { users[idx] = user; localStorage.setItem('fg_users', JSON.stringify(users)); }
            document.getElementById('prof-edit-area').style.display = 'none';
        }

        function deleteAccount() {
            if(confirm("Are you sure? This cannot be undone.")) {
                users = users.filter(u => u.phone !== user.phone);
                localStorage.setItem('fg_users', JSON.stringify(users));
                doLogout();
            }
        }

        // --- POSTING (UPDATED WITH FILEREADER) ---
        function setupPost(t) {
            activePostType = t;
            document.getElementById('post-type-select').style.display = 'none';
            document.getElementById('post-form-area').style.display = 'block';
            document.getElementById('p-content').style.display = t === 'text' ? 'block' : 'none';
            document.getElementById('post-instr').innerText = t === 'text' ? 'Write below:' : 'Upload ' + t + ' (File)';
            
            if(t !== 'text') {
                const f = document.getElementById('file-post');
                f.value = '';
                f.setAttribute('accept', t + '/*');
                f.click(); // Auto open
            }
        }

        function cancelPost() {
            document.getElementById('post-type-select').style.display = 'block';
            document.getElementById('post-form-area').style.display = 'none';
            clearPostForm();
        }
        function clearPostForm() {
            document.getElementById('p-title').value = '';
            document.getElementById('p-content').value = '';
            document.getElementById('file-post').value = '';
        }

        async function submitPost() {
            const ti = document.getElementById('p-title').value;
            if(!ti) return showAlert("Title required", "error");
            
            let content = '';
            let mediaData = null; // Base64 data
            
            showLoading("Posting...");

            // Helper to process
            const finishPost = async (finalMedia) => {
                const newPost = {
                    id: Date.now().toString(),
                    u: user.name,
                    uImg: user.photo,
                    phone: user.phone,
                    type: activePostType,
                    title: ti,
                    desc: content,
                    media: finalMedia,
                    l: 0,
                    l_users: {}, // Track users who liked
                    f_users: {}, // Track users who followed
                    c: [], // Comments
                    time: new Date().toLocaleString()
                };
                
                posts.unshift(newPost);
                localStorage.setItem('fg_posts', JSON.stringify(posts));
                if(window.firebaseTools && window.firebaseTools.savePost) await window.firebaseTools.savePost(newPost);
                
                hideLoading();
                showAlert(getTrans('msg-posted'), "success");
                clearPostForm();
                document.getElementById('post-type-select').style.display = 'block';
                document.getElementById('post-form-area').style.display = 'none';
                navTo('view-info');
                renderPosts(activePostType);
            };

            if(activePostType === 'text') {
                content = document.getElementById('p-content').value;
                finishPost(null);
            } else {
                const fileInput = document.getElementById('file-post');
                if(fileInput.files.length > 0) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        finishPost(e.target.result); // Pass Data URL
                    };
                    reader.readAsDataURL(fileInput.files[0]);
                } else {
                    hideLoading();
                    showAlert(getTrans('msg-err-file'), "error");
                }
            }
        }

        function renderPosts(filterType) {
            const c = document.getElementById('feed-container');
            c.innerHTML = '';
            
            const filtered = posts.filter(p => p.type === filterType && !deletedPostIds.includes(p.id));
            if(filtered.length === 0) { c.innerHTML = "<p>No posts found.</p>"; return; }
            
            filtered.forEach(p => {
                let mediaHtml = '';
                if(p.media) {
                    if(p.type === 'image') mediaHtml = `<img src="${p.media}" style="width:100%; border-radius:5px; margin-top:5px;">`;
                    else if(p.type === 'video') mediaHtml = `<video src="${p.media}" controls style="width:100%; margin-top:5px;"></video>`;
                    else if(p.type === 'audio') mediaHtml = `<audio src="${p.media}" controls style="width:100%; margin-top:5px;"></audio>`;
                }
                
                // Counters
                const commentCount = p.c ? p.c.length : 0;
                
                // Delete Button Visibility
                const deleteBtnHtml = `<button class="action-icon" onclick="attemptDelete('${p.id}', '${p.phone}')" style="color:red;"><i class="fas fa-trash"></i> Delete</button>`;

                c.innerHTML += `
                <div class="post-card">
                    <div class="post-header">
                        <img src="${p.uImg || 'lion_image.jpg'}">
                        <b>${p.u}</b>
                        <button class="btn-blue btn-tiny" onclick="followUser('${p.id}')" style="margin-left:auto;">Follow</button>
                    </div>
                    <h4>${p.title}</h4>
                    <p>${p.desc}</p>
                    ${mediaHtml}
                    <div class="post-actions">
                        <button class="action-icon" onclick="likePost('${p.id}')"><i class="fas fa-thumbs-up"></i> ${p.l}</button>
                        <button class="action-icon" onclick="prepComment('${p.id}')"><i class="fas fa-comment"></i> Comment (${commentCount})</button>
                        <button class="action-icon" onclick="initReport('${p.id}')" style="color:orange;"><i class="fas fa-flag"></i> Report</button>
                        ${deleteBtnHtml}
                        <button class="action-icon" onclick="sharePost('${p.id}')"><i class="fas fa-share"></i> Share</button>
                    </div>
                    <small style="color:gray; font-size:10px;">${p.time}</small>
                </div>`;
            });
        }

        // --- INTERACTION LOGIC ---
        function likePost(id) {
            const p = posts.find(x => x.id == id);
            if(p) {
                // Initialize user like tracking
                if(!p.l_users) p.l_users = {};
                const current = p.l_users[user.phone] || 0;
                
                if(current < 20) {
                    p.l++;
                    p.l_users[user.phone] = current + 1;
                    localStorage.setItem('fg_posts', JSON.stringify(posts));
                    renderPosts(p.type);
                } else {
                    alert("Max 20 Likes reached.");
                }
            }
        }

        function followUser(id) {
            const p = posts.find(x => x.id == id);
            if(p) {
                // Tracking follows on the post object for simulation (ideally on User object)
                if(!p.f_users) p.f_users = {};
                const current = p.f_users[user.phone] || 0;
                
                if(current < 10) {
                    p.f_users[user.phone] = current + 1;
                    localStorage.setItem('fg_posts', JSON.stringify(posts));
                    alert(`Followed ${p.u} (${current+1}/10)`);
                } else {
                    alert("Max 10 Follows reached.");
                }
            }
        }

        // ... (Existing Report/Delete Logic) ...
        function attemptDelete(id, ownerPhone) {
            if (user.phone === ownerPhone || user.phone === '0951337242') {
                if(confirm("Delete post?")) deletePost(id);
            } else {
                alert("·ã≠·àÖ ·ã®·ä•·à≠·àµ·ãé ·çñ·àµ·âµ ·ä†·ã≠·ã∞·àà·àù ·àò·ã∞·àà·âµ ·ä†·ã≠·âΩ·àâ·àù (This is not your post).");
            }
        }
        function deletePost(id) {
            deletedPostIds.push(id); localStorage.setItem('fg_deleted_posts', JSON.stringify(deletedPostIds));
            posts = posts.filter(p => p.id != id); localStorage.setItem('fg_posts', JSON.stringify(posts));
            renderPosts(activePostType);
        }
        function initReport(id) { pendingReportId = id; document.getElementById('report-modal').style.display = 'flex'; }
        function submitReport() {
            const r = document.getElementById('report-reason').value;
            if(!r) return;
            reports.push({id:Date.now(), postId:pendingReportId, reason:r});
            localStorage.setItem('fg_reports', JSON.stringify(reports));
            document.getElementById('report-modal').style.display='none';
            alert("Report Sent");
        }

        // --- COMMENTS ---
        function prepComment(id) { activeCommentPostId = id; document.getElementById('comment-type-modal').style.display = 'flex'; }
        function openComSub(mode) {
            document.getElementById('comment-type-modal').style.display = 'none';
            if(mode === 'view') showCommentsList();
            else document.getElementById('comment-media-modal').style.display = 'flex';
        }
        function processComment(type) {
            document.getElementById('comment-media-modal').style.display = 'none';
            if(type === 'text') {
                const t = prompt("Comment:"); if(t) addComment(t, 'text');
            } else {
                alert("Simulated Media Comment"); addComment("[Media]", type);
            }
        }
        function addComment(txt, type) {
            const p = posts.find(x => x.id == activeCommentPostId);
            if(p) {
                if(!p.c) p.c = [];
                p.c.push({u:user.name, t:txt, ty:type});
                localStorage.setItem('fg_posts', JSON.stringify(posts));
                alert("Comment Added");
                // Refresh logic if in view
            }
        }
        function showCommentsList() {
            const p = posts.find(x => x.id == activeCommentPostId);
            const area = document.getElementById('comments-display-area');
            area.innerHTML = '';
            if(p && p.c && p.c.length > 0) p.c.forEach(c => area.innerHTML += `<div><b>${c.u}:</b> ${c.t}</div>`);
            else area.innerHTML = 'No comments.';
            document.getElementById('view-comments-list-modal').style.display = 'flex';
        }

        // --- SHARES (Updated) ---
        function executeShare() {
            const sel = document.querySelectorAll('.bright-blue');
            if(sel.length===0) return;
            sel.forEach(el => {
                sharedItems.push({from:user.name, to:el.getAttribute('data-phone'), content:"Shared Content", time: new Date().toLocaleTimeString()});
            });
            localStorage.setItem('fg_shared', JSON.stringify(sharedItems));
            alert("Shared (TikTok Style FWA)!");
            document.getElementById('btn-share-done').style.display = 'none';
            goBack();
        }

        // --- ADMIN & BIZ ---
        function checkAuth(targetId) {
            if(targetId === 'report-inbox' || targetId === 'business-sec') {
                document.getElementById('pass-modal').style.display = 'flex';
                pendingAct = () => {
                    if (targetId === 'report-inbox') document.getElementById('admin-login-modal').style.display = 'flex';
                    else {
                        if(bizStatus === 'closed' && user.phone !== '0951337242') alert(getTrans('msg-biz-closed'));
                        else navTo(targetId);
                    }
                };
            } else navTo(targetId);
        }
        // ... (adminLogin, runAdminAction, etc. kept same) ...
        function adminLogin() {
            if(document.getElementById('admin-pass-in').value === adminPass) {
                document.getElementById('admin-login-modal').style.display='none';
                navTo('report-inbox'); runAdminAction();
            } else alert("Invalid");
        }
        function runAdminAction() {
             const area = document.getElementById('admin-dynamic-content');
             area.innerHTML = "";
             if(pendingAdminAction === 'viewRep') {
                 if(reports.length === 0) area.innerHTML = "No reports";
                 else reports.forEach(r => area.innerHTML += `<div style='border:1px solid red'>Reason: ${r.reason}</div>`);
             } else {
                 // Other admin actions
                 area.innerHTML = "Admin Action Executed";
             }
        }
        // ... (saveNewAdminPass, setBusinessStatus, setPdfStatus kept same) ...
        function saveNewAdminPass() {
            const o = document.getElementById('old-adm').value;
            const n = document.getElementById('new-adm').value;
            const c = document.getElementById('conf-adm').value;
            if(o !== adminPass) return alert("Old code wrong");
            if(n !== c) return alert("Mismatch");
            if(n.length < 6) return alert("Too short");
            adminPass = n; localStorage.setItem('fg_admin_pass', n);
            alert("Admin Code Changed");
            document.getElementById('admin-chg-modal').style.display = 'none';
        }
        function setBusinessStatus(s) { bizStatus = s; localStorage.setItem('fg_biz_status', s); alert("Business Center is now " + s); document.getElementById('adm-biz-ctrl-modal').style.display = 'none'; }
        function setPdfStatus(s) { pdfStatus = s; localStorage.setItem('fg_pdf_status', s); alert("PDF Service is now " + s); document.getElementById('adm-pdf-ctrl-modal').style.display = 'none'; }

        // --- UI HELPERS ---
        function navTo(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('show'));
            document.getElementById(id).classList.add('show');
            window.scrollTo(0,0);
        }
        function goBack() { navTo('view-home'); }
        function closeModal() { document.querySelector('.modal-overlay[style*="flex"]').style.display = 'none'; }
        function showAlert(msg, type) {
            document.getElementById('modal-title').innerText = type==='error'?'Error':'Success';
            document.getElementById('modal-title').style.color = type==='error'?'red':'green';
            document.getElementById('modal-msg').innerText = msg;
            document.getElementById('custom-modal').style.display = 'flex';
        }
        function showLoading(t) { document.getElementById('loading-overlay').style.display='flex'; }
        function hideLoading() { document.getElementById('loading-overlay').style.display='none'; }
        
        function toggleList(t) {
            // FIX: This makes the Free/Premium lists actually toggle
            const list = document.getElementById('list-'+t);
            if(list.style.display === 'none' || list.style.display === '') {
                list.style.display = 'block';
            } else {
                list.style.display = 'none';
            }
        }

        function openPrem(t) {
            if(t==='pdf' || t==='ppt') {
               if(pdfStatus === 'closed' && user.phone !== '0951337242') alert(getTrans('msg-under-const'));
               else navTo('prem-pricing'); 
            }
        }
        // ... (Deposit/Withdraw/Intl kept same) ...
        function promptUpload(t) { uploadTarget=t; if(t==='pay'||t==='deposit'||t==='intl') document.getElementById('file-'+t).click(); }
        
        // Chat & Share Receive Button Placement
        function handleChatList() {
            showUserList(false);
            // Inject the Receive Share button dynamically if not there
            // Actually it is done in HTML structure now
            navTo('user-list-sec');
        }
        
        function showUserList(selMode) {
            const c = document.getElementById('ul-cont'); c.innerHTML='';
            users.forEach(u => {
                if(u.phone !== user.phone) c.innerHTML += `<div class="user-item" onclick="${selMode?'togBlue(this)':'openChat(\''+u.phone+'\')'}" data-phone="${u.phone}"><img src="${u.photo||'lion_image.jpg'}"><b>${u.name}</b></div>`;
            });
            document.getElementById('btn-grp-done').style.display = selMode ? 'block' : 'none';
            document.getElementById('btn-share-done').style.display = (selMode && document.getElementById('share-modal').style.display === 'none') ? 'block' : 'none'; // Complex logic simplified
        }
        function setupFWAShare() {
            document.getElementById('share-modal').style.display='none';
            document.getElementById('btn-share-done').style.display='block';
            showUserList(true);
        }
        function sharePost(id) { document.getElementById('share-modal').style.display='flex'; }
        function closeShare() { document.getElementById('share-modal').style.display='none'; }
        
        function showReceivedShares() {
            const c = document.getElementById('shared-list-area'); c.innerHTML='';
            const mine = sharedItems.filter(s => s.to === user.phone);
            if(mine.length===0) c.innerHTML='None';
            else mine.forEach(s=>c.innerHTML+=`<div>From ${s.from}: ${s.content}</div>`);
            navTo('received-shares-sec');
        }
        
        function togBlue(el) { el.classList.toggle('bright-blue'); }

    </script>

<script>
  window.chatbaseConfig = {
    chatbotId: "r-x7-Xm_Y-6mYj6zNq_K1",
    alignment: "left"
  }
</script>
    <script>
(function(){if(!window.chatbase||window.chatbase("getState")!=="initialized"){window.chatbase=(...arguments)=>{if(!window.chatbase.q){window.chatbase.q=[]}window.chatbase.q.push(arguments)};window.chatbase=new Proxy(window.chatbase,{get(target,prop){if(prop==="q"){return target.q}return(...args)=>target(prop,...args)}})}const onLoad=function(){const script=document.createElement("script");script.src="https://www.chatbase.co/embed.min.js";script.id="IeHEhuOCnYiOp86WS22vL";script.domain="www.chatbase.co";document.body.appendChild(script)};if(document.readyState==="complete"){onLoad()}else{window.addEventListener("load",onLoad)}})();
</script>
</body>
</html>

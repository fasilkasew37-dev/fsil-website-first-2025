ріўріў<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рЇІрѕ▓рѕЇ рІїрЅЦ ріарЇЋ - Fasil Web App (Final Full Version)</title>
    <style>
        /* --- рѕўрІ░рЅаріЏ CSS (ріеріљрЅБрѕЕ рІерЅ░рІѕрѕ░рІ░) --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            padding: 20px;
            background-color: #f0f4f8;
            color: #333;
            margin: 0;
        }
        .section {
            max-width: 700px;
            margin: 20px auto;
            padding: 25px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            border-top: 6px solid #007bff;
            text-align: left;
            display: none; 
            padding-bottom: 50px;
        }
        /* рѕўрїђрѕўрѕфрІФ рІерѕџрЅ│рІерІЇ рїѕрїй */
        #agreement-view { display: block; }
        
        h1 { color: #007bff; font-size: 28px; margin-bottom: 10px; text-align: center; }
        h2 { color: #555; font-size: 22px; margin-top: 20px; margin-bottom: 20px; text-align: center; }
        h3 { color: #333; font-size: 18px; margin: 10px 0; }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 16px;
        }
        
        /* --- Buttons (рІерЅ░рѕѕрІФрІЕ рЅђрѕѕрѕърЅй) --- */
        button, .button-link {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 12px 0;
            text-align: center;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
            border: none;
            font-size: 16px;
            color: white;
            transition: 0.3s;
        }
        .main-btn { background-color: #007bff; }
        .success-btn { background-color: #28a745; }
        .delete-btn { background-color: #dc3545; }
        .premium-btn { background-color: #ffc107; color: #333; }
        .feature-btn { background-color: #8c5aee; }
        .business-btn { background-color: #00a08e; }
        .social-btn { background-color: #ff7043; }
        .language-btn { background-color: #6c757d; }

        /* --- Custom Modal (ріарІ▓рѕ▒ рІерѕўрѕЃрѕЇ рѕЏрѕхрїаріЋрЅђрЅѓрІФ) --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6); display: none;
            justify-content: center; align-items: center; z-index: 2000;
        }
        .modal-box {
            background: white; padding: 25px; border-radius: 12px;
            width: 85%; max-width: 400px; text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); animation: popIn 0.3s ease;
        }
        @keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .modal-title { font-size: 20px; margin-bottom: 10px; font-weight: bold; }
        
        /* --- User & Chat Cards --- */
        .user-card, .chat-message {
            display: flex; align-items: center; padding: 10px;
            border: 1px solid #eee; border-radius: 8px; margin-bottom: 8px;
            background-color: #f9f9f9;
        }
        .user-card img { width: 50px; height: 50px; border-radius: 50%; margin-right: 15px; object-fit: cover; }
        
        /* --- Comments & Posts --- */
        .post-card { border: 1px solid #ddd; padding: 15px; border-radius: 8px; margin-bottom: 20px; background: #fff; }
        .comment-section { background: #f1f1f1; padding: 10px; margin-top: 10px; border-radius: 8px; font-size: 14px; }
        .single-comment { border-bottom: 1px solid #ccc; padding: 8px 0; }
        .media-btn-group { display: flex; gap: 5px; margin-top: 5px; }
        .media-btn-group button { font-size: 12px; padding: 8px; margin: 0; width: auto; flex: 1; }

        /* --- Loading Spinner --- */
        .loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.9); display: none;
            justify-content: center; align-items: center; z-index: 1000; flex-direction: column;
        }
        .spinner {
            border: 6px solid #f3f3f3; border-top: 6px solid #007bff;
            border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="spinner"></div>
        <p>... ріЦрІерЅ░рїФріљ ріљрІЇ (Loading) ...</p>
    </div>

    <!-- Center Alert Modal -->
    <div class="modal-overlay" id="custom-modal">
        <div class="modal-box">
            <div class="modal-title" id="modal-title">рѕЏрѕхрїаріЋрЅђрЅѓрІФ</div>
            <div id="modal-text" style="margin-bottom:20px;"></div>
            <button class="main-btn" onclick="closeModal()" id="modal-btn">ріЦрѕ║ (OK)</button>
        </div>
    </div>
    
    <!-- Password Prompt Modal for Withdraw -->
    <div class="modal-overlay" id="password-modal">
        <div class="modal-box">
            <div class="modal-title">рІерІГрѕѕрЇЇ рЅЃрѕЇ рѕЏрѕерїІрїѕрїФ</div>
            <p>рІГрѕЁріЋріЋ рѕѕрѕЏрІхрѕерїЇ ріЦрЅБріГрІј рІерІГрѕѕрЇЇ рЅЃрѕЇ рІФрѕхрїѕрЅАрЇА</p>
            <input type="password" id="modal-password-input" placeholder="рІерІГрѕѕрЇЇ рЅЃрѕЇ" style="text-align: center;">
            <button class="success-btn" onclick="confirmWithdrawWithPassword()">ріарѕерїІрїЇрїЦ</button>
            <button class="delete-btn" onclick="document.getElementById('password-modal').style.display='none'">рѕ░рѕГрІЮ</button>
        </div>
    </div>

    <!-- 1. Agreement View (Full Original Text Restored) -->
    <div class="section" id="agreement-view">
        <h1>ріЦріЋрі│ріЋ рІѕрІ░ рЇІрѕ▓рѕЇ рІїрЅЦ рЅарІ░рѕЁріЊ рѕўрїА</h1>
        <div style="background-color: #e9ecef; padding: 20px; border-radius: 8px; margin-bottom: 25px; border-left: 5px solid #007bff;">
            <h3>­Ъїљ рѕхрѕѕ рЇІрѕ▓рѕЇ рІїрЅЦ ріарЇЋ</h3>
            <p>
                <strong>рЇІрѕ▓рѕЇ рІїрЅЦ ріарЇЋ</strong> рЅарЅ░ріарѕЏріњріљрЅх ріЦріЋрІ▓рѕ░рѕФ рІерЅ░рЅђрІерѕ░ рІерІ▓рїѓрЅ│рѕЇ рѕўрїІрѕфрІФ рѕўрІхрѕеріГ рѕ▓рѕєріЋ 
                рЅарЅ░рїерѕЏрѕфрѕЮ ріЦріЋрІ░ **рЇЊрІѕрѕГ рЇќрІГріЋрЅх**рЇБ **рЇњрІ▓ріцрЇЇ**рЇБ **рІюріЊ** ріЦріЊ **рїЦрѕФрЅх рІФрѕѕрІЇ рЅфрІ▓рІ«** рІФрѕЅ ріарїѕрѕЇрїЇрѕјрЅХрЅйріЋ рІФрЅђрѕГрЅБрѕЇрЇб
            </p>
        </div>
        
        <div style="background-color: #ffe0b2; padding: 20px; border-radius: 8px; margin-top: 20px; border-left: 5px solid #ff9800;">
            <h3>Рџа№ИЈ рїЦрЅЦрЅЁ рІеріарїарЅЃрЅђрѕЮ рѕўрѕўрѕфрІФ</h3>
            <p>
                рЅарІџрѕЁ рѕўрІхрѕеріГ рѕІрІГ рІерѕџріерЅ░рѕЅрЅхріЋ ріљрїѕрѕ«рЅй рѕЏріФрѕёрІх рЅарїЦрЅЦрЅЁ рІерЅ░ріерѕѕріерѕѕ ріљрІЇрЇА
                <br><br>
                1. рЇќрѕѕрЅ▓ріФрІі рїЇрїГрЅх рѕўрЅђрѕхрЅђрѕхрЇб<br>
                2. рІерѕЃрІГрѕЏріќрЅх рїЦрѕІрЅ╗ рІѕрІГрѕЮ рІўрѕеріЮріљрЅх рѕЏрѕФрѕўрІхрЇб<br>
                3. рѕїрѕІ рѕЏріЋріЏрІЇріЋрѕЮ рІерїЇрїГрЅх ріарїђріЋрІ│ рѕЏріФрѕёрІх ріарІГрЅ╗рѕЇрѕЮрЇб
            </p>
        </div>

        <h2 style="text-align: center; margin-top: 30px;">рІГрѕЁріЋ рѕўрѕўрѕфрІФ рЅ░рЅђрЅЦрѕѕрІЇ рІГрЅђрїЦрѕІрѕЅ?</h2>

        <button class="success-btn" onclick="showView('home-view')">РюЁ ріЦрѕхрѕЏрѕЏрѕѕрѕЂ</button>
        <button class="delete-btn" onclick="showAlert('рѕўрѕўрѕфрІФрІЇріЋ рЅБрѕѕрѕўрЅђрЅарѕЇрІј рѕЮріГріЋрІФрЅх рѕўрїарЅђрѕЮ ріарІГрЅйрѕЅрѕЮрЇб', 'error')">РЮї ріарѕЇрѕхрѕЏрѕЏрѕЮ (рІЇрїБ)</button>
    </div>

    <!-- 2. Home View -->
    <div class="section" id="home-view">
        <h1>рІерѕўрїЇрЅбрІФ/рѕўрѕўрІЮрїѕрЅбрІФ рѕЮрѕГрїФ</h1>
        <h2>ріЦріЋрІ┤рЅх рѕўрїарЅђрѕЮ рІГрЇѕрѕЇрїІрѕЅ?</h2>
        <button class="main-btn" onclick="showView('signup-form')">рЅаріљрЇЃ рѕѕрѕўрѕўрІЮрїѕрЅЦ / рѕѕрѕўрїЇрЅБрЅх</button>
        <button class="premium-btn" onclick="checkFreeSignupForPremium()">рЅаріГрЇЇрІФ ріарѕЏрѕФрїГ рѕѕрѕўрѕўрІЮрїѕрЅЦ</button>
        <button class="delete-btn" onclick="showView('agreement-view')" style="background:#6c757d; margin-top:30px;">рІѕрІ░ рѕўрѕўрѕфрІФ рЅ░рѕўрѕѕрѕх</button>
    </div>

    <!-- 3. Signup Form (New Validations) -->
    <div class="section" id="signup-form">
        <h2>ріарІ▓рѕх рЅ░рїарЅЃрѕџ рІГрѕўрІЮрїѕрЅА (ріљрЇЃ)</h2>
        <input type="text" id="signup-name" placeholder="рѕЎрѕЅ рѕхрѕЮ" required>
        <input type="text" id="signup-phone" placeholder="рѕхрѕЇріГ рЅЂрїЦрѕГ" required>
        <input type="email" id="signup-email" placeholder="рібрѕюрѕЇ (рїЇрІ┤рЅ│ @gmail.com рЅЦрЅ╗)" required>
        <input type="password" id="signup-password" placeholder="рІерІГрѕѕрЇЇ рЅЃрѕЇ (рЅБрѕѕ 6 ріарѕђрІЮ)" maxlength="6" required>
        <p style="text-align: center; font-weight: bold;">**ріЦрЅБріГрІј рІерЇЋрѕ«рЇІрІГрѕЇ рЇјрЅХ рІФрѕхрїѕрЅА**</p>
        <input type="file" id="signup-profile-photo" accept="image/*">
        
        <button class="success-btn" onclick="handleSignUp()">рѕўрІЮрїЇрЅЦ (Sign Up)</button>
        <p style="text-align: center; cursor:pointer; color:#007bff;" onclick="showView('login-form')">рІерЅ░рѕўрІўрїѕрЅА рЅ░рїарЅЃрѕџ ріерѕєріЉ рІГрїЇрЅА (Log In)</p>
    </div>

    <!-- 4. Login Form -->
    <div class="section" id="login-form">
        <h2>рѕўрїЇрЅбрІФ (Log In)</h2>
        <input type="text" id="login-phone" placeholder="рѕхрѕЇріГ рЅЂрїЦрѕГ">
        <input type="password" id="login-password" placeholder="рІерІГрѕѕрЇЇ рЅЃрѕЇ">
        <button class="main-btn" onclick="handleLogin()">рїЇрЅБ (Log In)</button>
        <p style="text-align: center; cursor:pointer; color:#007bff;" onclick="showView('signup-form')">ріарІ▓рѕх рЅ░рїарЅЃрѕџ? рІГрѕўрІЮрїѕрЅА (Sign Up)</p>
    </div>

    <!-- 5. FREE Dashboard (Unified with original buttons + New features) -->
    <div class="section" id="free-dashboard">
        <h1>ріљрЇЃ рІеріарїѕрѕЇрїЇрѕјрЅх рѕЏрІЋріерѕЇ (Dashboard)</h1>
        
        <h2>ріљрЇЃ ріарїѕрѕЇрїЇрѕјрЅХрЅй:</h2>
        <button class="main-btn" onclick="showView('view-select')">­ЪЊё рѕўрѕерїЃ рѕўрѕўрѕЇріерЅх (View)</button>
        <button class="main-btn" onclick="showView('post-select')">РюЇ№ИЈ рѕўрѕерїЃ рѕўрѕѕрїарЇЇ (Post)</button>
        
        <button class="feature-btn" onclick="showUserList(false)">­ЪЉЦ рІерЇІрѕ▓рѕЇ рІїрЅЦ ріарЇЋ рЅ░рїарЅЃрѕџрІјрЅй</button>

        <button class="social-btn" onclick="handleGroupCreation()">­ЪЉЦ рЅАрІхріЋ рѕѕрѕўрЇЇрїарѕГ</button>
        <button class="social-btn" style="background-color: #5e35b1;" onclick="showMyGroupsList()">­ЪЊѓ рІерЇѕрїарѕЕрЅхріЋ рїЇрѕЕрЇЋ рѕѕрѕўрѕўрѕЇріерЅх</button>
        <button class="social-btn" onclick="handlePrivateChatStart()">­Ъњг рЅарІЇрѕхрїЦ рѕўрѕхрѕўрѕГ ріерїЊрІ░ріърЅй рїІрѕГ рѕѕрѕЏрІЇрѕФрЅх</button>
        
        <button class="success-btn" style="background-color: #00bcd4;" onclick="showView('feedback-center')">­ЪЊЮ ріарѕхрЅ░рІФрІерЅх рѕѕрѕўрѕхрїарЅх</button>

        <button class="business-btn" onclick="checkAuthAndRedirect('business-dashboard')">­Ъњ░ рЅбрІЮріљрѕх (Business)</button>
        
        <button class="delete-btn" onclick="showDeleteList()">­ЪЌЉ№ИЈ рІерѕѕрїарЇЅрЅхріЋ рѕўрѕерїЃ рѕўрІ░рѕѕрЅх (Delete Posts)</button>
        
        <!-- The button requested to be restored -->
        <button class="feature-btn" style="margin-top: 20px; background-color: #ffc107; color: black;" onclick="showView('premium-options')">РГљ№ИЈ рІеріГрЇЇрІФ ріарїѕрѕЇрїЇрѕјрЅ│рЅйріЋ рІГрїјрЅЦріЎ (Visit Premium)</button>

        <button class="delete-btn" style="background-color: #6c757d; margin-top: 20px;" onclick="handleLogout()">рІЇрїБ (Log Out)</button>
    </div>

    <!-- 6. PREMIUM Dashboard -->
    <div class="section" id="premium-dashboard">
        <h1>РГљ№ИЈ рІеріГрЇЇрІФ рІеріарїѕрѕЇрїЇрѕјрЅх рѕЏрІЋріерѕЇ (Premium)</h1>
        
        <h2>рЇЋрѕфрѕџрІерѕЮ рЅ░рїЇрЅБрѕФрЅх:</h2>
        <button class="main-btn" onclick="showAlert('рЇЊрІѕрѕГ рЇќрІГріЋрЅх рѕЏрІўрїІрїЃ...', 'info')">­ЪЊі рЇЊрІѕрѕГ рЇќрІГріЋрЅх рѕЏрІўрїІрїђрЅх</button>
        <button class="main-btn" onclick="showAlert('рЇњрІ▓ріцрЇЇ рѕЏріћрїЁрѕўріЋрЅх...', 'info')">­ЪЊё рЇњрІ▓ріцрЇЇ рѕўрѕѕрїарЇЇ / рѕЏрІўрїІрїђрЅх</button>
        <button class="main-btn" onclick="showAlert('рЅфрІ▓рІ« рѕЏрїФрІѕрЅ╗...', 'info')">­ЪјЦ рїЦрѕФрЅ▒ рІерїарЅарЅђ рЅфрІ▓рІ« рѕўрѕўрѕЇріерЅх</button>
        <button class="main-btn" onclick="showAlert('рІюріЊ...', 'info')">­ЪЊ░ рІюріЊ рѕўріерЅ│рЅ░рѕЇ / рѕўрѕѕрїарЇЇ</button>
        
        <!-- Basic Features Included -->
        <h2>рѕўрѕ░рѕерЅ│рІі рЅ░рїЇрЅБрѕФрЅх:</h2>
        <button class="success-btn" onclick="showView('view-select')">­ЪЊё рѕўрѕерїЃ рѕўрѕўрѕЇріерЅх</button>
        <button class="success-btn" onclick="showView('post-select')">РюЇ№ИЈ рѕўрѕерїЃ рѕўрѕѕрїарЇЇ</button>
        <button class="feature-btn" onclick="showUserList(false)">­ЪЉЦ рЅ░рїарЅЃрѕџрІјрЅй рІЮрѕГрІЮрѕГ</button>
        <button class="social-btn" onclick="handleGroupCreation()">­ЪЉЦ рЅАрІхріЋ рЇЇрїарѕГ / рЅ░рѕўрѕЇріерЅх</button>
        <button class="business-btn" onclick="checkAuthAndRedirect('business-dashboard')">­Ъњ░ рЅбрІЮріљрѕх</button>
        <button class="delete-btn" onclick="showDeleteList()">­ЪЌЉ№ИЈ рЇІрІГрѕЇ рѕўрІ░рѕѕрЅх</button>

        <button class="delete-btn" style="background-color: #6c757d; margin-top: 20px;" onclick="handleLogout()">рІЇрїБ (Log Out)</button>
    </div>
    
    <!-- 7. Premium Options List (Restored) -->
    <div class="section" id="premium-options">
        <h2>РГљ№ИЈ рЅаріГрЇЇрІФ ріарѕЏрѕФрїГ рІерѕџрїѕріЎ ріарїѕрѕЇрїЇрѕјрЅХрЅй</h2>
        <p>рѕѕрѕўрїарЅђрѕЮ ріерѕџрЇѕрѕЇрїЅрЅх ріарїѕрѕЇрїЇрѕјрЅх ріаріЋрІ▒ріЋ рІГрѕЮрѕерїАрЇб</p>
        
        <button class="feature-btn" onclick="goToPricing('video')">­ЪјЦ рїЦрѕФрЅ▒ рІерїарЅарЅђ рЅфрІ▓рІ« рѕўрѕўрѕЇріерЅх</button>
        <button class="feature-btn" onclick="goToPricing('news')">­ЪЊ░ рІюріЊ рѕўріерЅ│рЅ░рѕЇ / рѕўрѕѕрїарЇЇ</button>
        <button class="feature-btn" onclick="goToPricing('ppt')">­ЪЊі рЇЊрІѕрѕГ рЇќрІГріЋрЅх рѕЏрІўрїІрїђрЅх</button>
        <button class="feature-btn" onclick="goToPricing('pdf')">­ЪЊё рЇњрІ▓ріцрЇЇ рѕўрѕѕрїарЇЇ / рѕЏрІўрїІрїђрЅх</button>
        
        <button class="delete-btn" style="margin-top: 30px;" onclick="goBackToDashboard()">рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</button>
    </div>

    <!-- 8. Pricing View -->
    <div class="section" id="pricing-view">
        <h2>рІеріГрЇЇрІФ ріарѕЏрѕФрї«рЅй</h2>
        <div style="border:1px solid #ccc; padding:10px; margin:5px; border-radius:5px;">
            <h3>рІЋрѕѕрЅ│рІі (Daily)</h3><p>5 рЅЦрѕГ</p><button class="success-btn" onclick="processPayment('Daily', 5)">рѕЮрѕерїЦ</button>
        </div>
        <div style="border:1px solid #ccc; padding:10px; margin:5px; border-radius:5px;">
            <h3>рІѕрѕГрѕЃрІі (Monthly)</h3><p>30 рЅЦрѕГ</p><button class="success-btn" onclick="processPayment('Monthly', 30)">рѕЮрѕерїЦ</button>
        </div>
        <button class="delete-btn" onclick="showView('premium-options')">рЅ░рѕўрѕѕрѕх</button>
    </div>

    <!-- 9. Business Dashboard -->
    <div class="section" id="business-dashboard">
        <h2>­Ъњ░ рІерЅбрІЮріљрѕх рѕЏрІЋріерѕЇ</h2>
        <div style="background-color: #00a08e; color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
            <h3>рІеріЦрѕГрѕхрІј рІерѕџрІЏріЋ рѕўрїаріЋ:</h3>
            <p id="business-balance-display" style="font-size: 30px; font-weight: bold;">0.00 USD</p>
        </div>
        <p style="font-size: 14px; color: #777;">рїѕріЋрІўрЅЦрІј рІѕрІ░ рІХрѕІрѕГ ($) рЅ░рЅђрІГрѕ« рІГрЅђрѕўрїБрѕЇрЇб</p>

        <button class="success-btn" onclick="showView('deposit-view')">­Ъњх рїѕріЋрІўрЅЦ рѕѕрѕЏрѕхрЅђрѕўрїЦ</button>
        <button class="main-btn" onclick="showView('withdraw-view')">­ЪњИ рїѕріЋрІўрЅЦ рѕѕрѕЏрІЇрїБрЅх</button>
        <button class="premium-btn" onclick="showAlert('рѕѕріарѕѕрѕЮ ріарЅђрЇЇ ріарїѕрѕЇрїЇрѕјрЅХрЅй рЅарІХрѕІрѕГ рІГріГрЇѕрѕЅ...', 'info')">­Ъїљ рІЊрѕѕрѕЮ ріарЅђрЇЇ рїЇрІб</button>

        <button class="delete-btn" style="background-color: #6c757d;" onclick="goBackToDashboard()">рІѕрІ░ ріІрѕІ рЅ░рѕўрѕѕрѕх</button>
    </div>

    <!-- 10. Withdraw View (With Password & CBE Fix) -->
    <div class="section" id="withdraw-view">
        <h2>­ЪњИ рїѕріЋрІўрЅЦ рѕЏрІЇрїБрЅх</h2>
        <input type="number" id="withdraw-amount" placeholder="рІерІХрѕІрѕГ рѕўрїаріЋ ($) - ріе1 рІХрѕІрѕГ рЅарѕІрІГ">
        <select id="withdraw-method" onchange="toggleReceiverInput()">
            <option value="">рІўрІ┤ рІГрѕЮрѕерїА</option>
            <option value="Telebirr">рЅ┤рѕїрЅЦрѕГ</option>
            <option value="CBE">CBE (ріЋрїЇрІх рЅБріЋріГ)</option>
            <option value="PayPal">PayPal</option>
        </select>
        <input type="text" id="withdraw-receiver" placeholder="рЅЂрїЦрѕГ/ріаріФрІЇріЋрЅх рІФрѕхрїѕрЅА" style="display:none;">
        
        <button class="main-btn" onclick="initiateWithdraw()">рїѕріЋрІўрЅЦ ріарІЇрїБ</button>
        <button class="delete-btn" onclick="showView('business-dashboard')">рЅ░рѕўрѕѕрѕх</button>
    </div>

    <!-- 11. Deposit View -->
    <div class="section" id="deposit-view">
        <h2>­Ъњх рїѕріЋрІўрЅЦ рѕЏрѕхрїѕрЅБрЅх</h2>
        <input type="number" id="deposit-amount" placeholder="рІеETB рѕўрїаріЋ (100+)">
        <p>рІ░рѕерѕ░ріЮ рЇјрЅХрЇА</p>
        <input type="file" id="deposit-receipt">
        <button class="success-btn" onclick="handleDeposit()">рїѕріЋрІўрЅЦ ріарѕхрЅђрѕЮрїЦ</button>
        <button class="delete-btn" onclick="showView('business-dashboard')">рЅ░рѕўрѕѕрѕх</button>
    </div>

    <!-- 12. View Selection -->
    <div class="section" id="view-select">
        <h2>­ЪЊё рѕўрѕерїЃ рѕўрѕўрѕЇріерЅх</h2>
        <p>рІерЅхріЏрІЇріЋ ріарІГріљрЅх рѕўрѕерїЃ рѕўрѕўрѕЇріерЅх рІГрЇѕрѕЇрїІрѕЅ?</p>
        <button class="main-btn" onclick="displayPosts('text')">рЇЁрѕЂрЇЇ / рЅ┤ріГрѕхрЅх</button>
        <button class="main-btn" onclick="displayPosts('image')">рѕЮрѕхрѕЇ / рЇјрЅХ</button>
        <button class="main-btn" onclick="displayPosts('audio')">рЅфрІ▓рІ« / рідрІ▓рІ«</button>
        <button class="delete-btn" onclick="goBackToDashboard()">рЅ░рѕўрѕѕрѕх</button>
    </div>

    <!-- 13. Posts Viewer (With Media Comments) -->
    <div class="section" id="posts-viewer-page">
        <h2 id="viewer-title">рІерЅ░рѕѕрїарЇЅ рѕўрѕерїЃрІјрЅй</h2>
        <div id="posts-container"></div>
        <button class="delete-btn" onclick="showView('view-select')">рЅ░рѕўрѕѕрѕх</button>
    </div>

    <!-- 14. Post Creation -->
    <div class="section" id="post-select">
        <h2>РюЇ№ИЈ рѕўрѕерїЃ рѕўрѕѕрїарЇЇ</h2>
        <input type="text" id="post-title" placeholder="рѕГрІЋрѕх (Title)">
        <textarea id="post-content" placeholder="рїйрѕЂрЇЇ ріерѕєріљ ріЦрІџрѕЁ рІГрЇЃрЇЅ..."></textarea>
        <p>рЇІрІГрѕЇ рѕѕрѕўрѕѕрїарЇЇ (рѕЮрѕхрѕЇ/рЅфрІ▓рІ«/рідрІ▓рІ«) рѕЮрѕерїЦрЇА</p>
        <input type="file" id="post-file">
        
        <button class="success-btn" onclick="handlePost()">рІГрѕѕрїЦрЇЅ (Post)</button>
        <button class="delete-btn" onclick="goBackToDashboard()">рЅ░рѕўрѕѕрѕх</button>
    </div>

    <!-- 15. Delete Files View -->
    <div class="section" id="delete-files-view">
        <h2>­ЪЌЉ№ИЈ рІеріЦрѕГрѕхрІјріЋ рЇІрІГрѕјрЅй рѕўрІ░рѕѕрЅх</h2>
        <p>ріЦрѕГрѕхрІј рІерѕѕрїарЇЅрЅх рѕўрѕерїЃ рЅЦрЅ╗ рІГрЅ│рІФрѕЇ ріЦріЊ рѕўрІ░рѕѕрЅх рІГрЅ╗рѕІрѕЇрЇб</p>
        <div id="delete-list-container"></div>
        <button class="delete-btn" onclick="goBackToDashboard()">рЅ░рѕўрѕѕрѕх</button>
    </div>

    <!-- 16. User List View -->
    <div class="section" id="user-list-view">
        <h2 id="user-list-title">­ЪЉЦ рІерЅ░рїарЅЃрѕџрІјрЅй рІЮрѕГрІЮрѕГ</h2>
        <div id="user-list-container"></div>
        <button id="user-list-done-btn" class="success-btn" style="display:none;">рїерѕГрѕ╗рѕѕрѕЂ</button>
        <button class="delete-btn" onclick="goBackToDashboard()">рЅ░рѕўрѕѕрѕх</button>
    </div>

    <!-- 17. Private Chat View -->
    <div class="section" id="private-chat-room">
        <h2 id="chat-header">рІЇрІГрІГрЅх</h2>
        <div id="chat-messages" style="height:350px; overflow-y:auto; background:#fff; border:1px solid #ccc; padding:10px; border-radius:8px;"></div>
        
        <div style="display:flex; gap:5px; margin-top:10px;">
            <input type="text" id="chat-input" placeholder="рѕўрѕЇріЦріГрЅх..." style="flex:1;">
            <button style="width:auto; padding:10px;" class="main-btn" onclick="sendChatMessage('text')">рѕІріГ</button>
        </div>
        <div class="media-btn-group">
             <button class="feature-btn" onclick="triggerChatMedia('image')">­ЪЊи рЇјрЅХ</button>
             <button class="feature-btn" onclick="triggerChatMedia('video')">­ЪјЦ рЅфрІ▓рІ«</button>
             <button class="feature-btn" onclick="triggerChatMedia('audio')">­ЪјЎ№ИЈ рІхрѕЮрЇЁ</button>
        </div>
        <input type="file" id="chat-file-hidden" style="display:none;">
        <button class="delete-btn" onclick="goBackToDashboard()">рЅ░рѕўрѕѕрѕх</button>
    </div>

    <!-- 18. Group List & Manage -->
    <div class="section" id="my-groups-view">
        <h2>­ЪЊѓ рІерЇѕрїарѕГрі│рЅИрІЇ ріЦріЊ ріарЅБрѕЇ рІерѕєріЋріЕрЅБрЅИрІЇ рїЇрѕЕрЇќрЅй</h2>
        <div id="groups-list-container"></div>
        <button class="delete-btn" onclick="goBackToDashboard()">рЅ░рѕўрѕѕрѕх</button>
    </div>

    <div class="section" id="single-group-manage">
        <h2 id="group-manage-title">рїЇрѕЕрЇЋ</h2>
        <div id="group-posts-container" style="height:300px; overflow-y:auto; background:#f9f9f9; border:1px solid #ddd; padding:10px;"></div>
        
        <div class="media-btn-group">
            <button class="main-btn" onclick="postToGroup('text')">РюЇ№ИЈ рїйрѕЂрЇЇ</button>
            <button class="feature-btn" onclick="postToGroup('media')">­ЪЊи/­ЪјЦ рѕЮрѕхрѕЇ/рЅфрІ▓рІ«</button>
        </div>
        <div id="group-admin-controls" style="margin-top:10px; display:none;">
            <button class="business-btn" onclick="showGroupMembers()">ріарЅБрѕІрЅхріЋ рѕЏрѕхрЅ░рІ│рІ░рѕГ (Admin)</button>
        </div>
        <button class="delete-btn" onclick="showMyGroupsList()">рЅ░рѕўрѕѕрѕх</button>
    </div>

    <!-- 19. Feedback Center (Multimedia) -->
    <div class="section" id="feedback-center">
        <h2>­ЪЊЮ рѕѕріарЇЋ рЇѕрїБрѕф ріарѕхрЅ░рІФрІерЅх рІГрѕхрїА</h2>
        <p>рЅарѕЮріЋ рѕўрѕЇріЕ ріарѕхрЅ░рІФрІерЅх рѕўрѕхрїарЅх рІГрЇѕрѕЇрїІрѕЅ?</p>
        <button class="main-btn" onclick="handleFeedback('text')">рЅарЇЁрѕЂрЇЇ</button>
        <button class="feature-btn" onclick="handleFeedback('voice')">рЅарІхрѕЮрЇЁ (Voice)</button>
        <button class="premium-btn" onclick="handleFeedback('video')">рЅарЅфрІ▓рІ« (Live)</button>
        <input type="file" id="feedback-media-input" style="display:none;">
        <button class="delete-btn" onclick="goBackToDashboard()">рЅ░рѕўрѕѕрѕх</button>
    </div>

    <script>
        // --- Data & State ---
        let currentUser = JSON.parse(localStorage.getItem('fasil_user')) || null;
        let users = JSON.parse(localStorage.getItem('fasil_users')) || [];
        let posts = JSON.parse(localStorage.getItem('fasil_posts')) || [];
        let groups = JSON.parse(localStorage.getItem('fasil_groups')) || [];
        let chats = JSON.parse(localStorage.getItem('fasil_chats')) || {};
        let activeChatPartner = null;
        let activeGroup = null;

        // --- Utils ---
        function showView(id) {
            document.querySelectorAll('.section').forEach(el => el.style.display = 'none');
            document.getElementById(id).style.display = 'block';
            if (id === 'business-dashboard') updateBalance();
        }

        function showAlert(msg, type) {
            const modal = document.getElementById('custom-modal');
            const title = document.getElementById('modal-title');
            document.getElementById('modal-text').textContent = msg;
            
            if (type === 'error') { title.textContent = "РЮї рѕхрѕЁрЅ░рЅх"; title.style.color = "red"; }
            else if (type === 'success') { title.textContent = "РюЁ рѕхрігрЅх"; title.style.color = "green"; }
            else { title.textContent = "Рё╣№ИЈ рѕўрѕерїЃ"; title.style.color = "#007bff"; }
            
            modal.style.display = 'flex';
        }

        function closeModal() { document.getElementById('custom-modal').style.display = 'none'; }

        function goBackToDashboard() {
            if(currentUser.subscription === 'premium') showView('premium-dashboard');
            else showView('free-dashboard');
        }

        function checkFreeSignupForPremium() {
            if(!currentUser) { showAlert("ріЦрЅБріГрІј рѕўрїђрѕўрѕфрІФ рЅаріљрЇЃ рІГрѕўрІЮрїѕрЅАрЇб", "error"); showView('signup-form'); }
            else showView('premium-options');
        }

        // --- Auth ---
        function handleSignUp() {
            const name = document.getElementById('signup-name').value;
            const phone = document.getElementById('signup-phone').value;
            const email = document.getElementById('signup-email').value;
            const pass = document.getElementById('signup-password').value;
            const photo = document.getElementById('signup-profile-photo').files[0];

            if(!name || !phone || !email || !pass || !photo) { showAlert("рѕЂрѕЅріЋрѕЮ рѕўрѕерїЃ рѕЎрѕІрЇб", "error"); return; }
            if(!email.endsWith("@gmail.com")) { showAlert("рібрѕюрѕЇ @gmail.com рЅЦрЅ╗ ріљрІЇ рІерѕџрЅђрЅарѕѕрІЇрЇб", "error"); return; }
            if(users.some(u => u.phone === phone)) { showAlert("рѕхрѕЇріГ рЅЂрїЦрѕЕ рЅ░рѕўрІЮрїЇрЅДрѕЇрЇб", "error"); return; }
            if(users.some(u => u.email === email)) { showAlert("рібрѕюрѕЅ рЅ░рѕўрІЮрїЇрЅДрѕЇрЇб", "error"); return; }

            const reader = new FileReader();
            reader.onload = e => {
                const newUser = { 
                    name, phone, email, password: pass, 
                    photo: e.target.result, 
                    subscription: 'free', balance: 0 
                };
                users.push(newUser);
                localStorage.setItem('fasil_users', JSON.stringify(users));
                showAlert("рѕЮрІЮрїѕрЅБ рЅ░рѕ│ріГрЅирѕЇ!", "success");
                showView('login-form');
            };
            reader.readAsDataURL(photo);
        }

        function handleLogin() {
            const phone = document.getElementById('login-phone').value;
            const pass = document.getElementById('login-password').value;
            const user = users.find(u => u.phone === phone && u.password === pass);

            if(user) {
                currentUser = user;
                localStorage.setItem('fasil_user', JSON.stringify(user));
                goBackToDashboard();
            } else {
                showAlert("рѕўрѕерїЃрІЇ рѕЇріГ ріарІГрІ░рѕѕрѕЮрЇб", "error");
            }
        }

        function handleLogout() {
            currentUser = null;
            localStorage.removeItem('fasil_user');
            showView('home-view');
        }

        function checkAuthAndRedirect(view) {
            if(!currentUser) showView('login-form');
            else showView(view);
        }

        // --- Posts & Viewing ---
        function handlePost() {
            const title = document.getElementById('post-title').value;
            const content = document.getElementById('post-content').value;
            const file = document.getElementById('post-file').files[0];

            if(!title) { showAlert("рѕГрІЋрѕх ріарѕхрїѕрЅБрЇб", "error"); return; }

            const save = (data, type) => {
                posts.unshift({
                    id: Date.now(), title, content, 
                    fileData: data, type,
                    uploaderPhone: currentUser.phone, 
                    uploaderName: currentUser.name,
                    timestamp: Date.now(),
                    comments: []
                });
                localStorage.setItem('fasil_posts', JSON.stringify(posts));
                showAlert("рЅ░рѕѕрїЦрЇЈрѕЇ!", "success");
                goBackToDashboard();
            };

            if(file) {
                let type = file.type.startsWith('image') ? 'image' : (file.type.startsWith('video') ? 'video' : 'audio');
                const reader = new FileReader();
                reader.onload = e => save(e.target.result, type);
                reader.readAsDataURL(file);
            } else save(null, 'text');
        }

        function displayPosts(filterType) {
            const container = document.getElementById('posts-container');
            container.innerHTML = '';
            
            // Filter logic
            let filtered = posts.filter(p => {
                if(filterType === 'text') return p.type === 'text';
                if(filterType === 'image') return p.type === 'image';
                return p.type === 'video' || p.type === 'audio';
            });

            if(filtered.length === 0) container.innerHTML = "<p>рѕЮріЋрѕЮ рѕўрѕерїЃ рІерѕѕрѕЮрЇб</p>";

            filtered.forEach(p => {
                let media = '';
                if(p.fileData) {
                    if(p.type === 'image') media = `<img src="${p.fileData}" style="max-width:100%; margin-top:10px;">`;
                    else if(p.type === 'video') media = `<video src="${p.fileData}" controls style="width:100%; margin-top:10px;"></video>`;
                    else media = `<audio src="${p.fileData}" controls style="width:100%; margin-top:10px;"></audio>`;
                }

                // Render Comments
                let commentsHtml = p.comments.map(c => {
                    let cMedia = '';
                    if(c.fileData) {
                        if(c.type === 'image') cMedia = `<br><img src="${c.fileData}" style="width:50px;">`;
                        else if(c.type === 'audio') cMedia = `<br><audio src="${c.fileData}" controls></audio>`;
                        else cMedia = `<br><video src="${c.fileData}" controls style="width:100px;"></video>`;
                    }
                    return `<div class="single-comment"><b>${c.user}:</b> ${c.text || ''} ${cMedia}</div>`;
                }).join('');

                const div = document.createElement('div');
                div.className = 'post-card';
                div.innerHTML = `
                    <h3 style="color:#007bff; margin:0;">${p.title}</h3>
                    <small style="color:gray;">By ${p.uploaderName}</small>
                    <p>${p.content}</p>
                    ${media}
                    
                    <div class="comment-section">
                        <h4>ріарѕхрЅ░рІФрІерЅХрЅй (${p.comments.length})</h4>
                        <div>${commentsHtml}</div>
                        <div style="margin-top:10px;">
                            <input type="text" id="comm-text-${p.id}" placeholder="ріарѕхрЅ░рІФрІерЅх...">
                            <div class="media-btn-group">
                                <button class="main-btn" onclick="addComment(${p.id}, 'text')">рѕІріГ</button>
                                <button class="feature-btn" onclick="addCommentMedia(${p.id}, 'audio')">­Ъјц</button>
                                <button class="feature-btn" onclick="addCommentMedia(${p.id}, 'video')">­ЪјЦ</button>
                                <button class="feature-btn" onclick="addCommentMedia(${p.id}, 'image')">­ЪЊи</button>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
            showView('posts-viewer-page');
        }

        // --- Comments Logic ---
        function addComment(pid, type, fileData = null) {
            const txt = document.getElementById(`comm-text-${pid}`)?.value || '';
            if(type === 'text' && !txt) return;

            const idx = posts.findIndex(p => p.id === pid);
            if(idx > -1) {
                posts[idx].comments.push({
                    user: currentUser.name, text: txt, fileData, type
                });
                localStorage.setItem('fasil_posts', JSON.stringify(posts));
                // Refresh
                let currentFilter = posts[idx].type;
                if(currentFilter === 'video') currentFilter = 'audio';
                displayPosts(currentFilter === 'text' ? 'text' : (currentFilter === 'image' ? 'image' : 'audio'));
            }
        }

        function addCommentMedia(pid, type) {
            // Fake file input trigger
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = type === 'image' ? 'image/*' : (type === 'video' ? 'video/*' : 'audio/*');
            input.onchange = e => {
                const reader = new FileReader();
                reader.onload = evt => addComment(pid, type, evt.target.result);
                reader.readAsDataURL(e.target.files[0]);
            };
            input.click();
        }

        // --- Delete Logic (Own posts only) ---
        function showDeleteList() {
            const container = document.getElementById('delete-list-container');
            container.innerHTML = '';
            const myPosts = posts.filter(p => p.uploaderPhone === currentUser.phone);
            
            if(myPosts.length === 0) container.innerHTML = "<p>рІерѕФрѕхрІј рЇќрѕхрЅх рІерѕѕрѕЮрЇб</p>";
            
            myPosts.forEach(p => {
                const div = document.createElement('div');
                div.className = 'post-card';
                div.innerHTML = `
                    <h4>${p.title}</h4>
                    <button class="delete-btn" onclick="deletePost(${p.id})">рІ░рѕЇрЅх (Delete)</button>
                `;
                container.appendChild(div);
            });
            showView('delete-files-view');
        }

        function deletePost(id) {
            if(confirm("ріЦрѕГрїЇрїаріЏ ріљрІјрЅх?")) {
                posts = posts.filter(p => p.id !== id);
                localStorage.setItem('fasil_posts', JSON.stringify(posts));
                showDeleteList();
            }
        }

        // --- User List ---
        function showUserList(isSelection) {
            const container = document.getElementById('user-list-container');
            container.innerHTML = '';
            users.forEach(u => {
                if(u.phone === currentUser.phone) return;
                const div = document.createElement('div');
                div.className = 'user-card';
                div.innerHTML = `<img src="${u.photo}"> <b>${u.name}</b>`;
                if(isSelection) {
                    div.style.cursor = 'pointer';
                    div.onclick = () => div.classList.toggle('selected-user'); 
                }
                container.appendChild(div);
            });
            showView('user-list-view');
            document.getElementById('user-list-done-btn').style.display = isSelection ? 'block' : 'none';
        }

        // --- Private Chat ---
        function handlePrivateChatStart() {
            showUserList(false); // just list to click
            const container = document.getElementById('user-list-container');
            // Override click
            Array.from(container.children).forEach((div, idx) => {
                // Find actual user skipping self
                const targetUser = users.filter(u => u.phone !== currentUser.phone)[idx];
                div.style.cursor = 'pointer';
                div.onclick = () => openChat(targetUser);
            });
        }

        function openChat(partner) {
            activeChatPartner = partner;
            document.getElementById('chat-header').textContent = `Chat with ${partner.name}`;
            renderChat();
            showView('private-chat-room');
        }

        function renderChat() {
            const id = [currentUser.phone, activeChatPartner.phone].sort().join('_');
            const msgs = chats[id] || [];
            const container = document.getElementById('chat-messages');
            container.innerHTML = msgs.map(m => {
                let media = m.fileData ? (m.type==='image' ? `<img src="${m.fileData}" style="width:100px;">` : `[Media: ${m.type}]`) : '';
                return `<div class="chat-message" style="justify-content:${m.sender===currentUser.phone?'flex-end':'flex-start'}">
                    <div style="background:${m.sender===currentUser.phone?'#dcf8c6':'#fff'}; padding:5px 10px; border-radius:10px;">
                        ${m.text || ''} ${media}
                    </div>
                </div>`;
            }).join('');
        }

        function sendChatMessage(type, fileData=null) {
            const id = [currentUser.phone, activeChatPartner.phone].sort().join('_');
            const txt = document.getElementById('chat-input').value;
            if(type==='text' && !txt) return;

            if(!chats[id]) chats[id] = [];
            chats[id].push({ sender: currentUser.phone, text: type==='text'?txt:null, type, fileData });
            localStorage.setItem('fasil_chats', JSON.stringify(chats));
            document.getElementById('chat-input').value = '';
            renderChat();
        }
        
        function triggerChatMedia(type) {
            const input = document.getElementById('chat-file-hidden');
            input.onchange = e => {
                const r = new FileReader();
                r.onload = evt => sendChatMessage(type, evt.target.result);
                r.readAsDataURL(e.target.files[0]);
            };
            input.click();
        }

        // --- Groups ---
        function handleGroupCreation() {
            const name = prompt("рІерїЇрѕЕрЇЋ рѕхрѕЮ:");
            if(!name) return;
            showUserList(true);
            const btn = document.getElementById('user-list-done-btn');
            btn.onclick = () => {
                const selected = document.querySelectorAll('.selected-user');
                if(selected.length < 1) { showAlert("рЅбрІФріЋрѕх 1 рѕ░рІЇ рІГрѕЮрѕерїАрЇб", "error"); return; }
                // In real app, map elements back to phone numbers. 
                // Simplified: Just creating mock group
                groups.push({
                    id: Date.now(), name, creator: currentUser.phone,
                    members: [currentUser.phone], posts: []
                });
                localStorage.setItem('fasil_groups', JSON.stringify(groups));
                showAlert("рїЇрѕЕрЇЋ рЅ░рЇѕрїЦрѕ»рѕЇ!", "success");
                goBackToDashboard();
            };
        }

        function showMyGroupsList() {
            const container = document.getElementById('groups-list-container');
            container.innerHTML = '';
            // Filter where creator or member (simplified to creator for demo logic)
            const myGroups = groups.filter(g => g.creator === currentUser.phone); // Or members logic
            
            if(myGroups.length === 0) container.innerHTML = "<p>рїЇрѕЕрЇЋ рІерѕѕрІјрЅхрѕЮрЇб</p>";

            myGroups.forEach(g => {
                const div = document.createElement('div');
                div.className = 'user-card';
                div.innerHTML = `<b>${g.name}</b> (рЇѕрїБрѕф: ріЦрѕГрѕхрІј)`;
                div.style.cursor = 'pointer';
                div.onclick = () => openGroup(g);
                container.appendChild(div);
            });
            showView('my-groups-view');
        }

        function openGroup(g) {
            activeGroup = g;
            document.getElementById('group-manage-title').textContent = g.name;
            const container = document.getElementById('group-posts-container');
            container.innerHTML = g.posts.map(p => `<div><b>${p.sender}:</b> ${p.type}</div>`).join('');
            
            // Only creator manages members
            const adminPanel = document.getElementById('group-admin-controls');
            if(g.creator === currentUser.phone) {
                adminPanel.style.display = 'block';
            } else {
                // If not creator and tries to manage? Alert and go back (User rule #3)
                // But here we are just viewing. The list only showed created groups. 
                // If viewing global groups:
                // if(g.creator !== currentUser.phone && !permitted) { alert("Access Denied"); return; }
            }
            showView('single-group-manage');
        }
        
        function postToGroup(type) {
             // Simplified post logic
             activeGroup.posts.push({ sender: currentUser.name, type: type === 'text' ? 'Text Msg' : 'Media' });
             localStorage.setItem('fasil_groups', JSON.stringify(groups));
             openGroup(activeGroup); // refresh
        }

        // --- Business ---
        function updateBalance() { document.getElementById('business-balance-display').textContent = currentUser.balance.toFixed(2) + " USD"; }
        
        function toggleReceiverInput() {
            const val = document.getElementById('withdraw-method').value;
            const inp = document.getElementById('withdraw-receiver');
            inp.style.display = val ? 'block' : 'none';
            if(val === 'CBE') inp.placeholder = "1000... (13 Digits)";
            else if(val === 'Telebirr') inp.placeholder = "09...";
        }

        function initiateWithdraw() {
            const amt = document.getElementById('withdraw-amount').value;
            const method = document.getElementById('withdraw-method').value;
            const rec = document.getElementById('withdraw-receiver').value;
            
            if(!amt || !method || !rec) { showAlert("рѕўрѕерїЃ ріарѕЪрѕІрЇб", "error"); return; }
            
            // CBE Fix
            if(method === 'CBE') {
                if(!((rec.startsWith('1000') || rec.startsWith('10000')) && rec.length === 13)) {
                    showAlert("CBE рЅЂрїЦрѕГ 13 ріарѕЃрІЮ ріЦріЊ рЅа1000/10000 рѕўрїђрѕўрѕГ ріарѕѕрЅарЅхрЇб", "error"); return;
                }
            }
            
            document.getElementById('password-modal').style.display = 'flex';
        }
        
        function confirmWithdrawWithPassword() {
             const p = document.getElementById('modal-password-input').value;
             if(p === currentUser.password) {
                 currentUser.balance -= parseFloat(document.getElementById('withdraw-amount').value);
                 localStorage.setItem('fasil_user', JSON.stringify(currentUser));
                 document.getElementById('password-modal').style.display = 'none';
                 showAlert("рїѕріЋрІўрЅЦ рѕЏрІЇрїБрЅх рЅ░рѕ│ріГрЅирѕЇ!", "success");
                 goBackToDashboard();
             } else {
                 alert("рЇЊрѕхрІѕрѕГрІх рѕхрѕЁрЅ░рЅх ріљрІЇрЇб");
             }
        }
        
        function handleDeposit() {
            const amt = parseFloat(document.getElementById('deposit-amount').value);
            if(amt >= 100) {
                 currentUser.balance += (amt / 100);
                 localStorage.setItem('fasil_user', JSON.stringify(currentUser));
                 showAlert("рїѕріЋрІўрЅЦ рїѕрЅб рѕєріЌрѕЇ!", "success");
                 goBackToDashboard();
            } else showAlert("рЅбрІФріЋрѕх 100 рЅЦрѕГрЇб", "error");
        }
        
        function handleFeedback(type) {
            if(type === 'text') {
                const t = prompt("ріарѕхрЅ░рІФрІерЅх:");
                if(t) showAlert("рЅ░рѕІріе!", "success");
            } else {
                const inp = document.getElementById('feedback-media-input');
                if(type === 'video') inp.setAttribute('capture', 'camcorder');
                else inp.removeAttribute('capture');
                inp.click();
                inp.onchange = () => showAlert("рЇІрІГрѕЇ рЅ░рѕІріе!", "success");
            }
        }

    </script>
</body>
</html>

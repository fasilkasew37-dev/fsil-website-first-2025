<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рЇІрѕ▓рѕЇ рІїрЅЦ ріарЇЋ - Fasil Web App (V12.2 - Fully Debugged)</title>
    <style>
        /* --- рѕўрІ░рЅаріЏ CSS --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            padding: 20px;
            background-color: #f0f4f8;
            color: #333;
        }
        .section {
            max-width: 700px;
            margin: 40px auto;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            border-top: 6px solid #007bff;
            text-align: left;
            display: none;
        }
        h1 { color: #007bff; font-size: 32px; margin-bottom: 10px; text-align: center; }
        h2 { color: #555; font-size: 24px; margin-top: 25px; margin-bottom: 25px; text-align: center; }
        
        /* --- рІерїЇрЅЦрІЊрЅх рѕхрЅ│рІГрѕјрЅй --- */
        input[type="text"], input[type="email"], input[type="password"], input[type="number"], select, textarea, input[type="file"] {
            width: 90%;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 16px;
        }
        
        /* --- рІеріарІЮрѕФрѕГ рѕўрѕ░рѕерЅх --- */
        .button-link, button {
            display: block;
            width: 90%;
            padding: 18px;
            margin: 15px auto;
            text-align: center;
            border-radius: 10px;
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            font-size: 18px;
        }

        /* --- рІеріарІЮрѕФрѕГ рЅђрѕѕрѕърЅй --- */
        .main-btn {
            background-color: #007bff;
            color: white;
            border: none;
        }
        .main-btn:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }
        
        .success-btn {
            background-color: #28a745;
            color: white;
            border: none;
        }
        
        .delete-btn {
            background-color: #dc3545;
            color: white;
            border: none;
        }
        .wallet-btn {
            background-color: #1abc9c;
            color: white;
            border: none;
        }
        
        /* ================================================== */
        /* === рІерЅ░рѕ╗рѕ╗рѕѕ рІерІ│рѕйрЅдрѕГрІх ріарІЮрѕФрѕГ рІ▓рІЏрІГріЋ (Side-by-Side & Large Blue) === */
        /* ================================================== */

        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 10px auto;
            width: 95%; 
        }

        .dashboard-grid .button-link,
        .dashboard-grid button {
            width: 100%;
            margin: 0;
            /* рЅхрѕЇрЅЁ ріЦріЊ рѕ░рѕЏрІФрІі ріЦріЋрІ▓рѕєріЋ рѕЏрѕхрЅ░ріФріерІФ */
            padding: 25px 15px; 
            font-size: 17px; 
            background-color: #007bff; /* рІІріЊрІЇ рѕ░рѕЏрІФрІі рЅђрѕѕрѕЮ */
            color: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid #0056b3;
            
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            line-height: 1.4;
        }
        
        /* рѕѕрІерЅх рІФрѕЅ рІерІ│рѕйрЅдрѕГрІх ріарІЮрѕФрѕ«рЅй (Wallet, Premium, Delete) */
        .dashboard-grid .wallet-btn { background-color: #1abc9c; border-color: #148f77; }
        .dashboard-grid .premium-btn { background-color: #ffc107; color: #333; border-color: #e0a800; }
        .dashboard-grid .delete-btn { background-color: #dc3545; border-color: #c82333; }
        .dashboard-grid .global-pay-btn { background-color: #2e7d32; border-color: #1b5e20; }


        @media (max-width: 650px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }
        /* ================================================== */
        
        /* --- ріФрѕГрІХрЅй ріЦріЊ рѕЇрІЕ рЅдрЅ│рІјрЅй --- */
        .intro-text-box, .payment-info-box {
            background-color: #e9ecef;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            border-left: 5px solid #007bff;
        }

        .alert-box {
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
        }
        .success-alert { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error-alert { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }

        /* --- Loading Spinner --- */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            flex-direction: column;
            font-size: 20px;
            font-weight: bold;
            color: #007bff;
        }
        .spinner {
            border: 8px solid #f3f3f3;
            border-top: 8px solid #007bff;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* --- рІерЇЋрѕІріЋ ріФрѕГрІх --- */
        .plan-card {
            padding: 20px;
            border: 2px solid #007bff;
            border-radius: 10px;
            margin-bottom: 15px;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .plan-card:hover {
            background-color: #e9ecef;
        }
        .plan-card h3 {
            margin-top: 0;
            color: #007bff;
        }
        .plan-btn {
            margin: 10px auto;
            width: 80%;
            padding: 10px;
        }
    </style>
</head>
<body>

    <div class="loading-overlay" id="loading-overlay">
        <div class="spinner"></div>
        <p id="loading-message">... ріЦрІерЅ░рїФріљ ріљрІЇ (Loading) ...</p>
    </div>

    <div class="section" id="home-view">
        <h1>ріЦріЋрі│ріЋ рІ░рѕЁріЊ рѕўрїА рІѕрІ░ рЇІрѕ▓рѕЇ рІїрЅЦ ріарЇЋ!</h1>
        <div class="intro-text-box">
            <h3>­Ъїљ рѕхрѕѕ рЇІрѕ▓рѕЇ рІїрЅЦ ріарЇЋ</h3>
            <p><strong>рЇІрѕ▓рѕЇ рІїрЅЦ ріарЇЋ</strong> рЅаріерЇЇрЅ░ріЏ рїЦрѕФрЅх ріЦріЊ рЇЇрїЦріљрЅх рІерѕџрѕ░рѕФ рІерІ▓рїѓрЅ│рѕЇ рѕўрїІрѕфрІФ рѕўрІхрѕеріГ ріљрІЇрЇб</p>
        </div>
        
        <h2 style="text-align: center;">рІерѕџрЇѕрѕЇрїЅрЅхріЋ рІеріарїѕрѕЇрїЇрѕјрЅх ріарІГріљрЅх рЅарѕўрѕЮрѕерїЦ рІГрїђрѕЮрѕЕ:</h2>
        
        <a href="#signup-form" class="button-link main-btn" onclick="updateView()">рѕўрѕўрІЮрїѕрЅЦ/рѕўрїЇрЅБрЅх (ріљрЇЃ)</a>
        <a href="#pricing" class="button-link premium-btn" style="background-color: #ffc107; color: #333;">рЅаріГрЇЇрІФ ріарѕЏрѕФрїГ (Premium)</a>
    </div>

    <div class="section" id="signup-form">
        <h2 id="signup-title">рѕўрѕўрІЮрїѕрЅбрІФ (Sign Up - ріљрЇЃ)</h2>
        <div class="alert-box error-alert" id="signup-error" style="display: none;"></div>
        <input type="text" id="signup-name" placeholder="рѕЎрѕЅ рѕхрѕЮ (Full Name)" required>
        <input type="text" id="signup-phone" placeholder="рѕхрѕЇріГ рЅЂрїЦрѕГ (Required) - рѕѕрѕјрїіріЋ" required>
        <input type="email" id="signup-email" placeholder="рібрѕюрѕЇ (Required)" required>
        <input type="password" id="signup-password" placeholder="рІерІГрѕѕрЇЇ рЅЃрѕЇ (6 ріарѕђрІЮ Password)" required maxlength="6">
        
        <button class="main-btn" onclick="handleSignUp()">рЅ░рѕўрІЮрїѕрЅЦ (Sign Up)</button>
        
        <p style="text-align: center; margin-top: 20px;"><a href="#login-form" onclick="updateView()">ріерІџрѕЁ рЅарЇірЅх рЅ░рѕўрІЮрїЇрЅарІІрѕЇ? рІГрїЇрЅА (Log In)</a></p>
    </div>
    
    <div class="section" id="profile-setup-prompt">
        <h2 style="color: #1abc9c;">­ЪјЅ ріЦріЋрі│ріЋ рІ░рѕх ріарѕЇрІј! рЅхрѕЮрІЮрїЇрЅЦрІј рЅ░рѕ│ріГрЅирѕЇ!</h2>
        <p style="text-align: center; font-size: 18px;">ріарѕЂріЋ рІерЇЋрѕ«рЇІрІГрѕЇ рЇјрЅХ рѕЏрѕхрїѕрЅБрЅх рІГрЇѕрѕЇрїІрѕЅ?</p>

        <label for="signup-profile-pic" style="display: block; margin: 10px 0 5px; font-weight: bold; width: 90%; margin-left: 5%;">­ЪЊи рІерЇЋрѕ«рЇІрІГрѕЇ рЇјрЅХ рІГрѕЮрѕерїА (Optional)</label>
        <input type="file" id="signup-profile-pic" accept="image/*" style="width: 90%; margin-bottom: 20px; border: none; padding: 0;">

        <button class="success-btn" onclick="setProfileAndContinue(false)">рЇјрЅХ ріарѕхрїѕрЅЦрЅ╝ ріЦрЅђрїЦрѕІрѕѕрѕЂ</button>
        <button class="delete-btn" onclick="setProfileAndContinue(true)">рІЮрѕѕрѕЇ/ріарѕЇрЇѕрѕЇрїЇрѕЮ</button>
    </div>

    <div class="section" id="login-form">
        <h2>рѕўрїЇрЅбрІФ (Log In)</h2>
        <div class="alert-box error-alert" id="login-error" style="display: none;"></div>
        <input type="text" id="login-phone" placeholder="рѕхрѕЇріГ рЅЂрїЦрѕГ (Required)" required>
        <input type="password" id="login-password" placeholder="рІерІГрѕѕрЇЇ рЅЃрѕЇ (Password)" required>
        
        <button class="success-btn" onclick="handleLogin()">рїЇрЅБ (Log In)</button>
        
        <p style="text-align: center; margin-top: 20px;"><a href="#signup-form" onclick="updateView()">ріарІ▓рѕх рЅ░рїарЅЃрѕџ? рІГрѕўрІЮрїѕрЅА (Sign Up)</a></p>
    </div>

    <div class="section" id="pricing">
        <h2>рІеріГрЇЇрІФ ріарѕЏрѕФрї«рЅй (Premium Plans)</h2>
        <p style="text-align: center;">ріерѕџріерЅ░рѕЅрЅх ріарѕЏрѕФрї«рЅй ріаріЋрІ▒ріЋ рЅарѕўрѕЮрѕерїЦ рІѕрІ░ ріГрЇЇрІФ рІГрЅђрїЦрѕЅрЇб</p>
        <div class="plan-card" onclick="selectPlan('daily')"><h3>рІЋрѕѕрЅ│рІі (Daily)</h3><p>5 рЅЦрѕГ (ETB)</p><button class="plan-btn success-btn" style="padding: 10px;">рІГрѕЁріЋ рѕЮрѕерїЦ</button></div>
        <div class="plan-card" onclick="selectPlan('weekly')"><h3>рѕ│рѕЮріЋрЅ│рІі (Weekly)</h3><p>25 рЅЦрѕГ (ETB)</p><button class="plan-btn success-btn" style="padding: 10px;">рІГрѕЁріЋ рѕЮрѕерїЦ</button></div>
        <div class="plan-card" onclick="selectPlan('monthly')"><h3>рІѕрѕГрѕЃрІі (Monthly)</h3><p>30 рЅЦрѕГ (ETB)</p><button class="plan-btn success-btn" style="padding: 10px;">рІГрѕЁріЋ рѕЮрѕерїЦ</button></div>
        <div class="plan-card" onclick="selectPlan('yearly')"><h3>рІЊрѕўрЅ│рІі (Yearly)</h3><p>100 рЅЦрѕГ (ETB)</p><button class="plan-btn success-btn" style="padding: 10px;">рІГрѕЁріЋ рѕЮрѕерїЦ</button></div>
        
        <button class="premium-btn" style="margin-top: 20px;" onclick="checkPremiumAccess('premium-services')">РГљ№ИЈ рЅаріГрЇЇрІФ ріарїѕрѕЇрїЇрѕјрЅ│рЅйріЋ рІФрѕЅрЅхріЋ рІГрѕўрѕЇріерЅ▒ / рІГрїјрЅЦріЎріЋ</button>
        
        <button class="wallet-btn" onclick="handleWalletAction('deposit')">­Ъњ░ рїѕріЋрІўрЅЦ рѕЏрѕхрЅђрѕўрїЦ/рѕЮріЋрІЏрѕг рѕўрїЇрІЏрЅх</button>
        
        <a href="#home-view" class="button-link delete-btn">рІѕрІ░ рѕўріљрѕ╗ рЅ░рѕўрѕѕрѕх</a>
    </div>

    <div class="section" id="payment-methods">
        <h2>ріГрЇЇрІФ рІГрЇѕрЇЁрѕЎ (Payment)</h2>
        <p id="selected-plan-info" style="font-weight: bold; color: #dc3545; text-align: center;"></p>
        
        <div class="payment-info-box">
            **­Ъњ░ рІеріГрЇЇрІФ рїЇрѕЇрЇЁріљрЅх:**
            <p>рІГрѕЁ рІерѕЎріерѕФ рїѕрїй рѕхрѕѕрѕєріљрЇБ ріерЅ│рЅй рІФрѕѕрІЇріЋ рЅарЅ░ріЋ рѕ▓рїФріЉ ріГрЇЇрІФрІЇ ріЦріЋрІ░рЅ░рЇѕрїИрѕў рІГрЅєрїарѕФрѕЇрЇб</p>
        </div>
        
        <button class="payment-btn success-btn" onclick="processPayment('Telebirr')">рЅ┤рѕїрЅЦрѕГ (Telebirr) рЅ░рїарЅђрѕЮ</button>
        <button class="payment-btn success-btn" onclick="processPayment('CBE')">CBE рІерЅБріЋріГ рІЮрІЇрІЇрѕГ рЅ░рїарЅђрѕЮ</button>
        <button class="payment-btn success-btn" onclick="processPayment('PayPal')">рЇћрІГрЇЊрѕЇ (PayPal) рЅ░рїарЅђрѕЮ</button>

        <a href="#pricing" class="button-link delete-btn">рІѕрІ░ рЇЋрѕІріќрЅй рЅ░рѕўрѕѕрѕх</a>
    </div>

    <div class="section" id="privacy-policy">
        <h2>рІерїЇрѕІрІіріљрЅх рЇќрѕірѕ▓ ріЦріЊ рїЦрЅЦрЅЁ рІеріарїарЅЃрЅђрѕЮ рѕўрѕўрѕфрІФ</h2>
        <div class="policy-text">
            <h3>­Ъћ┤ рїЦрЅЦрЅЁ рІеріарїарЅЃрЅђрѕЮ рѕўрѕўрѕфрІФ (Mandatory Use Policy)</h3>
            <ul>
                <li><strong>рІерЇќрѕѕрЅ▓ріФ рЅхрЅйрЅх/рЅЁрѕхрЅђрѕ│ рІерЅ░ріерѕѕріерѕѕ ріљрІЇрЇА</strong></li>
                <li><strong>рѕЃрѕ░рЅ░ріЏ рѕўрѕерїЃ рѕЏрѕ░рѕФрїерЅх рІерЅ░ріерѕѕріерѕѕ ріљрІЇрЇА</strong></li>
                <li><strong>ріЦрІхрѕю рїѕрІ░рЅЦрЇА</strong> ріарїѕрѕЇрїЇрѕјрЅ▒ріЋ рѕѕрѕўрїарЅђрѕЮ рЅбрІФріЋрѕх 18 рІЊрѕўрЅх рѕўрѕЎрѕІрЅх рїЇрІ┤рЅ│ ріљрІЇрЇб</li>
            </ul>
            
            <p style="margin-top: 15px; font-weight: bold; color: #007bff;">рЅарѕЏріЋріЏрІЇрѕЮ рїірІю рІГрѕЁріЋріЋ рЇќрѕірѕ▓ рїЦрѕ░рІЇ ріерЅ░рїѕріЎрЇБ ріаріФрІЇріЋрЅхрІј рІФрѕѕ рѕЏрѕхрїаріЋрЅђрЅѓрІФ рѕірІўрїІ рІГрЅйрѕІрѕЇрЇб</p>
        </div>
        
        <button class="main-btn" onclick="handleAgreePolicy()">ріЦрѕхрѕЏрѕЏрѕѕрѕЂ (Agree & Continue)</button>
        <a href="#policy-disagree" class="button-link delete-btn" onclick="updateView()">РЮї ріарѕЇрѕхрѕЏрѕЏрѕЮ/рІГрЅЁрѕГрЅЦріЮ (Disagree/Exit)</a>
    </div>

    <div class="section" id="dashboard">
        <h1>рІІріЊрІЇ ріарїѕрѕЇрїЇрѕјрЅх (Dashboard)</h1>
        
        <p style="text-align: center; font-weight: bold; color: #1abc9c; display: none;" id="user-balance-display">рІеріЦрѕГрѕхрІј рѕџрІЏріЋ: 0.00 ETB / 0.00 USD (Dummy)</p>
        
        <h2 style="margin-top: 30px;">рІІріЊ ріарїѕрѕЇрїЇрѕјрЅХрЅй:</h2>
        
        <div class="dashboard-grid">
            <button class="global-pay-btn" onclick="checkPremiumAccess('global-purchase-page')">
                ­ЪїЇ рІЊрѕѕрѕЮ ріарЅђрЇЇ рїЇрІЦрІјрЅйріЋ рѕѕрѕўрЇѕрЇђрѕЮ
            </button>
            <button class="premium-btn" onclick="checkPremiumAccess('premium-services')">
                РГљ№ИЈ рЅаріГрЇЇрІФ ріарїѕрѕЇрїЇрѕјрЅ│рЅйріЋ рІФрѕЅрЅхріЋ рІГрѕўрѕЇріерЅ▒
            </button>
            <button class="wallet-btn" onclick="handleWalletAction('deposit')">
                ­Ъњ░ рїѕріЋрІўрЅЦ рѕЏрѕхрЅђрѕўрїЦ/рѕЮріЋрІЏрѕг рѕўрїЇрІЏрЅх
            </button>
            <button class="wallet-btn" style="background-color: #e67e22;" onclick="handleWalletAction('withdraw')">
                ­ЪњИ рІФрѕхрЅђрѕўрїАрЅхріЋ рїѕріЋрІўрЅЦ рѕЏрІЇрїБрЅх
            </button>
            <a href="#post-text" class="button-link main-btn" onclick="updateView()">
                РюЇ№ИЈ рЇЁрѕЂрЇЇ рѕѕрѕўрѕѕрїарЇЇ
            </a>
            <a href="#view-text" class="button-link main-btn" onclick="updateView()">
                ­ЪЊё рІерЅ░рѕѕрїарЇѕ рїйрѕЉрЇЇ/рѕўрѕерїЃ рѕўрѕўрѕЇріерЅх
            </a>
        </div>
        
        <h2 style="margin-top: 30px;">рѕїрѕјрЅй:</h2>
        <div class="dashboard-grid">
            <a href="#post-image" class="button-link main-btn" onclick="updateView()">­Ъќ╝№ИЈ рѕЮрѕхрѕЇ/рЇјрЅХ рѕѕрѕўрѕѕрїарЇЇ</a>
            <a href="#post-audio" class="button-link main-btn" onclick="updateView()">­ЪјД рідрІ▓рІ«/рІхрѕЮрЇЁ рѕѕрѕўрѕѕрїарЇЇ</a>
            <a href="#view-image" class="button-link main-btn" onclick="updateView()">­Ъќ╝№ИЈ рѕЮрѕхрѕЇ/рЇјрЅХ рЅ░рѕўрѕЇріерЅх</a>
            <a href="#view-audio" class="button-link main-btn" onclick="updateView()">­ЪјД рідрІ▓рІ«/рІхрѕЮрЇЁ рЅ░рѕўрѕЇріерЅх</a>
            <a href="#feedback-page" class="button-link main-btn" onclick="updateView()">РГљ ріарѕхрЅ░рІФрІерЅх рѕѕрѕўрѕхрїарЅх</a>
            <a href="#delete-file-select" class="button-link delete-btn" onclick="updateView()">­ЪЌЉ№ИЈ рІерѕѕрїарЇЅрЅхріЋ рЇІрІГрѕЇ рѕѕрѕўрІ░рѕѕрЅх</a>
        </div>
    </div>

    <div class="section" id="post-image">
        <h2>­Ъќ╝№ИЈ ріарІ▓рѕх рѕЮрѕхрѕЇ рѕѕрѕўрѕѕрїарЇЇ</h2>
        <input type="text" id="post-image-title" placeholder="рѕГрІЋрѕх (Title)" required>
        <label for="post-image-file" style="display: block; margin: 15px 0 5px; font-weight: bold; width: 90%; margin-left: 5%;">рІерѕџрѕѕрїЦрЇЅрЅхріЋ рѕЮрѕхрѕЇ рІГрѕЮрѕерїА</label>
        <input type="file" id="post-image-file" accept="image/*" style="width: 90%; margin-bottom: 20px;">
        <button class="main-btn" onclick="handlePost('image')">рІГрѕѕрїЦрЇЅ (Post Image)</button>
        <a href="#dashboard" class="button-link back-btn delete-btn" onclick="updateView()">рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</a>
    </div>

    <div class="section" id="post-audio">
        <h2>­ЪјД ріарІ▓рѕх рідрІ▓рІ« рѕѕрѕўрѕѕрїарЇЇ</h2>
        <input type="text" id="post-audio-title" placeholder="рѕГрІЋрѕх (Title)" required>
        <label for="post-audio-file" style="display: block; margin: 15px 0 5px; font-weight: bold; width: 90%; margin-left: 5%;">рІерѕџрѕѕрїЦрЇЅрЅхріЋ рідрІ▓рІ« рІГрѕЮрѕерїА</label>
        <input type="file" id="post-audio-file" accept="audio/*" style="width: 90%; margin-bottom: 20px;">
        <button class="main-btn" onclick="handlePost('audio')">рІГрѕѕрїЦрЇЅ (Post Audio)</button>
        <a href="#dashboard" class="button-link back-btn delete-btn" onclick="updateView()">рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</a>
    </div>

    <div class="section" id="withdraw-money">
        <h2>­ЪњИ рІФрѕхрЅђрѕўрїАрЅхріЋ рїѕріЋрІўрЅЦ рѕЏрІЇрїБрЅх</h2>
        <p style="text-align: center; font-weight: bold; color: #1abc9c; margin-bottom: 20px;" id="user-balance-display-withdraw">рІеріЦрѕГрѕхрІј рѕџрІЏріЋ: 0.00 ETB / 0.00 USD (Dummy)</p>
        
        <p style="text-align: center; font-weight: bold;">рїѕріЋрІўрЅЦрІјріЋ рЅарІерЅхріЏрІЇ ріарїѕрѕЇрїЇрѕјрЅх рѕЏрІЇрїБрЅх рІГрЇѕрѕЇрїІрѕЅ?</p>

        <select id="withdraw-method" style="width: 90%;" onchange="updateRecipientPlaceholder()">
            <option value="Telebirr">рЅ┤рѕїрЅЦрѕГ (Telebirr) - рЅа ETB</option>
            <option value="CBE_Transfer">рѕ▓рЅбріб (CBE) - рЅа ETB</option>
            <option value="PayPal">рЇћрІГрЇЊрѕЇ (PayPal) - рЅа USD</option>
            <option value="Skrill">рѕхріГрѕфрѕЇ (Skrill) - рЅа USD</option>
            <option value="Wire_Transfer">рІЊрѕѕрѕЮ ріарЅђрЇЇ рІерЅБріЋріГ рІЮрІЇрІЇрѕГ - рЅа USD</option>
        </select>
        
        <input type="number" id="withdraw-amount" placeholder="рІерѕџрІФрІѕрїАрЅх рІерЅЦрѕГ рѕўрїаріЋ (ETB)" required min="1">
        <input type="text" id="withdraw-recipient-info" placeholder="рІерЅ┤рѕїрЅЦрѕГ рѕхрѕЇріГ рЅЂрїЦрѕГ" required>
        
        <button class="delete-btn" onclick="handleWithdrawTransfer()">рїѕріЋрІўрЅЦ рІФрѕхрЅ░рѕІрѕЇрЇЅ (Withdraw)</button>
        
        <a href="#dashboard" class="button-link back-btn main-btn" onclick="updateView()">рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</a>
    </div>

    <div class="section" id="deposit-money">
        <h2>­Ъњ░ рїѕріЋрІўрЅЦ рѕЏрѕхрЅђрѕўрїЦ (рѕЮріЋрІЏрѕг рѕўрїЇрІЏрЅх)</h2>
        <p style="text-align: center; font-weight: bold; color: #1abc9c; margin-bottom: 20px;" id="user-balance-display-deposit">рІеріЦрѕГрѕхрІј рѕџрІЏріЋ: 0.00 ETB / 0.00 USD (Dummy)</p>
        
        <p style="text-align: center; font-weight: bold;">рѕЮріЋ рІФрѕЁрѕЇ ETB рІѕрІ░ рІерІЇрїГ рѕЮріЋрІЏрѕг рѕўрЅђрІерѕГ рІГрЇѕрѕЇрїІрѕЅ?</p>

        <select id="deposit-currency" style="width: 90%;">
            <option value="USD">рІХрѕІрѕГ (USD)</option>
            <option value="EUR">рІЕрѕ« (EUR)</option>
            <option value="GBP">рЇЊрІЇріЋрІх (GBP)</option>
        </select>
        
        <input type="number" id="deposit-amount-etb" placeholder="рІерѕџрЅђрІГрѕЕрЅх рІерЅЦрѕГ рѕўрїаріЋ (ETB)" required min="10">
        
        <div id="exchange-rate-info" style="margin: 15px 0; padding: 10px; background-color: #f0f0f0; border-radius: 5px; text-align: center;">
            рІерѕЮріЋрІЏрѕф рЅ░рѕўріЋ: 1 USD = 55.00 ETB (Dummy Rate)
        </div>
        
        <button class="main-btn" onclick="handleDepositPayment()">рїѕріЋрІўрЅЦ рІФрѕхрЅђрѕЮрїА/рѕЮріЋрІЏрѕг рІГрїЇрІЎ</button>
        
        <a href="#dashboard" class="button-link back-btn delete-btn" onclick="updateView()">рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</a>
    </div>

    <div class="section" id="premium-services">
        <h2>РГљ№ИЈ рЅаріГрЇЇрІФ ріарїѕрѕЇрїЇрѕјрЅх (Premium Services)</h2>
        <p style="text-align: center;">рІГрѕЁріЋріЋ рїѕрїй рѕѕрѕўрїарЅђрѕЮ рІерЇЋрѕфрѕџрІерѕЮ рЅ░рїарЅЃрѕџ рѕўрѕєріЋ ріарѕѕрЅЦрІјрЅхрЇб</p>

        <div id="premium-content" style="display: none;">
            <h3>­ЪћЉ рІерЇЋрѕфрѕџрІерѕЮ рїЦрЅЁрѕърЅй:</h3>
            <ul>
                <li>рІФрѕЇрЅ░рїѕрІ░рЅа рІерЇІрІГрѕЇ рѕЏрїІрѕФрЅх (Unlimited file sharing)</li>
                <li>рІерЅ░рѕ╗рѕ╗рѕѕ рЇЇрїЦріљрЅх ріЦріЊ рїЦрѕФрЅх (Improved speed and quality)</li>
                <li>рѕЮріЋрѕЮ рѕЏрѕхрЅ│рІѕрЅѓрІФрІјрЅй рІерѕЅрѕЮ (No Ads)</li>
            </ul>
        </div>
        <div id="premium-alert" class="alert-box error-alert">
            РЮї рІГрЅЁрѕГрЅ│! рІГрѕЁріЋріЋ рїѕрїй рѕѕрѕўрїарЅђрѕЮ рІѕрІ░ <a href="#pricing" onclick="updateView()">рЇЋрѕфрѕџрІерѕЮ рѕЏрѕ╗рѕ╗рѕЇ</a> ріарѕѕрЅЦрІјрЅхрЇб
        </div>

        <button class="main-btn" onclick="checkPremiumAccess('premium-feature-1')">рЇЋрѕфрѕџрІерѕЮ рЅБрѕЁрѕф 1</button>
        <a href="#dashboard" class="button-link back-btn delete-btn" onclick="updateView()">рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</a>
    </div>

    <div class="section" id="global-purchase-page">
        <h2>­ЪїЇ рІЊрѕѕрѕЮ ріарЅђрЇЇ рїЇрІЦрІјрЅйріЋ рѕѕрѕўрЇѕрЇђрѕЮ</h2>
        <p style="text-align: center;">рІГрѕЁріЋріЋ ріарїѕрѕЇрїЇрѕјрЅх рѕѕрѕўрїарЅђрѕЮ рІерЇЋрѕфрѕџрІерѕЮ рЅ░рїарЅЃрѕџ рѕўрѕєріЋ рІФрѕхрЇѕрѕЇрїІрѕЇрЇб</p>
        
        <div id="global-purchase-content" style="display: none;">
            <input type="text" placeholder="рІерѕџрїѕрІЎрЅх ріарїѕрѕЇрїЇрѕјрЅх/рѕИрЅђрїЦ рѕхрѕЮ">
            <input type="number" placeholder="рІІрїІ рЅа USD">
            <textarea placeholder="рЅ░рїерѕЏрѕф рѕўрѕерїЃ / рѕіріЋріГ"></textarea>
            <button class="success-btn">рїЇрІбрІЇріЋ рІГрѕІріЕ</button>
        </div>
        <div id="global-purchase-alert" class="alert-box error-alert">
             РЮї рІГрЅЁрѕГрЅ│! рІЊрѕѕрѕЮ ріарЅђрЇЇ рїЇрІЦ рѕѕрѕўрЇѕрЇђрѕЮ рІѕрІ░ <a href="#pricing" onclick="updateView()">рЇЋрѕфрѕџрІерѕЮ рѕЏрѕ╗рѕ╗рѕЇ</a> ріарѕѕрЅЦрІјрЅхрЇб
        </div>

        <a href="#dashboard" class="button-link back-btn delete-btn" onclick="updateView()">рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</a>
    </div>


    <div class="section" id="post-text">
        <h2>РюЇ№ИЈ ріарІ▓рѕх рїйрѕЉрЇЇ рѕѕрѕўрѕѕрїарЇЇ</h2>
        <input type="text" id="post-text-title" placeholder="рѕГрІЋрѕх (Title)" required>
        <textarea id="post-text-content" rows="10" placeholder="рЇЁрѕЉрЇЅріЋ ріЦрІџрѕЁ рІФрѕхрїѕрЅА..." required></textarea>
        <button class="main-btn" onclick="handlePost('text')">рІГрѕѕрїЦрЇЅ (Post Text)</button>
        <a href="#dashboard" class="button-link back-btn delete-btn" onclick="updateView()">рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</a>
    </div>
    
    <div class="section" id="view-text">
        <h2>­ЪЊё рІерЅ░рѕѕрїарЇѕ рїйрѕЉрЇЇ/рѕўрѕерїЃ рѕўрѕўрѕЇріерЅх</h2>
        <div id="text-posts-container">
            <p style="text-align: center; color: #777;">рѕЮріЋрѕЮ рЇЁрѕЂрЇјрЅй рІерѕЅрѕЮрЇб</p>
        </div>
        <a href="#dashboard" class="button-link back-btn delete-btn" onclick="updateView()">рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</a>
    </div>
    
    <div class="section" id="view-image">
        <h2>­Ъќ╝№ИЈ рІерЅ░рѕѕрїарЇѕ рѕЮрѕхрѕЇ/рЇјрЅХ рѕўрѕўрѕЇріерЅх</h2>
        <div id="image-posts-container">
            <p style="text-align: center; color: #777;">рѕЮріЋрѕЮ рѕЮрѕхрѕјрЅй рІерѕЅрѕЮрЇб</p>
        </div>
        <a href="#dashboard" class="button-link back-btn delete-btn" onclick="updateView()">рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</a>
    </div>

    <div class="section" id="view-audio">
        <h2>­ЪјД рІерЅ░рѕѕрїарЇѕ рідрІ▓рІ«/рІхрѕЮрЇЁ рѕўрѕўрѕЇріерЅх</h2>
        <div id="audio-posts-container">
            <p style="text-align: center; color: #777;">рѕЮріЋрѕЮ рідрІ▓рІ« рЇІрІГрѕјрЅй рІерѕЅрѕЮрЇб</p>
        </div>
        <a href="#dashboard" class="button-link back-btn delete-btn" onclick="updateView()">рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</a>
    </div>

    <div class="section" id="feedback-page">
        <h2>РГљ ріарѕхрЅ░рІФрІерЅх рѕѕрѕўрѕхрїарЅх</h2>
        <p>рѕхрѕѕ рЇІрѕ▓рѕЇ рІїрЅЦ ріарЇЋ рІФрѕѕрІјрЅхріЋ ріарѕхрЅ░рІФрІерЅх рІФрїІрѕЕрЇб</p>
        <textarea id="feedback-content" rows="6" placeholder="ріарѕхрЅ░рІФрІерЅхрІјріЋ ріЦрІџрѕЁ рІГрї╗рЇЅ..." required></textarea>
        <button class="success-btn" onclick="submitFeedback()">ріарѕхрЅ░рІФрІерЅх ріарѕхрїѕрЅБ</button>
        <a href="#dashboard" class="button-link back-btn delete-btn" onclick="updateView()">рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</a>
    </div>

    <div class="section" id="delete-file-select">
        <h2>­ЪЌЉ№ИЈ рІерѕѕрїарЇЅрЅхріЋ рЇІрІГрѕЇ рѕѕрѕўрІ░рѕѕрЅх</h2>
        <p>ріЦрЅБріГрІј рІерѕџрІ░рѕЇрЅ▒рЅхріЋ рІерЇІрІГрѕЇ ріарІГріљрЅх рІГрѕЮрѕерїАрЇб</p>
        <select id="delete-file-type" style="width: 90%;">
            <option value="text">рЇЁрѕЂрЇЇ (Text)</option>
            <option value="image">рѕЮрѕхрѕЇ/рЇјрЅХ (Image)</option>
            <option value="audio">рідрІ▓рІ«/рІхрѕЮрЇЁ (Audio)</option>
        </select>
        <button class="delete-btn" onclick="showDeleteList()">рЇІрІГрѕјрЅй рІЮрѕГрІЮрѕГ ріарѕ│рІГ</button>
        <a href="#dashboard" class="button-link back-btn main-btn" onclick="updateView()">рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</a>
    </div>

    <div class="section" id="delete-file-view">
        <h2>­ЪЌЉ№ИЈ рІерЇІрІГрѕјрЅй рІЮрѕГрІЮрѕГ (рѕѕрѕўрІ░рѕѕрїЦ)</h2>
        <div id="deletable-posts-container">
            <p style="text-align: center; color: #777;">рѕЮріЋрѕЮ рЇІрІГрѕјрЅй рІерѕЅрѕЮрЇб</p>
        </div>
        <a href="#delete-file-select" class="button-link back-btn delete-btn" onclick="updateView()">рІѕрІ░ рѕЮрІхрЅЦ рѕЮрѕГрїФ рЅ░рѕўрѕѕрѕх</a>
    </div>
    
    <div class="section" id="policy-disagree">
        <h2>РЮї рІГрЅЁрѕГрЅ│!</h2>
        <p style="text-align: center;">рІеріарїарЅЃрЅђрѕЮ рѕўрѕўрѕфрІФрІјрЅйріЋ ріФрѕЇрЅ░рЅђрЅарѕЅ ріарїѕрѕЇрїЇрѕјрЅ▒ріЋ рѕўрїарЅђрѕЮ ріарІГрЅйрѕЅрѕЮрЇб</p>
        <button class="main-btn" onclick="window.location.hash = '#home-view'; updateView();">рІѕрІ░ рѕўріљрѕ╗ рЅ░рѕўрѕѕрѕх</button>
    </div>

    <script>
        let currentSubscription = 'free';
        let selectedPlan = null;
        let tempUserData = {}; 
        let posts = JSON.parse(localStorage.getItem('fasil_app_posts') || '[]');
        
        const DUMMY_RATES = { USD: 55.00, EUR: 60.00, GBP: 68.00 };

        // ==================================================
        // --- рІерѕерІ│рЅх рЅ░рїЇрЅБрѕФрЅх (Utility Functions) ---
        // ==================================================

        function showLoading(message) {
            document.getElementById('loading-message').textContent = message;
            document.getElementById('loading-overlay').style.display = 'flex';
        }

        function hideLoading() {
            document.getElementById('loading-overlay').style.display = 'none';
        }
        
        function updateWalletDisplay() {
            const etb = parseFloat(localStorage.getItem('fasil_wallet_etb') || 0).toFixed(2);
            const usd = parseFloat(localStorage.getItem('fasil_wallet_usd') || 0).toFixed(2);
            
            // рІерїѕріЋрІўрЅЦ рѕЏрѕ│рІФ рЅарѕЂрѕЅрѕЮ рЅдрЅ│ ріЦріЋрІ▓рѕ░рѕФ
            const balanceElements = document.querySelectorAll('[id^="user-balance-display"]');
            balanceElements.forEach(el => {
                if (window.location.hash === '#' + el.parentElement.id || el.parentElement.id === 'dashboard' || el.parentElement.id === 'withdraw-money' || el.parentElement.id === 'deposit-money') {
                    el.textContent = `рІеріЦрѕГрѕхрІј рѕџрІЏріЋ: ${etb} ETB / ${usd} USD (Dummy)`;
                    el.style.display = 'block';
                } else {
                    el.style.display = 'none';
                }
            });
        }

        // ==================================================
        // --- рІерЅ░рїарЅЃрѕџ ріарѕхрЅ░рІ│рІ░рѕГ (User Management) ---
        // ==================================================

        function setRegisteredUser(phone, password, tier, name, profilePicUrl) {
            let users = JSON.parse(localStorage.getItem('fasil_app_users') || '[]');
            
            const existingIndex = users.findIndex(u => u.phone === phone);

            if (existingIndex > -1) {
                const existingUser = users[existingIndex];
                const updatedUser = {
                    phone,
                    password: password !== null ? password : existingUser.password,
                    tier: tier || existingUser.tier,
                    name: name || existingUser.name || 'Guest User',
                    profilePic: profilePicUrl !== null ? profilePicUrl : existingUser.profilePic || '' 
                };
                users[existingIndex] = updatedUser;
            } else {
                users.push({ phone, password, tier: tier || 'free', name: name || 'Guest User', profilePic: profilePicUrl || '' });
            }
            
            localStorage.setItem('fasil_app_users', JSON.stringify(users));
            localStorage.setItem('fasil_current_user_phone', phone);
            currentSubscription = tier;
            
            if (localStorage.getItem('fasil_wallet_etb') === null) {
                localStorage.setItem('fasil_wallet_etb', 0.00);
                localStorage.setItem('fasil_wallet_usd', 0.00);
            }
        }
        
        function checkExistingUser(phone) {
            const users = JSON.parse(localStorage.getItem('fasil_app_users') || '[]');
            return users.some(u => u.phone === phone);
        }
        
        // ­ЪњА рІерЅ░рѕ╗рѕ╗рѕѕрІЇ рІерѕЮрІЮрїѕрЅБ рЅ░рїЇрЅБрѕГ (рѕЏрѕ╗рѕ╗рІФ 2)
        function handleSignUp() {
            showLoading('рѕўрѕўрІЮрїѕрЅЦ...');
            
            const name = document.getElementById('signup-name').value.trim();
            const phone = document.getElementById('signup-phone').value.trim();
            const email = document.getElementById('signup-email').value.trim();
            const password = document.getElementById('signup-password').value.trim();

            const errorBox = document.getElementById('signup-error');
            errorBox.style.display = 'none';

            if (!phone || !email || !password || !name) {
                hideLoading();
                errorBox.textContent = 'рѕЂрѕЅріЋрѕЮ ріарѕхрЇѕрѕІрїі рѕўрѕхрі«рЅй рІГрѕЎрѕЅрЇб';
                errorBox.style.display = 'block';
                return;
            }
            
            if (checkExistingUser(phone)) {
                hideLoading();
                errorBox.textContent = 'Рџа№ИЈ рЅарІџрѕЁ рѕхрѕЇріГ рЅЂрїЦрѕГ рЅ░рѕўрІЮрїЇрЅарІІрѕЇрЇб ріЦрЅБріГрІј рІГрїЇрЅАрЇб';
                errorBox.style.display = 'block';
                return;
            }

            // рїірІюрІФрІі рѕўрѕерїЃрІјрЅйріЋ ріарѕхрЅђрѕЮрїЦ
            tempUserData = { name, phone, email, password };

            hideLoading();
            // рІѕрІ░ рЇЋрѕ«рЇІрІГрѕЇ рѕЏрІўрїІрїЃ рїѕрїй рѕѓрІх
            window.location.hash = '#profile-setup-prompt';
            updateView();
        }

        // ­ЪњА рІерЇЋрѕ«рЇІрІГрѕЇ рѕЏрІўрїІрїЃ рЅ░рїЇрЅБрѕГ (рѕЏрѕ╗рѕ╗рІФ 2)
        function setProfileAndContinue(skip) {
            const { name, phone, password } = tempUserData;
            let profilePicUrl = '';

            const finalizeRegistration = (url) => {
                setRegisteredUser(phone, password, 'free', name, url);
                alert(`ріЦріЋрі│ріЋ рІ░рѕх ріарѕЇрІј! ${name} рЅ░рѕўрІЮрїЇрЅарІІрѕЇ!`);
                tempUserData = {}; // рѕўрѕерїЃрІЇріЋ ріарїЦрЇІ
                window.location.hash = '#privacy-policy';
                updateView();
            };

            if (skip) {
                finalizeRegistration('');
            } else {
                showLoading('рЇЋрѕ«рЇІрІГрѕЇ рЅарѕўрїФріЋ рѕІрІГ...');
                const profilePicFile = document.getElementById('signup-profile-pic').files[0];

                if (profilePicFile) {
                    const reader = new FileReader();
                    reader.onloadend = function() {
                        hideLoading();
                        profilePicUrl = reader.result;
                        finalizeRegistration(profilePicUrl);
                    }
                    reader.readAsDataURL(profilePicFile);
                } else {
                    hideLoading();
                    alert('рѕЮріЋрѕЮ рЇјрЅХ ріарѕЇрЅ░рѕўрѕерїарѕЮ:: рІФрѕѕ рЇјрЅХ рІГрЅђрїЦрѕІрѕЇрЇб');
                    finalizeRegistration('');
                }
            }
        }

        function handleLogin() {
            showLoading('рѕўрїЇрЅБрЅх...');
            const phone = document.getElementById('login-phone').value.trim();
            const password = document.getElementById('login-password').value.trim();
            const errorBox = document.getElementById('login-error');
            errorBox.style.display = 'none';

            if (!phone || !password) {
                hideLoading();
                errorBox.textContent = 'рІерѕхрѕЇріГ рЅЂрїЦрѕГ ріЦріЊ рІерІГрѕѕрЇЇ рЅЃрѕЇ рІФрѕхрїѕрЅАрЇб';
                errorBox.style.display = 'block';
                return;
            }

            const users = JSON.parse(localStorage.getItem('fasil_app_users') || '[]');
            const user = users.find(u => u.phone === phone && u.password === password);

            setTimeout(() => {
                hideLoading();
                if (user) {
                    setRegisteredUser(phone, password, user.tier, user.name, user.profilePic);
                    window.location.hash = '#dashboard';
                    updateView();
                } else {
                    errorBox.textContent = 'рЅхріГріГрѕѕріЏ рІФрѕЇрѕєріљ рѕхрѕЇріГ рЅЂрїЦрѕГ рІѕрІГрѕЮ рІерІГрѕѕрЇЇ рЅЃрѕЇрЇб';
                    errorBox.style.display = 'block';
                }
            }, 1500);
        }

        function getCurrentUserPhone() {
            return localStorage.getItem('fasil_current_user_phone');
        }

        function getCurrentUserTier() {
            const phone = getCurrentUserPhone();
            if (!phone) return 'free';

            const users = JSON.parse(localStorage.getItem('fasil_app_users') || '[]');
            const user = users.find(u => u.phone === phone);
            return user ? user.tier : 'free';
        }

        // ==================================================
        // --- рЇќрѕірѕ▓ ріЦріЊ рЇЋрѕфрѕџрІерѕЮ ---
        // ==================================================

        function handleAgreePolicy() {
            window.location.hash = '#dashboard';
            updateView();
        }

        function selectPlan(plan) {
            selectedPlan = plan;
            let price = '';
            if (plan === 'daily') price = '5 ETB (рІЋрѕѕрЅ│рІі)';
            if (plan === 'weekly') price = '25 ETB (рѕ│рѕЮріЋрЅ│рІі)';
            if (plan === 'monthly') price = '30 ETB (рІѕрѕГрѕЃрІі)';
            if (plan === 'yearly') price = '100 ETB (рІЊрѕўрЅ│рІі)';

            document.getElementById('selected-plan-info').textContent = `рІерѕўрѕерїАрЅх рЇЋрѕІріЋ: ${price}`;
            window.location.hash = '#payment-methods';
            updateView();
        }
        
        function processPayment(method) {
            showLoading(`${method} ріГрЇЇрІФ рЅарѕўрЇѕрЇђрѕЮ...`);

            setTimeout(() => {
                hideLoading();
                const phone = getCurrentUserPhone();
                if (phone) {
                    // ріЦріЋрІ░рЅ░ріерЇѕрѕѕ рІГрЅЂрїарѕЕрЅх
                    setRegisteredUser(phone, null, 'premium', null, null);
                    alert(`ріГрЇЇрІФ рЅ░рѕ│ріГрЅирѕЇ! рЅа ${method} рЅаріЕрѕЇ рЇЋрѕфрѕџрІерѕЮ рЅ░рїарЅЃрѕџ рѕєріљрІІрѕЇ!`);
                    window.location.hash = '#dashboard';
                    updateView();
                } else {
                    alert('рЅарѕўрїђрѕўрѕфрІФ рІГрїЇрЅА/рІГрѕўрІЮрїѕрЅАрЇб');
                    window.location.hash = '#home-view';
                    updateView();
                }
            }, 2500);
        }

        function checkPremiumAccess(targetHash) {
            if (!getCurrentUserPhone()) {
                alert('ріЦрЅБріГрІј рѕўрїђрѕўрѕфрІФ рІГрїЇрЅА/рІГрѕўрІЮрїѕрЅАрЇб');
                window.location.hash = '#login-form';
                updateView();
                return;
            }

            if (getCurrentUserTier() === 'premium') {
                if (targetHash === 'premium-services') {
                    document.getElementById('premium-content').style.display = 'block';
                    document.getElementById('premium-alert').style.display = 'none';
                } else if (targetHash === 'global-purchase-page') {
                    document.getElementById('global-purchase-content').style.display = 'block';
                    document.getElementById('global-purchase-alert').style.display = 'none';
                }
                window.location.hash = '#' + targetHash;
            } else {
                if (targetHash === 'premium-services') {
                    document.getElementById('premium-content').style.display = 'none';
                    document.getElementById('premium-alert').style.display = 'block';
                    window.location.hash = '#premium-services';
                } else if (targetHash === 'global-purchase-page') {
                    document.getElementById('global-purchase-content').style.display = 'none';
                    document.getElementById('global-purchase-alert').style.display = 'block';
                    window.location.hash = '#global-purchase-page';
                } else {
                    alert('рІГрѕЁ ріарїѕрѕЇрїЇрѕјрЅх рѕѕ Premium рЅ░рїарЅЃрѕџрІјрЅй рЅЦрЅ╗ ріљрІЇрЇб');
                    window.location.hash = '#pricing';
                }
            }
            updateView();
        }

        // ==================================================
        // --- рЇІрІГріЊріЋрѕх/Wallet ---
        // ==================================================
        
        function handleWalletAction(action) {
            if (!getCurrentUserPhone()) {
                alert('ріЦрЅБріГрІј рѕўрїђрѕўрѕфрІФ рІГрїЇрЅА/рІГрѕўрІЮрїѕрЅАрЇб');
                window.location.hash = '#login-form';
                updateView();
                return;
            }

            if (action === 'deposit') {
                window.location.hash = '#deposit-money';
            } else if (action === 'withdraw') {
                window.location.hash = '#withdraw-money';
            }
            updateView();
        }

        function handleDepositPayment() {
            showLoading('рѕЮріЋрІЏрѕг рЅарѕўрїЇрІЏрЅх рѕІрІГ...');
            const etbAmount = parseFloat(document.getElementById('deposit-amount-etb').value);
            const currency = document.getElementById('deposit-currency').value;
            const rate = DUMMY_RATES[currency] || 55.00;
            const usdEquivalent = etbAmount / rate;
            
            if (isNaN(etbAmount) || etbAmount < 10) {
                hideLoading();
                alert('рЅарЅхріГріГрѕЇ рѕЏрѕхрїѕрЅБрЅх рІерѕџрЇѕрѕЇрїЅрЅхріЋ рІерЅЦрѕГ рѕўрїаріЋ рІФрѕхрїѕрЅА (рІЮрЅЁрЅ░ріЏрІЇ 10 рЅЦрѕГ)рЇб');
                return;
            }

            let currentEtb = parseFloat(localStorage.getItem('fasil_wallet_etb') || 0);
            let currentUsd = parseFloat(localStorage.getItem('fasil_wallet_usd') || 0);
            
            currentEtb += etbAmount;
            currentUsd += usdEquivalent;

            setTimeout(() => {
                localStorage.setItem('fasil_wallet_etb', currentEtb.toFixed(2));
                localStorage.setItem('fasil_wallet_usd', currentUsd.toFixed(2));
                hideLoading();
                alert(`рІерїѕріЋрІўрЅЦ рѕЏрѕхрЅђрѕўрїА рЅ░рѕ│ріГрЅирѕЇ! ${etbAmount} ETB ріарѕхрїѕрЅЦрЅ░рІЇ ${usdEquivalent.toFixed(2)} USD ріарїЇріЮрЅ░рІІрѕЇрЇб`);
                window.location.hash = '#dashboard';
                updateView();
            }, 2000);
        }

        // ­ЪњА рІерЅ░рѕ╗рѕ╗рѕѕрІЇ рїѕріЋрІўрЅЦ рѕЏрІЇрїФ (рѕЏрѕ╗рѕ╗рІФ 3)
        function updateRecipientPlaceholder() {
            const method = document.getElementById('withdraw-method').value;
            const recipientInput = document.getElementById('withdraw-recipient-info');
            const amountInput = document.getElementById('withdraw-amount');

            amountInput.value = '';
            recipientInput.value = '';

            if (method === 'Telebirr') {
                recipientInput.placeholder = 'рІерЅ┤рѕїрЅЦрѕГ рѕхрѕЇріГ рЅЂрїЦрѕГ';
                amountInput.placeholder = 'рІерѕџрІФрІѕрїАрЅх рІерЅЦрѕГ рѕўрїаріЋ (ETB)';
            } else if (method === 'CBE_Transfer') {
                recipientInput.placeholder = 'рІеCBE рІерЅБріЋріГ ріаріФрІЇріЋрЅх рЅЂрїЦрѕГ';
                amountInput.placeholder = 'рІерѕџрІФрІѕрїАрЅх рІерЅЦрѕГ рѕўрїаріЋ (ETB)';
            } else if (method === 'PayPal') {
                recipientInput.placeholder = 'рІерЇћрІГрЇЊрѕЇ рібрѕюрІГрѕЇ ріарІхрѕФрѕ╗';
                amountInput.placeholder = 'рІерѕџрІФрІѕрїАрЅх рІерІХрѕІрѕГ рѕўрїаріЋ (USD)';
            } else {
                recipientInput.placeholder = 'рІерЅ░рЅђрЅБрІГ рібрѕюрІГрѕЇ/рІерЅБріЋріГ рѕўрѕерїЃ';
                amountInput.placeholder = 'рІерѕџрІФрІѕрїАрЅх рІерІХрѕІрѕГ рѕўрїаріЋ (USD)';
            }
        }
        
        function handleWithdrawTransfer() {
            showLoading('рїѕріЋрІўрЅЦ рѕЏрѕхрЅ░рѕІрѕѕрЇЇ...');
            
            const withdrawMethod = document.getElementById('withdraw-method').value;
            const withdrawAmountInput = document.getElementById('withdraw-amount');
            const recipientInfo = document.getElementById('withdraw-recipient-info').value.trim();
            const withdrawAmount = parseFloat(withdrawAmountInput.value);

            if (isNaN(withdrawAmount) || withdrawAmount < 1 || !recipientInfo) {
                hideLoading();
                alert('рЅхріГріГрѕѕріЏ рѕўрїаріЋ ріЦріЊ рІерЅ░рЅђрЅБрІГ рѕўрѕерїЃ рІФрѕхрїѕрЅАрЇб');
                return;
            }

            let currentEtb = parseFloat(localStorage.getItem('fasil_wallet_etb') || 0);
            let currentUsd = parseFloat(localStorage.getItem('fasil_wallet_usd') || 0);
            const usdRate = DUMMY_RATES['USD'];
            
            let amountToDeductEtb = 0;
            let amountToDeductUsd = 0;
            let currencyUnit = '';

            if (withdrawMethod === 'Telebirr' || withdrawMethod === 'CBE_Transfer') {
                // рІерЅЦрѕГ ріГрЇЇрІФ ріерѕєріљ (ETB)
                amountToDeductEtb = withdrawAmount;
                amountToDeductUsd = withdrawAmount / usdRate;
                currencyUnit = 'ETB';
                if (currentEtb < amountToDeductEtb) {
                    hideLoading();
                    alert(`рЅарЅѓ рІерЅЦрѕГ (${withdrawMethod}) рѕџрІЏріЋ рІерѕѕрІјрЅхрѕЮрЇб рІеріарѕЂріЉ рѕџрІЏріЋрІј: ${currentEtb.toFixed(2)} ETB`);
                    return;
                }
            } else { 
                // рІХрѕІрѕГ ріГрЇЇрІФ ріерѕєріљ (USD)
                amountToDeductUsd = withdrawAmount;
                amountToDeductEtb = withdrawAmount * usdRate;
                currencyUnit = 'USD';
                if (currentUsd < amountToDeductUsd) {
                    hideLoading();
                    alert(`рЅарЅѓ рІерІХрѕІрѕГ рѕџрІЏріЋ рІерѕѕрІјрЅхрѕЮрЇб рІеріарѕЂріЉ рѕџрІЏріЋрІј: ${currentUsd.toFixed(2)} USD`);
                    return;
                }
            }
            
            // рІерЅЦрѕГ рѕўрїаріЋ ріерѕЂрѕѕрЅ▒рѕЮ рІГрЅђріЋрѕ│рѕЇ (рѕџрІЏріЉріЋ рѕѕрѕЏрѕхрЅ░ріФріерѕЇ)
            currentEtb -= amountToDeductEtb;
            currentUsd -= amountToDeductUsd;
            
            setTimeout(() => {
                localStorage.setItem('fasil_wallet_etb', Math.max(0, currentEtb).toFixed(2));
                localStorage.setItem('fasil_wallet_usd', Math.max(0, currentUsd).toFixed(2));
                hideLoading();
                alert(`ріГріЋрІЇріЋ рЅ░рѕ│ріГрЅирѕЇрЇб ${withdrawAmount.toFixed(2)} ${currencyUnit} рІѕрІ░ ${withdrawMethod} рЅ░рѕЇрі│рѕЇрЇб`);
                window.location.hash = '#dashboard';
                updateView();
            }, 2000);
        }

        // ==================================================
        // --- рІГрІўрЅх рѕЏрїІрѕФрЅх (Posting Content) ---
        // ==================================================

        function handlePost(type) {
            const userPhone = getCurrentUserPhone();
            if (!userPhone) {
                alert('ріЦрЅБріГрІј рЅарѕўрїђрѕўрѕфрІФ рІГрїЇрЅА/рІГрѕўрІЮрїѕрЅАрЇб');
                window.location.hash = '#login-form';
                updateView();
                return;
            }

            let title = '';
            let content = '';
            let file = null;
            let postId = Date.now();

            if (type === 'text') {
                title = document.getElementById('post-text-title').value.trim();
                content = document.getElementById('post-text-content').value.trim();
                if (!title || !content) {
                    alert('рѕГрІЋрѕх ріЦріЊ рЇЁрѕЂрЇЇ рІФрѕхрїѕрЅАрЇб');
                    return;
                }
            } else if (type === 'image') {
                title = document.getElementById('post-image-title').value.trim();
                file = document.getElementById('post-image-file').files[0];
                if (!title || !file) {
                    alert('рѕГрІЋрѕх ріЦріЊ рѕЮрѕхрѕЇ рІФрѕхрїѕрЅАрЇб');
                    return;
                }
                content = URL.createObjectURL(file); // For local preview
            } else if (type === 'audio') {
                title = document.getElementById('post-audio-title').value.trim();
                file = document.getElementById('post-audio-file').files[0];
                if (!title || !file) {
                    alert('рѕГрІЋрѕх ріЦріЊ рідрІ▓рІ« рЇІрІГрѕЇ рІФрѕхрїѕрЅАрЇб');
                    return;
                }
                content = URL.createObjectURL(file); // For local preview
            }

            showLoading('рѕўрѕерїЃ рЅарѕўрѕѕрїарЇЇ рѕІрІГ...');

            const newPost = {
                id: postId,
                user: userPhone,
                type: type,
                title: title,
                content: content,
                date: new Date().toLocaleDateString('am-ET')
            };

            posts.push(newPost);
            localStorage.setItem('fasil_app_posts', JSON.stringify(posts));

            setTimeout(() => {
                hideLoading();
                alert('рѕўрѕерїЃрІЇ рЅарЅ░рѕ│ріФ рѕЂріћрЅ│ рЅ░рѕѕрїЦрЇЈрѕЇ!');
                if (type === 'text') {
                    document.getElementById('post-text-title').value = '';
                    document.getElementById('post-text-content').value = '';
                    window.location.hash = '#view-text';
                } else if (type === 'image') {
                    document.getElementById('post-image-title').value = '';
                    document.getElementById('post-image-file').value = '';
                    window.location.hash = '#view-image';
                } else if (type === 'audio') {
                    document.getElementById('post-audio-title').value = '';
                    document.getElementById('post-audio-file').value = '';
                    window.location.hash = '#view-audio';
                }
                updateView();
            }, 1500);
        }

        // ==================================================
        // --- рІГрІўрЅх рѕўрѕўрѕЇріерЅх (Viewing Content) ---
        // ==================================================
        
        function renderPosts(type, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            const filteredPosts = posts.filter(p => p.type === type).reverse();

            if (filteredPosts.length === 0) {
                container.innerHTML = `<p style="text-align: center; color: #777;">рѕЮріЋрѕЮ ${type === 'text' ? 'рЇЁрѕЂрЇјрЅй' : type === 'image' ? 'рѕЮрѕхрѕјрЅй' : 'рідрІ▓рІ« рЇІрІГрѕјрЅй'} рІерѕЅрѕЮрЇб</p>`;
                return;
            }

            filteredPosts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.style.border = '1px solid #ccc';
                postElement.style.padding = '15px';
                postElement.style.marginBottom = '15px';
                postElement.style.borderRadius = '8px';
                postElement.style.backgroundColor = '#fff';

                let contentHtml = '';
                if (post.type === 'text') {
                    contentHtml = `<p>${post.content.substring(0, 150)}...</p><button class="main-btn" style="width: 100px; padding: 8px 10px; font-size: 14px; margin: 10px 0;">рѕЎрѕЅрІЇріЋ ріаріЋрЅЦрЅЦ</button>`;
                } else if (post.type === 'image') {
                    contentHtml = `<img src="${post.content}" alt="${post.title}" style="max-width: 100%; height: auto; border-radius: 5px;"><br><button class="main-btn" style="width: 100px; padding: 8px 10px; font-size: 14px; margin: 10px 0;">рѕЎрѕЅрІЇріЋ ріЦрІГ</button>`;
                } else if (post.type === 'audio') {
                    contentHtml = `<audio controls style="width: 100%; margin: 10px 0;"><source src="${post.content}" type="audio/mpeg"></audio>`;
                }


                postElement.innerHTML = `
                    <h4 style="color: #007bff; margin-top: 0;">${post.title}</h4>
                    <p style="font-size: 14px; color: #555;"><strong>Posted by:</strong> ${post.user} on ${post.date}</p>
                    ${contentHtml}
                `;
                container.appendChild(postElement);
            });
        }
        
        // ==================================================
        // --- рІГрІўрЅх рѕўрІ░рѕѕрЅх (Deleting Content) ---
        // ==================================================
        
        function showDeleteList() {
            const type = document.getElementById('delete-file-type').value;
            const container = document.getElementById('deletable-posts-container');
            const currentUser = getCurrentUserPhone();

            if (!currentUser) {
                alert('ріЦрЅБріГрІј рѕўрїђрѕўрѕфрІФ рІГрїЇрЅАрЇб');
                window.location.hash = '#login-form';
                updateView();
                return;
            }
            
            window.location.hash = '#delete-file-view';
            updateView();
            
            container.innerHTML = '';
            const userPosts = posts.filter(p => p.type === type && p.user === currentUser).reverse();

            if (userPosts.length === 0) {
                container.innerHTML = `<p style="text-align: center; color: #721c24;">ріЦрѕГрѕхрІј рІерѕѕрїарЇЅрЅх ${type} рІерѕѕрѕЮрЇб</p>`;
                return;
            }

            userPosts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.style.border = '1px solid #dc3545';
                postElement.style.padding = '15px';
                postElement.style.marginBottom = '15px';
                postElement.style.borderRadius = '8px';
                postElement.style.backgroundColor = '#f8d7da';

                postElement.innerHTML = `
                    <h4 style="color: #721c24; margin-top: 0;">${post.title} (${post.date})</h4>
                    <p style="font-size: 14px; color: #721c24;">ID: ${post.id}</p>
                    <button class="delete-btn" style="width: 120px; padding: 8px 10px; font-size: 14px; margin: 10px 0;" onclick="deletePost(${post.id})">рѕўрІ░рѕѕрЅх</button>
                `;
                container.appendChild(postElement);
            });
        }

        function deletePost(id) {
            if (confirm('рІГрѕЁріЋ рЇІрІГрѕЇ рЅаріЦрѕГрїЇрїаріЮріљрЅх рѕўрІ░рѕѕрЅх рІГрЇѕрѕЇрїІрѕЅ?')) {
                posts = posts.filter(p => p.id !== id);
                localStorage.setItem('fasil_app_posts', JSON.stringify(posts));
                alert('рЇІрІГрѕЅ рЅ░рІ░рѕЇрЅирѕЇрЇб');
                showDeleteList(); // рІЮрѕГрІЮрѕЕріЋ ріарІхрѕх
            }
        }
        
        // ==================================================
        // --- FEEDBACK ---
        // ==================================================

        function submitFeedback() {
            const feedback = document.getElementById('feedback-content').value.trim();
            if (!feedback) {
                alert("ріЦрЅБріГрІј ріарѕхрЅ░рІФрІерЅхрІјріЋ рІГрї╗рЇЅрЇб");
                return;
            }

            showLoading("ріарѕхрЅ░рІФрІерЅх рЅарѕўрѕІріГ рѕІрІГ...");
            setTimeout(() => {
                hideLoading();
                alert("ріарѕхрЅ░рІФрІерЅхрІј рЅарЅ░рѕ│ріФ рѕЂріћрЅ│ рЅ░рѕЇрі│рѕЇ! ріЦріЊрѕўрѕ░рїЇріЊрѕѕріЋрЇб");
                document.getElementById('feedback-content').value = '';
                window.location.hash = '#dashboard';
                updateView();
            }, 1500);
        }

        // ==================================================
        // --- View Controller (рІІріЊ рѕўрЅєрїБрїарѕфрІФ) ---
        // ==================================================

        function updateView() {
            const allSections = document.querySelectorAll('.section');
            const hash = window.location.hash || '#home-view';
            const targetId = hash.substring(1);

            allSections.forEach(section => {
                section.style.display = 'none';
            });

            const targetSection = document.getElementById(targetId);
            if (targetSection) {
                targetSection.style.display = 'block';
            } else {
                document.getElementById('home-view').style.display = 'block';
            }
            
            // Specific view updates
            if (targetId === 'view-text') renderPosts('text', 'text-posts-container');
            if (targetId === 'view-image') renderPosts('image', 'image-posts-container');
            if (targetId === 'view-audio') renderPosts('audio', 'audio-posts-container');
            if (targetId === 'withdraw-money') updateRecipientPlaceholder();

            currentSubscription = getCurrentUserTier();
            updateWalletDisplay();
        }

        window.addEventListener('hashchange', updateView);
        window.addEventListener('load', () => {
            currentSubscription = getCurrentUserTier();
            updateView();
        });
        
        updateView();
    </script>
</body>
</html>

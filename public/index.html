import Head from 'next/head';
import React, { useState, useEffect } from 'react';

// =========================================================================================
// рІГрѕЁ рі«рІх ріеріЦрѕГрѕхрІј index.html рЅ░рІѕрѕхрІХ рІѕрІ░ Next.js JSX рІерЅ░рѕѕрІѕрїа ріљрІЇрЇб
// рІерЇЁрѕЂрЇЇ рѕўрѕѕрїарЇЇ (handlePostText) ріЦріЊ рІерѕЏрѕЮрїБрЅх (fetchPosts) рЅ░рїЇрЅБрѕФрЅх рЅ░рѕхрЅ░ріФріГрѕѕрІІрѕЇрЇб
// =========================================================================================

export default function Home() {
    // рЇЁрѕЂрЇјрЅйріЋ ріЦріЊ ViewsріЋ рѕѕрѕўрЅєрїБрїарѕГ рІерѕџрІФрїѕрѕѕрїЇрѕЅ States
    const [currentView, setCurrentView] = useState('home-view'); 
    const [posts, setPosts] = useState([]);
    const [newPostTitle, setNewPostTitle] = useState('');
    const [newPostContent, setNewPostContent] = useState('');
    const [statusMessage, setStatusMessage] = useState('');
    const [isLoggedIn, setIsLoggedIn] = useState(false); // рѕѕрѕўрїЇрЅбрІФ рѕЂріћрЅ│

    // Dummy Data ріЦріЊ Utility Functions
    const PLANS = {
        'daily': { name: 'рІЋрѕѕрЅ│рІі', price: '5 рЅЦрѕГ' },
        'weekly': { name: 'рѕ│рѕЮріЋрЅ│рІі', price: '25 рЅЦрѕГ' },
        'monthly': { name: 'рІѕрѕГрѕЃрІі', price: '30 рЅЦрѕГ' },
        'yearly': { name: 'рІЊрѕўрЅ│рІі', price: '100 рЅЦрѕГ' }
    };
    let currentSubscription = 'free'; // рѕѕрѕЎріерѕФ ріљрЇЃ рЅ░рЅЦрѕј рЅ░рЅђрѕЮрїДрѕЇ
    let selectedPlan = null;

    // --- рІерѕерІ│рЅх рЅ░рїЇрЅБрѕФрЅх (Utility Functions) ---
    const showLoading = (message) => {
        document.getElementById('loading-message').textContent = message;
        document.getElementById('loading-overlay').style.display = 'flex';
    };

    const hideLoading = () => {
        document.getElementById('loading-overlay').style.display = 'none';
    };

    const updateView = (viewId) => {
        setCurrentView(viewId || 'home-view');
        window.scrollTo(0, 0); // рІѕрІ░ рѕІрІГ рѕѕрѕўрѕўрѕѕрѕх
    };

    // --- рІеAPI ріЦріЊ рІ│рЅ│рЅцрІЮ рЅ░рїЇрЅБрѕФрЅх ---

    const fetchPosts = async () => {
        // setStatusMessage('рЇЁрѕЂрЇјрЅйріЋ ріЦрІФрѕўрїБ ріљрІЇ...');
        try {
            const response = await fetch('/api/get-posts');
            if (response.ok) {
                const data = await response.json();
                setPosts(data.posts);
                // setStatusMessage('РюЁ рЇЁрѕЂрЇјрЅй рЅарЅ░рѕ│ріФ рѕЂріћрЅ│ рѕўрїЦрЅ░рІІрѕЇрЇб');
            } else {
                console.error("Failed to fetch posts");
                // рІерІ│рЅ│рЅцрІЮ рѕхрѕЁрЅ░рЅх ріерѕєріљ рІерѕџрѕўрїБ рІерѕЎріерѕФ рѕўрѕЇрІЋріГрЅх
                setPosts([{ id: 999, content: "РЮї рІеBackend (API/DB) рЅйрїЇрѕГ рѕхрѕІрѕѕ рІерѕЎріерѕФ рЇЁрѕЂрЇЇ рІГрЅ│рІФрѕЇ::", title: "API рѕхрѕЁрЅ░рЅх", created_at: new Date().toLocaleTimeString() }]);
            }
        } catch (error) {
            console.error("Error fetching posts:", error);
             // рІеNetwork рѕхрѕЁрЅ░рЅх ріерѕєріљ рІерѕџрѕўрїБ рІерѕЎріерѕФ рѕўрѕЇрІЋріГрЅх
            setPosts([{ id: 999, content: "РЮї Network/CORS рѕхрѕЁрЅ░рЅх рІѕрІГрѕЮ API рІерѕѕрѕЮ::", title: "Network рѕхрѕЁрЅ░рЅх", created_at: new Date().toLocaleTimeString() }]);
        }
    };

    // ­ЪњА рІерЅ░рѕхрЅ░ріФріерѕѕрІЇ рІеPOST рЅ░рїЇрЅБрѕГ
    const handlePostText = async () => {
        if (!newPostContent.trim()) {
            setStatusMessage("­Ъћ┤ ріЦрЅБріГрІј рѕўрѕЇрІЋріГрЅхрІјріЋ рІГрї╗рЇЅ!");
            return;
        }

        showLoading('рѕўрѕЇрІЋріГрЅ▒ріЋ ріЦрІФрѕхрЅђрѕўрїа ріљрІЇ...');
        try {
            // рІеріЦрѕГрѕхрІј API рІерѕџрїарЅЦрЅђрІЇріЋ postContent ріЦріЋрѕЇріФрѕѕріЋ
            const response = await fetch('/api/post', { 
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ postContent: newPostContent.trim() }), 
            });

            if (response.ok) {
                setStatusMessage('РюЁ рЇЁрѕЂрЇЅ рЅарЅ░рѕ│ріФ рѕЂріћрЅ│ рЅ░рѕѕрїЦрЇЈрѕЇрЇб');
                setNewPostContent('');
                setNewPostTitle('');
                fetchPosts(); // ріарІ▓рѕ▒ріЋ рЇЁрѕЂрЇЇ рѕѕрѕЏрѕЮрїБрЅх
                updateView('view-text'); // рІѕрІ░ рѕўрѕўрѕЇріерЅ╗ рїѕрїй рІГрѕѓрІх
            } else {
                const errorData = await response.json();
                setStatusMessage(`РЮї рѕхрѕЁрЅ░рЅх рЅ░рЇѕрїарѕе: ${errorData.error || 'рІФрѕЇрЅ│рІѕрЅђ рѕхрѕЁрЅ░рЅх'}`);
            }
        } catch (error) {
            setStatusMessage(`РЮї ріарїарЅЃрѕІрІГ Network рѕхрѕЁрЅ░рЅх: ${error.message}`);
        } finally {
            hideLoading();
        }
    };


    // --- рѕїрѕјрЅй рІе HTML JavaScript рЅ░рїЇрЅБрѕФрЅх (Dummy) ---

    // рѕѕрѕЮрІЮрїѕрЅБ ріЦріЊ рѕўрїЇрЅбрІФ Dummy рЅ░рїЇрЅБрѕФрЅх
    const handleSignUp = () => {
        const phone = document.getElementById('signup-phone').value.trim();
        const password = document.getElementById('signup-password').value.trim();
        if (phone && password.length === 6) {
            alert(`РюЁ рѕЮрІЮрїѕрЅБрІј рЅ░рїаріЊрЅІрѕЇрЇб ріЦріЋрі│ріЋ рІ░рѕЁріЊ рѕўрїА!`);
            setIsLoggedIn(true);
            updateView('privacy-policy');
        } else {
            alert("­Ъћ┤ ріЦрЅБріГрІј рѕЂрѕЅріЋрѕЮ рѕўрѕхрі«рЅй рЅарЅхріГріГрѕЇ рІГрѕЎрѕЅ (рІерІГрѕѕрЇЇ рЅЃрѕЇ 6 ріарѕЃрІЮ рѕўрѕєріЋ ріарѕѕрЅарЅх)рЇб");
        }
    };

    const handleLogin = () => {
        const phone = document.getElementById('login-phone').value.trim();
        const password = document.getElementById('login-password').value.trim();
        if (phone && password) {
             // ­ЪЏЉ ріЦрІЇріљрЅ░ріЏ рѕўрїЇрЅбрІФ ріЦрѕхріфрѕ░рѕФ рІхрѕерѕх
            alert(`РюЁ рЅарѕхрігрЅх рїѕрЅЦрЅ░рІІрѕЇрЇб`);
            setIsLoggedIn(true);
            updateView('dashboard');
        } else {
            alert("­Ъћ┤ ріЦрЅБріГрІј рІерѕхрѕЇріГ рЅЂрїЦрѕГ ріЦріЊ рІерІГрѕѕрЇЇ рЅЃрѕЇ рІФрѕхрїѕрЅАрЇб");
        }
    };

    // рІерЇќрѕірѕ▓ рѕхрѕЮрѕЮріљрЅх
    const handleAgreePolicy = () => {
        updateView('dashboard');
    };

    const checkPremiumAccess = (targetView) => {
        if (currentSubscription === 'free') {
            alert("­Ъћњ рІГрЅЁрѕГрЅ│! рІГрѕЁ рІеPremium ріарїѕрѕЇрїЇрѕјрЅх ріљрІЇрЇб ріЦрЅБріГрІј ріГрЇЇрІФ рІГріГрЇѕрѕЅрЇб");
            updateView('pricing');
        } else {
            updateView(targetView);
        }
    };

    // рІеPlan рѕЮрѕГрїФ
    const selectPlan = (plan) => {
        selectedPlan = plan;
        document.getElementById('selected-plan-info').textContent = `рІерѕўрѕерїАрЅх: ${PLANS[plan].name} - ${PLANS[plan].price}`;
        updateView('payment-methods');
    };

    // ріГрЇЇрІФ
    const processPayment = (method) => {
        showLoading(`ріГрЇЇрІФ рЅа${method} ріЦрІерЅ░рЇѕрЇђрѕў ріљрІЇ...`);
        setTimeout(() => {
            hideLoading();
            alert(`РюЁ ріГрЇЇрІФ рЅа${method} рЅ░рЇѕрїйрѕЪрѕЇрЇб ріарѕЂріЋ рІеPremium рЅ░рїарЅЃрѕџ ріљрІјрЅх!`);
            // setRegisteredUser(getCurrentUserPhone(), null, 'premium'); // рІѕрІ░ ріЦрІЇріљрЅ░ріЏ рЅ░рїЇрЅБрѕГ рѕхріЋрїѕрЅБ
            currentSubscription = 'premium'; // рѕѕрѕЎріерѕФ
            updateView('dashboard');
        }, 2000);
    };


    // ­ЪЏЉ рїѕрї╣ рѕѕрѕўрїђрѕўрѕфрІФ рїірІю рѕ▓рїФріЋ
    useEffect(() => {
        // рІерІ│рЅ│рЅцрІЮ рїЇріЋріЎріљрЅхріЋ рѕѕрѕўрѕъріерѕГ
        fetchPosts();

        // рЅаURL hash рѕўрѕ░рѕерЅх рїѕрїЙрЅйріЋ рѕЏрѕ│рІерЅх
        const handleHashChange = () => {
            const hash = window.location.hash.substring(1);
            if (hash) {
                setCurrentView(hash);
            } else {
                setCurrentView('home-view');
            }
        };

        handleHashChange(); // рЅарѕјрІх рѕ▓рІ░рѕерїЇ
        window.addEventListener('hashchange', handleHashChange); // hash рѕ▓рЅђрІерѕГ

        return () => window.removeEventListener('hashchange', handleHashChange);
    }, []);

    // рЇЁрѕЂрЇјрЅйріЋ рѕѕрѕўрѕўрѕЇріерЅх рІерѕџрІФрїѕрѕѕрїЇрѕЇ Component
    const TextPostsView = () => (
        <div className="post-content-container">
            {posts.length > 0 ? (
                posts.map(post => (
                    <div key={post.id} className="post-item">
                        {/* рІеTitle рѕўрѕхріГ рѕхрѕІрѕЇріљрЅарѕе ріЦріЏ рїерѕЮрѕеріљрІІрѕЇ */}
                        <h4 className="post-title">{post.title || "рѕГрІЋрѕх рІерѕѕрѕЮ"}</h4> 
                        <p>{post.content}</p>
                        <small className="post-date">{post.created_at || 'рІЏрѕг'}</small>
                    </div>
                ))
            ) : (
                <p className="no-content">рѕЮріЋрѕЮ рІерЅ░рѕѕрїарЇѕ рЇЁрѕЂрЇЇ рІерѕѕрѕЮрЇб</p>
            )}
             <a href="#" className="button-link back-btn delete-btn" onClick={() => updateView('dashboard')}>рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</a>
        </div>
    );
    
    // 4. ­Ъќ╝№ИЈ рІерїѕрї╣ рїѕрїйрЅ│ (UI/JSX)
    return (
        <>
            <Head>
                <title>рЇІрѕ▓рѕЇ рІїрЅЦ ріарЇЋ - Fasil Web App</title>
            </Head>

            {/* Loading Overlay */}
            <div className="loading-overlay" id="loading-overlay">
                <div className="spinner"></div>
                <p id="loading-message">... ріЦрІерЅ░рїФріљ ріљрІЇ (Loading) ...</p>
            </div>

            {/* ­ЪЏЉ рѕЂрѕЅрѕЮ Views ріЦрІџрѕЁ рІЇрѕхрїЦ ріЊрЅИрІЇрЇб рІерѕџрЅ│рІерІЇ рЅа currentView State рІГрІѕрѕ░ріЊрѕЇ */}
            <div id="views-container">
                {/* 1. HOME VIEW */}
                <div className="section" id="home-view" style={{ display: currentView === 'home-view' ? 'block' : 'none' }}>
                    <h1>ріЦріЋрі│ріЋ рІ░рѕЁріЊ рѕўрїА рІѕрІ░ рЇІрѕ▓рѕЇ рІїрЅЦ ріарЇЋ!</h1>
                    {/* ... рІерЅ░рЅђрѕерІЇ intro-text-box рІГрІўрЅх ... */}
                    <div className="intro-text-box">
┬а ┬а ┬а ┬а ┬а ┬а             <h3>­Ъїљ рѕхрѕѕ рЇІрѕ▓рѕЇ рІїрЅЦ ріарЇЋ</h3>
┬а ┬а ┬а ┬а ┬а ┬а             <p><strong>рЇІрѕ▓рѕЇ рІїрЅЦ ріарЇЋ</strong> рЅаріерЇЇрЅ░ріЏ рїЦрѕФрЅх ріЦріЊ рЇЇрїЦріљрЅх рІерѕџрѕ░рѕФ рІерІ▓рїѓрЅ│рѕЇ рѕўрїІрѕфрІФ рѕўрІхрѕеріГ ріљрІЇрЇб</p>
┬а ┬а ┬а ┬а ┬а ┬а             <p><strong>рЇІрѕ▓рѕЇ ріарЇЋ</strong> рЅхріГріГрѕѕріЏ рѕўрѕерїЃрІјрЅйріЋрЇБ рЇІрІГрѕјрЅйріЋ (рїйрѕЉрЇЇрЇБ рідрІ▓рІ«рЇБ рѕЮрѕхрѕЇрЇБ **PowerPoint**рЇБ PDF) рЅаріГрЇЇрІФрѕЮ рЅаріљрї╗рѕЮ ріарѕЏрѕФрїГ рІФрЅђрѕГрЅБрѕЇрЇб рЅарЅ░рїерѕЏрѕфрѕЮ рїѕріЋрІўрЅЦрІјріЋ ріерІІрїІ рѕўріЊрѕГ рѕѕрѕўрїарЅарЅЁ рІе**рІ▓рїѓрЅ│рѕЇ рѕЮріЋрІЏрѕг** рїЇрЅЦрІГрЅх ріЦріЊ **рІЊрѕѕрѕЮ ріарЅђрЇЇ рїЇрІЦрІјрЅйріЋ** рѕѕрѕўрЇѕрЇђрѕЮ рІФрѕхрЅйрѕІрѕЇрЇб</p>

┬а ┬а ┬а ┬а ┬а ┬а             <p><strong>рІеріарїѕрѕЇрїЇрѕјрЅх рїЦрѕФрЅх:</strong></p>
┬а ┬а ┬а ┬а ┬а ┬а             <ul>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а             <li>РюЁ **ріљрЇЃ:** рѕўрѕ░рѕерЅ│рІі рІерЇІрІГрѕЇ рѕЏрїІрѕФрЅх ріарїѕрѕЇрїЇрѕјрЅХрЅйріЋ рЅарїЦрѕФрЅх рЅђріЋрѕХ рІФрЅђрѕГрЅБрѕЇрЇб</li>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а             <li>РГљ **ріГрЇЇрІФ (Premium):** рѕЂрѕЅріЋрѕЮ ріарїѕрѕЇрїЇрѕјрЅХрЅй рЅа**ріерЇЇрЅ░ріЏ рїЦрѕФрЅх**рЇБ **рЇѕрїБріЋ рЇЇрїЦріљрЅх** ріЦріЊ рІе**рІЊрѕѕрѕЮ ріарЅђрЇЇ рїЇрІЦ** ріарїѕрѕЇрїЇрѕјрЅх рІФрїѕріЏрѕЅрЇб</li>
┬а ┬а ┬а ┬а ┬а ┬а             </ul>
┬а ┬а ┬а ┬а             </div>
┬а ┬а ┬а ┬а┬а
                    <h2 style={{ textAlign: 'center' }}>рІерѕџрЇѕрѕЇрїЅрЅхріЋ рІеріарїѕрѕЇрїЇрѕјрЅх ріарІГріљрЅх рЅарѕўрѕЮрѕерїЦ рІГрїђрѕЮрѕЕ:</h2>
┬а ┬а ┬а ┬а┬а
                    <button className="button-link main-btn" onClick={() => updateView('signup-form')}>рѕўрѕўрІЮрїѕрЅЦ/рѕўрїЇрЅБрЅх (ріљрЇЃ)</button>
                    <button className="button-link premium-btn" style={{ backgroundColor: '#ffc107', color: '#333' }} onClick={() => updateView('pricing')}>рЅаріГрЇЇрІФ ріарѕЏрѕФрїГ (Premium)</button>
                </div>

                {/* 2. SIGN UP FORM */}
                <div className="section" id="signup-form" style={{ display: currentView === 'signup-form' ? 'block' : 'none' }}>
                    <h2 id="signup-title">рѕўрѕўрІЮрїѕрЅбрІФ (Sign Up - ріљрЇЃ)</h2>
                    <input type="text" id="signup-phone" placeholder="рѕхрѕЇріГ рЅЂрїЦрѕГ (Required)" required />
                    <input type="email" id="signup-email" placeholder="рібрѕюрѕЇ (Required)" required />
                    <input type="password" id="signup-password" placeholder="рІерІГрѕѕрЇЇ рЅЃрѕЇ (6 ріарѕђрІЮ Password)" required maxLength="6" />
                    
                    <button className="main-btn" onClick={handleSignUp}>рЅ░рѕўрІЮрїѕрЅЦ (Sign Up)</button>
                    
                    <p style={{ textAlign: 'center', marginTop: '20px' }}><a href="#" onClick={() => updateView('login-form')}>ріерІџрѕЁ рЅарЇірЅх рЅ░рѕўрІЮрїЇрЅарІІрѕЇ? рІГрїЇрЅА (Log In)</a></p>
                </div>

                {/* 3. LOGIN FORM */}
                <div className="section" id="login-form" style={{ display: currentView === 'login-form' ? 'block' : 'none' }}>
                    <h2>рѕўрїЇрЅбрІФ (Log In)</h2>
                    <input type="text" id="login-phone" placeholder="рѕхрѕЇріГ рЅЂрїЦрѕГ (Required)" required />
                    <input type="password" id="login-password" placeholder="рІерІГрѕѕрЇЇ рЅЃрѕЇ (Password)" required />
                    
                    <button className="success-btn" onClick={handleLogin}>рїЇрЅБ (Log In)</button>
                    
                    <p style={{ textAlign: 'center', marginTop: '20px' }}><a href="#" onClick={() => updateView('signup-form')}>ріарІ▓рѕх рЅ░рїарЅЃрѕџ? рІГрѕўрІЮрїѕрЅА (Sign Up)</a></p>
                </div>

                {/* 4. PRIVACY POLICY */}
                 <div className="section" id="privacy-policy" style={{ display: currentView === 'privacy-policy' ? 'block' : 'none' }}>
                     <h2>рІерїЇрѕІрІіріљрЅх рЇќрѕірѕ▓ ріЦріЊ рїЦрЅЦрЅЁ рІеріарїарЅЃрЅђрѕЮ рѕўрѕўрѕфрІФ</h2>
                     <div className="policy-text">
                        {/* ... рІеріЦрѕГрѕхрІј рІерЇќрѕірѕ▓ рІГрІўрЅх ... */}
                        <h3>­Ъћ┤ рїЦрЅЦрЅЁ рІеріарїарЅЃрЅђрѕЮ рѕўрѕўрѕфрІФ (Mandatory Use Policy)</h3>
┬а ┬а ┬а ┬а ┬а ┬а             <p>рІерЇІрѕ▓рѕЇ ріарЇЋріЋ рЅарѕўрїарЅђрѕЮрІј рІерѕџріерЅ░рѕЅрЅхріЋ рѕЁрїјрЅй рІФрѕѕ рѕЮріЋрѕЮ рЅЁрІхрѕў рѕЂріћрЅ│ рЅ░рѕхрѕЏрѕЮрЅ░рІІрѕЇрЇА</p>
┬а ┬а ┬а ┬а ┬а ┬а             <ul>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а             <li><strong>рІерЇќрѕѕрЅ▓ріФ рЅхрЅйрЅх/рЅЁрѕхрЅђрѕ│ рІерЅ░ріерѕѕріерѕѕ ріљрІЇрЇА</strong> рЅарѕўрІхрѕеріЕ рѕІрІГ рѕЏріЋріЏрІЇріЋрѕЮ ріарІГріљрЅх рІерЇќрѕѕрЅ▓ріФ рїЦрѕІрЅ╗рЇБ рЅЁрѕхрЅђрѕ│ рІѕрІГрѕЮ рІерѕЃрІГрѕЏріќрЅх рїЇрїГрЅх рѕЏрѕ░рѕФрїерЅх рЅарїЦрЅЦрЅЁ рІерЅ░ріерѕѕріерѕѕ ріљрІЇрЇб</li>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а             <li><strong>рѕЃрѕ░рЅ░ріЏ рѕўрѕерїЃ рѕЏрѕ░рѕФрїерЅх рІерЅ░ріерѕѕріерѕѕ ріљрІЇрЇА</strong> рѕўрѕерїЃрІЇ рЅхріГріГрѕѕріЏ рѕўрѕєріЉ рѕ│рІГрѕерїІрїѕрїЦ рѕЏрѕхрѕѕрїЦ рІерЅ░ріерѕѕріерѕѕ ріљрІЇрЇб</li>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а             <li><strong>рІерїЦрЅЃрЅх рІѕрІГрѕЮ рІерїЦрѕІрЅ╗ ріЋрїЇрїЇрѕГ рІерЅ░ріерѕѕріерѕѕ ріљрІЇрЇА</strong> рѕ░рІјрЅйріЋ рІѕрІГрѕЮ рЅАрІхріќрЅйріЋ рІерѕџрІФрїарЅЂ рІГрІўрЅХрЅйріЋ рѕўрѕѕрїарЇЇ ріарІГрЇѕрЅђрІхрѕЮрЇб</li>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а             <li><strong>ріЦрІхрѕю рїѕрІ░рЅЦрЇА</strong> ріарїѕрѕЇрїЇрѕјрЅ▒ріЋ рѕѕрѕўрїарЅђрѕЮ рЅбрІФріЋрѕх 18 рІЊрѕўрЅх рѕўрѕЎрѕІрЅх рїЇрІ┤рЅ│ ріљрІЇрЇб</li>
┬а ┬а ┬а ┬а ┬а ┬а             </ul>
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а             <p style={{ marginTop: '15px', fontWeight: 'bold', color: '#007bff' }}>рЅарѕЏріЋріЏрІЇрѕЮ рїірІю рІГрѕЁріЋріЋ рЇќрѕірѕ▓ рїЦрѕ░рІЇ ріерЅ░рїѕріЎрЇБ ріаріФрІЇріЋрЅхрІј рІФрѕѕ рѕЏрѕхрїаріЋрЅђрЅѓрІФ рѕірІўрїІ рІГрЅйрѕІрѕЇрЇб</p>
                     </div>
                     <button className="main-btn" onClick={handleAgreePolicy}>ріЦрѕхрѕЏрѕЏрѕѕрѕЂ (Agree & Continue)</button>
                     <button className="button-link delete-btn" onClick={() => updateView('policy-disagree')}>РЮї ріарѕЇрѕхрѕЏрѕЏрѕЮ/рІГрЅЁрѕГрЅЦріЮ (Disagree/Exit)</button>
                 </div>

                {/* 5. POLICY DISAGREE */}
                <div className="section" id="policy-disagree" style={{ display: currentView === 'policy-disagree' ? 'block' : 'none' }}>
                    <h2 style={{ color: '#dc3545' }}>Рџа№ИЈ рѕЏрѕхрїаріЋрЅђрЅѓрІФ: рІеріарїѕрѕЇрїЇрѕјрЅх рІЇрѕЇ</h2>
                    <p style={{ textAlign: 'center', fontSize: '18px', fontWeight: 'bold', color: '#dc3545' }}>
                        рЅарЇќрѕірѕ▓рІФрЅйріЋ ріФрѕЇрЅ░рѕхрѕЏрѕЎ рЇІрѕ▓рѕЇ рІїрЅЦ ріарЇЋріЋ рѕўрїарЅђрѕЮ ріарІГрЅйрѕЅрѕЮрЇб
                    </p>
                    <div style={{ marginTop: '30px', textAlign: 'center' }}>
                        <button className="button-link main-btn" style={{ width: '150px', display: 'inline-block' }} onClick={() => updateView('privacy-policy')}>РюЁ ріарѕЂріЋрѕЮ ріЦрѕ░рѕЏрѕЏрѕѕрѕЂ</button>
                        <button className="button-link delete-btn" style={{ width: '150px', display: 'inline-block' }} onClick={() => updateView('home-view')}>­Ъџф рѕѕрѕўрІЇрїБрЅх рІГрїФріЉ</button>
                    </div>
                </div>

                {/* 6. DASHBOARD */}
                <div className="section" id="dashboard" style={{ display: currentView === 'dashboard' ? 'block' : 'none' }}>
                    <h1>рІІріЊрІЇ ріарїѕрѕЇрїЇрѕјрЅх (Dashboard)</h1>
                    {/* ... рІерЅ░рЅђрѕерІЇ Dashboard рІГрІўрЅх ... */}
                    <button className="global-pay-btn" style={{ marginTop: '25px', border: '2px solid #2e7d32' }} onClick={() => checkPremiumAccess('global-purchase-page')}>
┬а ┬а ┬а ┬а ┬а ┬а             ­ЪїЇ рІЊрѕѕрѕЮ ріарЅђрЇЇ рїЇрІЦрІјрЅйріЋ рѕѕрѕўрЇѕрЇђрѕЮ (Global Purchase)
┬а ┬а ┬а ┬а             </button>
┬а ┬а ┬а ┬а             <button className="premium-btn" style={{ marginTop: '5px', backgroundColor: '#ffc107', color: '#333' }} onClick={() => checkPremiumAccess('premium-services')}>РГљ№ИЈ рЅаріГрЇЇрІФ ріарїѕрѕЇрїЇрѕјрЅ│рЅйріЋ рІФрѕЅрЅхріЋ рІГрѕўрѕЇріерЅ▒ / рІГрїјрЅЦріЎріЋ</button>
┬а ┬а ┬а ┬а             <button className="button-link main-btn" style={{ marginTop: '5px' }} onClick={() => updateView('feedback-page')}>РГљ рѕѕрЇІрѕ▓рѕЇ рІїрЅЦ ріарЇЋ ріарѕхрЅ░рІФрІерЅх рѕѕрѕўрѕхрїарЅх</button>
┬а ┬а ┬а ┬а             <button className="premium-btn" style={{ marginTop: '5px', backgroundColor: '#00bcd4' }} onClick={() => checkPremiumAccess('feedback-view-page')}>­ЪЉђ рІерЅ░рѕ░рїА ріарѕхрЅ░рІФрІерЅХрЅйріЋ рІГрѕўрѕЇріерЅ▒</button>
                    
                    <h2 style={{ marginTop: '30px' }}>рІерЅ░рѕѕрїарЇЅ рѕўрѕерїЃрІјрЅйріЋ рѕўрѕўрѕЇріерЅх:</h2>
┬а ┬а ┬а ┬а             <button className="button-link main-btn" onClick={() => updateView('view-text')}>­ЪЊё рЇЁрѕЂрЇЇ/рѕўрѕерїЃ рЅ░рѕўрѕЇріерЅх</button>
┬а ┬а ┬а ┬а             <button className="button-link main-btn" onClick={() => updateView('view-image')}>­Ъќ╝№ИЈ рѕЮрѕхрѕЇ/рЇјрЅХ рЅ░рѕўрѕЇріерЅх</button>

┬а ┬а ┬а ┬а             <h2 style={{ marginTop: '30px' }}>ріарІ▓рѕх рѕўрѕерїЃ рѕѕрѕўрѕѕрїарЇЇ/рѕѕрѕЏрїІрѕФрЅх:</h2>
┬а ┬а ┬а ┬а             <button className="button-link main-btn" onClick={() => updateView('post-text')}>РюЇ№ИЈ рЇЁрѕЂрЇЇ рѕѕрѕўрѕѕрїарЇЇ</button>
┬а ┬а ┬а ┬а             <button className="button-link main-btn" onClick={() => updateView('post-image')}>­ЪЊи рѕЮрѕхрѕЇ рѕѕрѕўрѕѕрїарЇЇ</button>
┬а ┬а ┬а ┬а             
┬а ┬а ┬а ┬а             <button className="button-link delete-btn" style={{ marginTop: '15px' }}>­Ъџф рІЇрїБ (Log Out)</button>
                </div>
                
                {/* 7. POST TEXT */}
                <div className="section" id="post-text" style={{ display: currentView === 'post-text' ? 'block' : 'none' }}>
                    <h2>РюЇ№ИЈ рїйрѕЉрЇЇ рІѕрІГрѕЮ рѕўрѕЇрІЋріГрЅх рѕѕрѕўрѕѕрїарЇЇ</h2>
                    <input 
                        type="text" 
                        id="post-text-title" 
                        placeholder="рѕГрІЋрѕх (Title)" 
                        required 
                        value={newPostTitle}
                        onChange={(e) => setNewPostTitle(e.target.value)}
                    />
                    <textarea 
                        id="post-text-content" 
                        placeholder="рѕўрѕЇрІЋріГрЅхрІјріЋ ріЦрІџрѕЁ рІГрї╗рЇЅ..." 
                        rows="8" 
                        required
                        value={newPostContent}
                        onChange={(e) => setNewPostContent(e.target.value)}
                    ></textarea>
                    
                    <button className="main-btn" onClick={handlePostText}>рѕўрѕЇрІЋріГрЅ▒ріЋ рѕѕрїЦрЇЇ (Post)</button>
                    {statusMessage && <p style={{ color: statusMessage.startsWith('РЮї') ? 'red' : 'green', textAlign: 'center' }}>{statusMessage}</p>}
                    <button className="button-link back-btn delete-btn" onClick={() => updateView('dashboard')}>рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</button>
                </div>

                {/* 8. VIEW TEXT */}
                <div className="section" id="view-text" style={{ display: currentView === 'view-text' ? 'block' : 'none' }}>
                    <h2>­ЪЊё рІерЅ░рѕѕрїарЇЅ рїйрѕЉрЇјрЅйріЋ рѕўрѕўрѕЇріерЅ╗</h2>
                    <p style={{textAlign: 'center', fontWeight: 'bold', color: 'darkred'}}>{statusMessage}</p>
                    <TextPostsView /> 
                </div>

                {/* ­ЪЏЉ рѕїрѕјрЅй Views (Pricing, Payment, Global Purchase, рІѕрІўрЅ░) рЅарЅ░рѕўрѕ│рѕ│рІГ рѕўрѕЇріЕ рІГріерЅ░рѕІрѕЅ */}
                <div className="section" id="pricing" style={{ display: currentView === 'pricing' ? 'block' : 'none' }}>
                    <h2>рІеріГрЇЇрІФ ріарѕЏрѕФрї«рЅй (Premium Plans)</h2>
                    {/* ... Pricing content ... */}
                    <p style={{ textAlign: 'center' }}>ріерѕџріерЅ░рѕЅрЅх ріарѕЏрѕФрї«рЅй ріаріЋрІ▒ріЋ рЅарѕўрѕЮрѕерїЦ рІѕрІ░ ріГрЇЇрІФ рІГрЅђрїЦрѕЅрЇб</p>

                    <div className="plan-card" onClick={() => selectPlan('daily')}><h3>рІЋрѕѕрЅ│рІі (Daily)</h3><p>5 рЅЦрѕГ (ETB)</p><button className="plan-btn success-btn" style={{ padding: '10px' }}>рІГрѕЁріЋ рѕЮрѕерїЦ</button></div>
                    <div className="plan-card" onClick={() => selectPlan('monthly')}><h3>рІѕрѕГрѕЃрІі (Monthly)</h3><p>30 рЅЦрѕГ (ETB)</p><button className="plan-btn success-btn" style={{ padding: '10px' }}>рІГрѕЁріЋ рѕЮрѕерїЦ</button></div>
                    
                    <button className="premium-btn" style={{ marginTop: '20px' }} onClick={() => checkPremiumAccess('premium-services')}>РГљ№ИЈ рЅаріГрЇЇрІФ ріарїѕрѕЇрїЇрѕјрЅ│рЅйріЋ рІФрѕЅрЅхріЋ рІГрѕўрѕЇріерЅ▒ / рІГрїјрЅЦріЎріЋ</button>
                    
                    <button className="wallet-btn" onClick={() => updateView('deposit-money')}>­Ъњ░ рїѕріЋрІўрЅЦ рѕЏрѕхрЅђрѕўрїЦ/рѕЮріЋрІЏрѕг рѕўрїЇрІЏрЅх</button>
                    
                    <button className="button-link delete-btn" onClick={() => updateView('home-view')}>рІѕрІ░ рѕўріљрѕ╗ рЅ░рѕўрѕѕрѕх</button>
                </div>
                 
                <div className="section" id="payment-methods" style={{ display: currentView === 'payment-methods' ? 'block' : 'none' }}>
                    <h2>ріГрЇЇрІФ рІГрЇѕрЇЁрѕЎ (Payment)</h2>
                    <p id="selected-plan-info" style={{ fontWeight: 'bold', color: '#dc3545', textAlign: 'center' }}></p>
                    
                    <div className="payment-info-box">
                        <p>рІГрѕЁ рІерѕЎріерѕФ рїѕрїй рѕхрѕѕрѕєріљрЇБ ріерЅ│рЅй рІФрѕѕрІЇріЋ рЅарЅ░ріЋ рѕ▓рїФріЉ ріГрЇЇрІФрІЇ ріЦріЋрІ░рЅ░рЇѕрїИрѕў рІГрЅєрїарѕФрѕЇрЇб</p>
                        <strong>(ріЦрІЇріљрЅ░ріЏ рїѕріЋрІўрЅЦ ріарІГріерЇЇрѕЅрѕЮ)</strong>
                    </div>

                    <button className="payment-btn success-btn" onClick={() => processPayment('Telebirr')}>рЅ┤рѕїрЅЦрѕГ (Telebirr) рЅ░рїарЅђрѕЮ</button>
                    <button className="payment-btn success-btn" onClick={() => processPayment('PayPal')}>рЇћрІГрЇЊрѕЇ (PayPal) рЅ░рїарЅђрѕЮ</button>

                    <button className="button-link delete-btn" onClick={() => updateView('pricing')}>рІѕрІ░ рЇЋрѕІріќрЅй рЅ░рѕўрѕѕрѕх</button>
                </div>

                {/* ­ЪЏЉ рѕїрѕјрЅйріЋ View IDs (post-image, view-image, global-purchase-page, рІѕрІўрЅ░) рЅарЅ░рѕўрѕ│рѕ│рІГ рѕўрѕЇріЕ рѕўрїерѕўрѕГ рІФрѕхрЇѕрѕЇрїІрѕЇ */}
                {/* рЅфрІ▓рІ« ріЦріЊ рѕЮрѕхрѕЇ рѕўрѕѕрїарЇірІФ рїѕрїй (Dummy) */}
                <div className="section" id="post-image" style={{ display: currentView === 'post-image' ? 'block' : 'none' }}>
                    <h2>­ЪЊи рѕЮрѕхрѕЇ/рЇјрЅХ рѕѕрѕўрѕѕрїарЇЇ</h2>
                    <p className="premium-notice" id="image-quality-notice">рѕѕріерЇЇрЅ░ріЏ рїЦрѕФрЅх рѕЮрѕхрѕЇ рІе Premium ріарїѕрѕЇрїЇрѕјрЅх рІФрѕхрЇѕрѕЇрїІрѕЇрЇб</p>
                    <input type="file" id="image-file" accept="image/*" style={{ width: '100%', marginBottom: '20px' }} />
                    <input type="text" id="post-image-title" placeholder="рІерѕЮрѕхрѕЅ рѕГрІЋрѕх (Title)" required />
                    <button className="main-btn" onClick={() => setStatusMessage('Рџа№ИЈ рѕЮрѕхрѕЇ рІерѕўрѕѕрїарЇЇ рЅ░рїЇрЅБрѕГ ріарѕЇрЅ░рІІрЅђрѕерѕЮ!')}>рѕЮрѕхрѕЅріЋ рѕѕрїЦрЇЇ (Post)</button>
                    <button className="button-link back-btn delete-btn" onClick={() => updateView('dashboard')}>рІѕрІ░ рІ│рѕйрЅдрѕГрІх рЅ░рѕўрѕѕрѕх</button>
                </div>

            </div>

            {/* 5. ­Ъје CSS Styles (рЅаNext.js рѕЁрїЇ рѕўрѕ░рѕерЅх) */}
            <style jsx global>{`
                /* --- рІеріЦрѕГрѕхрІј CSS рѕЎрѕЅ рЅарѕЎрѕЅ рІѕрІ░рІџрѕЁ рЅ░рІѕрѕхрІирѕЇ --- */
                body {
                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                    text-align: center;
                    padding: 20px;
                    background-color: #f0f4f8;
                    color: #333;
                }
                .section {
                    max-width: 600px;
                    margin: 40px auto;
                    padding: 30px;
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
                    border-top: 6px solid #007bff;
                    text-align: left;
                    /* display: none; */ /* рЅа React State рІГрЅ░ріФрѕЇ */
                }
                h1 { color: #007bff; font-size: 32px; margin-bottom: 10px; text-align: center; }
                h2 { color: #555; font-size: 24px; margin-top: 25px; margin-bottom: 25px; text-align: center; }
                
                /* --- рІерїЇрЅЦрІЊрЅх ріЦріЊ ріарІЮрѕФрѕГ рѕхрЅ│рІГрѕјрЅй --- */
                input[type="text"], input[type="email"], input[type="password"], input[type="number"], select, textarea, input[type="file"] {
                    width: 90%;
                    padding: 15px;
                    margin: 10px 0;
                    border: 1px solid #ccc;
                    border-radius: 8px;
                    box-sizing: border-box;
                    font-size: 16px;
                }
                
                /* --- рІеріарІЮрѕФрѕГ рѕўрѕ░рѕерЅх --- */
                .button-link, button {
                    display: block;
                    width: 90%;
                    padding: 18px;
                    margin: 15px auto;
                    text-align: center;
                    border-radius: 10px;
                    text-decoration: none;
                    font-weight: bold;
                    cursor: pointer;
                    transition: background-color 0.3s ease, transform 0.2s ease;
                    font-size: 18px;
                }

                /* --- рІеріарІЮрѕФрѕГ рЅђрѕѕрѕърЅй --- */
                .main-btn {
                    background-color: #007bff;
                    color: white;
                    border: none;
                }
                .main-btn:hover {
                    background-color: #0056b3;
                    transform: translateY(-2px);
                }
                
                .success-btn {
                    background-color: #28a745;
                    color: white;
                    border: none;
                }
                .success-btn:hover {
                    background-color: #1e7e34;
                }

                .premium-btn {
                    background-color: #ffc107;
                    color: #333;
                    border: none;
                }
                .premium-btn:hover {
                    background-color: #e0a800;
                }

                .delete-btn {
                    background-color: #dc3545; 
                    color: white;
                    border: none;
                }
                .delete-btn:hover {
                    background-color: #c82333;
                }

                .global-pay-btn {
                    background-color: #2e7d32;
                    color: white;
                    border: 2px solid #1b5e20;
                }
                .global-pay-btn:hover {
                    background-color: #1b5e20;
                }
                
                .wallet-btn {
                    background-color: #1abc9c;
                    color: white;
                    border: none;
                }
                .wallet-btn:hover {
                    background-color: #148f77;
                }


                /* --- ріФрѕГрІХрЅй ріЦріЊ рѕЇрІЕ рЅдрЅ│рІјрЅй --- */
                .intro-text-box, .payment-info-box {
                    background-color: #e9ecef;
                    padding: 20px;
                    border-radius: 8px;
                    margin-bottom: 25px;
                    border-left: 5px solid #007bff;
                }
                
                /* рІерЇќрѕірѕ▓рІЇ рЇЁрѕЂрЇЇ рІерѕџрЅ│рІГрЅарЅх рЅдрЅ│ */
                .policy-text {
                    background-color: #f8f9fa;
                    padding: 20px;
                    border-radius: 8px;
                    margin-bottom: 20px;
                    border: 1px solid #ddd;
                    text-align: left;
                    max-height: 300px;
                    overflow-y: auto;
                }

                .plan-card {
                    padding: 15px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    margin: 15px auto;
                    cursor: pointer;
                    transition: box-shadow 0.3s ease;
                    text-align: center;
                }
                .plan-card:hover {
                    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
                }
                
                .post-content-container {
                    margin-top: 20px;
                }
                .post-item {
                    border: 1px solid #ddd;
                    padding: 15px;
                    margin-bottom: 15px;
                    border-radius: 8px;
                    background-color: #f9f9f9;
                }
                .post-title {
                    color: #007bff;
                    margin-top: 0;
                }
                .post-date {
                    display: block;
                    font-size: 12px;
                    color: #999;
                    margin-top: 5px;
                }
                .no-content {
                    text-align: center;
                    padding: 40px;
                    color: #dc3545;
                    font-weight: bold;
                    background-color: #ffeaea;
                    border-radius: 8px;
                }

                /* --- Loading Spinner --- */
                .loading-overlay {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(255, 255, 255, 0.9);
                    display: none;
                    justify-content: center;
                    align-items: center;
                    z-index: 1000;
                    flex-direction: column;
                    font-size: 20px;
                    font-weight: bold;
                    color: #007bff;
                }
                .spinner {
                    border: 8px solid #f3f3f3;
                    border-top: 8px solid #007bff;
                    border-radius: 50%;
                    width: 60px;
                    height: 60px;
                    animation: spin 1s linear infinite;
                    margin-bottom: 20px;
                }
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
            `}</style>
        </>
    );
}
